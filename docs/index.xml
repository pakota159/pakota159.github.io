<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Cuong Pham</title>
<link>https://pakota159.github.io/</link>
<atom:link href="https://pakota159.github.io/index.xml" rel="self" type="application/rss+xml"/>
<description>Blog about SaaS metrics, data analysis, and technology</description>
<generator>quarto-1.8.27</generator>
<lastBuildDate>Sat, 31 Jan 2026 17:00:00 GMT</lastBuildDate>
<item>
  <title>SaaS Metrics that actually make sense - Part 3</title>
  <dc:creator>Cuong Pham</dc:creator>
  <link>https://pakota159.github.io/posts/saas-metrics-3/</link>
  <description><![CDATA[ 




<blockquote class="blockquote">
<p>Tá»« nhiá»u nguá»“n tÃ i liá»‡u tham kháº£o, cÃ¹ng kinh nghiá»‡m trong nhá»¯ng nÄƒm lÃ m phÃ¢n tÃ­ch dá»¯ liá»‡u, tÃ´i tá»•ng há»£p thÃ nh 1 frameword tá»•ng quan cÃ³ thá»ƒ Ã¡p dá»¥ng cho cÃ¡c mÃ´ hÃ¬nh SaaS</p>
</blockquote>
<iframe id="saas-metrics-frame" src="saas_metrics_chart.html" width="100%" scrolling="no" style="border:none; overflow:hidden;"></iframe>

<script>
  window.addEventListener("message", function(e) {
    // Check if the message contains our height data
    if (e.data && e.data.frameHeight) {
      const iframe = document.getElementById("saas-metrics-frame");
      if (iframe) {
        // Apply the new height
        iframe.style.height = e.data.frameHeight + "px";
      }
    }
  });
</script>
<section id="go-to-market-model" class="level2">
<h2 class="anchored" data-anchor-id="go-to-market-model">1. Go-to-Market Model</h2>
<p>KhÃ´ng cÃ³ má»™t bá»™ metric â€œváº¡n nÄƒngâ€ cho táº¥t cáº£. CÃ¡ch báº¡n bÃ¡n hÃ ng (GTM Strategy) sáº½ quyáº¿t Ä‘á»‹nh báº¡n cáº§n Ä‘o lÆ°á»ng cÃ¡i gÃ¬. Má»™t cÃ´ng ty bÃ¡n pháº§n má»m $10/thÃ¡ng (Self-service) sáº½ cÃ³ bá»™ chá»‰ sá»‘ hoÃ n toÃ n khÃ¡c vá»›i cÃ´ng ty bÃ¡n há»£p Ä‘á»“ng $100,000/nÄƒm (Enterprise).</p>
<p>DÆ°á»›i Ä‘Ã¢y lÃ  3 mÃ´ hÃ¬nh GTM phá»• biáº¿n mÃ  Data Analyst cáº§n phÃ¢n biá»‡t Ä‘á»ƒ xÃ¢y dá»±ng dashboard Ä‘Ãºng trá»ng tÃ¢m</p>
<section id="self-service-mÃ´-hÃ¬nh-tá»±-phá»¥c-vá»¥-plg" class="level3">
<h3 class="anchored" data-anchor-id="self-service-mÃ´-hÃ¬nh-tá»±-phá»¥c-vá»¥-plg">1. Self-Service (MÃ´ hÃ¬nh Tá»± phá»¥c vá»¥ / PLG)</h3>
<p>ÄÃ¢y lÃ  mÃ´ hÃ¬nh <strong>Product-Led Growth</strong> Ä‘iá»ƒn hÃ¬nh (nhÆ° Spotify, Zoom, Canva).</p>
<ul>
<li><strong>Äáº·c Ä‘iá»ƒm:</strong> KhÃ¡ch hÃ ng tá»± tÃ¬m Ä‘áº¿n, tá»± Ä‘Äƒng kÃ½ dÃ¹ng thá»­ vÃ  tá»± cÃ  tháº» thanh toÃ¡n.<br>
</li>
<li><strong>Vai trÃ² Sales:</strong> Gáº§n nhÆ° khÃ´ng cÃ³ (Touchless).<br>
</li>
<li><strong>Trá»ng tÃ¢m:</strong> Tá»‘i Æ°u UX/UI, Onboarding tá»± Ä‘á»™ng vÃ  Viral loops.</li>
</ul>
</section>
<section id="transactional-mÃ´-hÃ¬nh-giao-dá»‹ch" class="level3">
<h3 class="anchored" data-anchor-id="transactional-mÃ´-hÃ¬nh-giao-dá»‹ch">2. Transactional (MÃ´ hÃ¬nh Giao dá»‹ch)</h3>
<p>ÄÃ¢y lÃ  mÃ´ hÃ¬nh <strong>Inside Sales</strong> (nhÆ° HubSpot, Intercom).</p>
<ul>
<li><strong>Äáº·c Ä‘iá»ƒm:</strong> GiÃ¡ trá»‹ há»£p Ä‘á»“ng Ä‘á»§ cao Ä‘á»ƒ thuÃª nhÃ¢n viÃªn Sales, nhÆ°ng chÆ°a Ä‘á»§ lá»›n Ä‘á»ƒ Sales pháº£i â€œbay Ä‘i gáº·p khÃ¡châ€.<br>
</li>
<li><strong>Vai trÃ² Sales:</strong> Chá»‘t Ä‘Æ¡n qua Zoom/Phone/Email (Low/Mid Touch).<br>
</li>
<li><strong>Trá»ng tÃ¢m:</strong> Lead Generation (Marketing) káº¿t há»£p vá»›i chá»‘t Ä‘Æ¡n nhanh.</li>
</ul>
</section>
<section id="enterprise-mÃ´-hÃ¬nh-doanh-nghiá»‡p-lá»›n" class="level3">
<h3 class="anchored" data-anchor-id="enterprise-mÃ´-hÃ¬nh-doanh-nghiá»‡p-lá»›n">3. Enterprise (MÃ´ hÃ¬nh Doanh nghiá»‡p lá»›n)</h3>
<p>ÄÃ¢y lÃ  mÃ´ hÃ¬nh <strong>Field Sales / High Touch</strong> (nhÆ° Salesforce, Oracle, Palantir).</p>
<ul>
<li><strong>Äáº·c Ä‘iá»ƒm:</strong> BÃ¡n giáº£i phÃ¡p phá»©c táº¡p cho táº­p Ä‘oÃ n. Quy trÃ¬nh Ä‘áº¥u tháº§u dÃ i hÆ¡i.<br>
</li>
<li><strong>Vai trÃ² Sales:</strong> Gáº·p máº·t trá»±c tiáº¿p, xÃ¢y dá»±ng má»‘i quan há»‡ (Relationship), chÄƒm sÃ³c ká»¹ lÆ°á»¡ng.<br>
</li>
<li><strong>Trá»ng tÃ¢m:</strong> Account-Based Marketing (ABM) vÃ  giá»¯ chÃ¢n khÃ¡ch hÃ ng lá»›n (Logo Retention).</li>
</ul>
<hr>
</section>
<section id="unique-metrics-matrix-chá»‰-sá»‘-Ä‘áº·c-thÃ¹-theo-mÃ´-hÃ¬nh" class="level3">
<h3 class="anchored" data-anchor-id="unique-metrics-matrix-chá»‰-sá»‘-Ä‘áº·c-thÃ¹-theo-mÃ´-hÃ¬nh">ğŸ“Š Unique Metrics Matrix: Chá»‰ sá»‘ Ä‘áº·c thÃ¹ theo mÃ´ hÃ¬nh</h3>
<p>Báº£ng dÆ°á»›i Ä‘Ã¢y chá»‰ liá»‡t kÃª cÃ¡c metrics <strong>Ä‘á»™c nháº¥t</strong> cho tá»«ng mÃ´ hÃ¬nh (Metrics nÃ o Ã´ trá»‘ng nghÄ©a lÃ  khÃ´ng Æ°u tiÃªn theo dÃµi á»Ÿ mÃ´ hÃ¬nh Ä‘Ã³).</p>
<table class="caption-top table">
<colgroup>
<col style="width: 21%">
<col style="width: 26%">
<col style="width: 26%">
<col style="width: 26%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Metric (Chá»‰ sá»‘)</th>
<th style="text-align: center;">ğŸ° Self-Service (PLG)</th>
<th style="text-align: center;">ğŸ¦Œ Transactional</th>
<th style="text-align: center;">ğŸ˜ Enterprise</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Visitor-to-Signup</strong><br><em>(Tá»· lá»‡ khÃ¡ch thÄƒm web Ä‘Äƒng kÃ½ tk)</em></td>
<td style="text-align: center;"><strong>Target: 2% - 5%</strong><br><em>(Chá»‰ sá»‘ Ä‘áº§u phá»…u quan trá»ng nháº¥t)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;">â¬œ</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>PQL (Product Qualified Lead)</strong><br><em>(KhÃ¡ch Ä‘áº¡t â€œAha Momentâ€ trong sp)</em></td>
<td style="text-align: center;"><strong>Focus</strong><br><em>(Thay tháº¿ cho MQL truyá»n thá»‘ng)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;">â¬œ</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Trial-to-Paid Rate</strong><br><em>(Tá»· lá»‡ chuyá»ƒn Ä‘á»•i dÃ¹ng thá»­)</em></td>
<td style="text-align: center;"><strong>Target: 15% - 25%</strong><br><em>(ThÆ°á»›c Ä‘o PMF cá»§a PLG)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;">â¬œ</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>MQL <img src="https://latex.codecogs.com/png.latex?%5Crightarrow"> SQL Rate</strong><br><em>(Cháº¥t lÆ°á»£ng Lead Marketing)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;"><strong>Target: 10% - 20%</strong><br><em>(Äo sá»± Äƒn Ã½ Mkt-Sales)</em></td>
<td style="text-align: center;">â¬œ</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Win Rate</strong><br><em>(Tá»· lá»‡ chá»‘t Ä‘Æ¡n thÃ nh cÃ´ng)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;"><strong>Target: 20% - 30%</strong><br><em>(Äo ká»¹ nÄƒng chá»‘t Sale)</em></td>
<td style="text-align: center;">â¬œ</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Sales Cycle</strong><br><em>(Tá»‘c Ä‘á»™ chá»‘t Ä‘Æ¡n)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;"><strong>30 - 90 ngÃ y</strong><br><em>(Cáº§n tá»‘i Æ°u Ä‘á»ƒ xoay vÃ²ng vá»‘n)</em></td>
<td style="text-align: center;">â¬œ</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Pipeline Coverage</strong><br><em>(Äá»™ phá»§ Ä‘Æ°á»ng á»‘ng)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;"><strong>Target: 3x - 4x</strong><br><em>(Pipeline pháº£i gáº¥p 3 láº§n Quota)</em></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>TCV (Total Contract Value)</strong><br><em>(Tá»•ng giÃ¡ trá»‹ há»£p Ä‘á»“ng nhiá»u nÄƒm)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;"><strong>Critical</strong><br><em>(Quan trá»ng hÆ¡n MRR ngáº¯n háº¡n)</em></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>RFP Win Rate</strong><br><em>(Tá»· lá»‡ tháº¯ng tháº§u)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;"><strong>Focus</strong><br><em>(Äo nÄƒng lá»±c Ä‘áº¥u tháº§u)</em></td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>ğŸ’¡ Táº¡i sao láº¡i cÃ³ nhá»¯ng Ã´ trá»‘ng?
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>VÃ­ dá»¥:</strong> Táº¡i sao <strong>Self-Service</strong> khÃ´ng Ä‘o <strong>Win Rate</strong>?
<ul>
<li>VÃ¬ khÃ´ng cÃ³ nhÃ¢n viÃªn Sales Ä‘á»ƒ â€œWinâ€ hay â€œLoseâ€. KhÃ¡ch hÃ ng tá»± mua hoáº·c khÃ´ng mua (Ä‘o báº±ng Conversion Rate).</li>
</ul></li>
<li><strong>VÃ­ dá»¥:</strong> Táº¡i sao <strong>Enterprise</strong> khÃ´ng Ä‘o <strong>Visitor-to-Signup</strong>?
<ul>
<li>VÃ¬ khÃ¡ch hÃ ng lá»›n (Coca-Cola, Unilever) khÃ´ng bao giá» lÃªn web báº¥m nÃºt â€œSign upâ€. Há» mua qua quan há»‡ Ä‘á»‘i tÃ¡c vÃ  Ä‘áº¥u tháº§u.</li>
</ul></li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>ğŸ“š TÃ i liá»‡u tham kháº£o uy tÃ­n (Reliable Sources)
</div>
</div>
<div class="callout-body-container callout-body">
<p>Äá»ƒ hiá»ƒu sÃ¢u vá» sá»± khÃ¡c biá»‡t váº­n hÃ nh nÃ y, báº¡n nÃªn tham kháº£o:</p>
<ol type="1">
<li><strong>The Angel VC (Christoph Janz):</strong> BÃ i viáº¿t kinh Ä‘iá»ƒn phÃ¢n loáº¡i cÃ¡c â€œloÃ i thÃºâ€ (Rabbits, Deers, Elephants) tÆ°Æ¡ng á»©ng vá»›i cÃ¡c metrics khÃ¡c nhau.
<ul>
<li>ğŸ‘‰ <a href="http://christophjanz.blogspot.com/2014/10/five-ways-to-build-100-million-business.html">Read: Five ways to build a $100 million business</a></li>
</ul></li>
<li><strong>Product-Led Growth Metrics (OpenView):</strong> ChuyÃªn sÃ¢u vá» cÃ¡c chá»‰ sá»‘ PQL vÃ  Viral cho mÃ´ hÃ¬nh Self-Service.
<ul>
<li>ğŸ‘‰ <a href="https://openviewpartners.com/plg/">Read: The PLG Index &amp; Benchmarks</a></li>
</ul></li>
<li><strong>Enterprise Sales Metrics (Jason Lemkin / SaaStr):</strong> CÃ¡c chá»‰ sá»‘ sá»‘ng cÃ²n cho mÃ´ hÃ¬nh bÃ¡n hÃ ng Enterprise.
<ul>
<li>ğŸ‘‰ <a href="https://www.saastr.com/what-is-a-good-pipeline-coverage-ratio/">Read: What Is A Good Pipeline Coverage Ratio?</a></li>
</ul></li>
</ol>
</div>
</div>
</section>
</section>
<section id="growth-strategy" class="level2">
<h2 class="anchored" data-anchor-id="growth-strategy">2. Growth Strategy</h2>
<p>Náº¿u GTM Model tráº£ lá»i cÃ¢u há»i <em>â€œBÃ¡n hÃ ng nhÆ° tháº¿ nÃ o?â€</em>, thÃ¬ Growth Strategy tráº£ lá»i cÃ¢u há»i <em>â€œÄá»™ng cÆ¡ tÄƒng trÆ°á»Ÿng náº±m á»Ÿ Ä‘Ã¢u?â€</em>.</p>
<p>Trong SaaS, cÃ³ hai Ä‘á»™ng cÆ¡ chÃ­nh: Sáº£n pháº©m tá»± bÃ¡n nÃ³ (Product-Led) hoáº·c Con ngÆ°á»i Ä‘i bÃ¡n (Sales-Led). Hiá»ƒu sai Ä‘á»™ng cÆ¡ sáº½ dáº«n Ä‘áº¿n viá»‡c Ä‘o sai chá»‰ sá»‘ (vÃ­ dá»¥: Ã©p Ä‘á»™i Product chá»‹u trÃ¡ch nhiá»‡m vá» doanh sá»‘, hoáº·c Ã©p Ä‘á»™i Sales chá»‹u trÃ¡ch nhiá»‡m vá» lÆ°á»£t view).</p>
<section id="product-led-growth-plg" class="level3">
<h3 class="anchored" data-anchor-id="product-led-growth-plg">1. Product-Led Growth (PLG)</h3>
<ul>
<li><strong>Äá»™ng cÆ¡:</strong> Sáº£n pháº©m lÃ  kÃªnh thu hÃºt, giá»¯ chÃ¢n vÃ  má»Ÿ rá»™ng chÃ­nh.</li>
<li><strong>CÆ¡ cháº¿:</strong> End-user dÃ¹ng thá»­ <img src="https://latex.codecogs.com/png.latex?%5Crightarrow"> Tháº¥y giÃ¡ trá»‹ (Aha!) <img src="https://latex.codecogs.com/png.latex?%5Crightarrow"> Má»i báº¡n bÃ¨/Äá»“ng nghiá»‡p (Viral) <img src="https://latex.codecogs.com/png.latex?%5Crightarrow"> CÃ´ng ty tráº£ tiá»n.</li>
<li><strong>VÃ­ dá»¥:</strong> Slack, Zoom, Dropbox.</li>
</ul>
</section>
<section id="sales-led-growth-slg" class="level3">
<h3 class="anchored" data-anchor-id="sales-led-growth-slg">2. Sales-Led Growth (SLG)</h3>
<ul>
<li><strong>Äá»™ng cÆ¡:</strong> Äá»™i ngÅ© Sales &amp; Marketing lÃ  mÅ©i nhá»n.</li>
<li><strong>CÆ¡ cháº¿:</strong> Marketing táº¡o Lead <img src="https://latex.codecogs.com/png.latex?%5Crightarrow"> Sales tiáº¿p cáº­n (Outbound/Inbound) <img src="https://latex.codecogs.com/png.latex?%5Crightarrow"> Demo/Thuyáº¿t phá»¥c <img src="https://latex.codecogs.com/png.latex?%5Crightarrow"> KÃ½ há»£p Ä‘á»“ng.</li>
<li><strong>VÃ­ dá»¥:</strong> Salesforce, Oracle, SAP.</li>
</ul>
</section>
<section id="hybrid-chiáº¿n-lÆ°á»£c-lai" class="level3">
<h3 class="anchored" data-anchor-id="hybrid-chiáº¿n-lÆ°á»£c-lai">3. Hybrid (Chiáº¿n lÆ°á»£c Lai)</h3>
<ul>
<li><strong>Äá»™ng cÆ¡:</strong> Káº¿t há»£p PLG á»Ÿ Ä‘áº§u phá»…u (Ä‘á»ƒ má»Ÿ rá»™ng user base giÃ¡ ráº») vÃ  SLG á»Ÿ cuá»‘i phá»…u (Ä‘á»ƒ chá»‘t há»£p Ä‘á»“ng lá»›n).</li>
<li><strong>CÆ¡ cháº¿:</strong> User dÃ¹ng báº£n Free <img src="https://latex.codecogs.com/png.latex?%5Crightarrow"> Äáº¡t ngÆ°á»¡ng PQL <img src="https://latex.codecogs.com/png.latex?%5Crightarrow"> Sales nháº£y vÃ o tÆ° váº¥n gÃ³i Enterprise.</li>
<li><strong>VÃ­ dá»¥:</strong> HubSpot, Atlassian, Microsoft.</li>
</ul>
<hr>
</section>
<section id="growth-metrics-matrix-chá»‰-sá»‘-Ä‘áº·c-thÃ¹-theo-chiáº¿n-lÆ°á»£c" class="level3">
<h3 class="anchored" data-anchor-id="growth-metrics-matrix-chá»‰-sá»‘-Ä‘áº·c-thÃ¹-theo-chiáº¿n-lÆ°á»£c">ğŸ“Š Growth Metrics Matrix: Chá»‰ sá»‘ Ä‘áº·c thÃ¹ theo Chiáº¿n lÆ°á»£c</h3>
<p>Báº£ng dÆ°á»›i Ä‘Ã¢y liá»‡t kÃª cÃ¡c metrics <strong>Ä‘á»™c nháº¥t</strong> pháº£n Ã¡nh sá»©c khá»e cá»§a tá»«ng Ä‘á»™ng cÆ¡ tÄƒng trÆ°á»Ÿng.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 21%">
<col style="width: 26%">
<col style="width: 26%">
<col style="width: 26%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Metric (Chá»‰ sá»‘)</th>
<th style="text-align: center;">ğŸš€ Product-Led (PLG)</th>
<th style="text-align: center;">ğŸ’¼ Sales-Led (SLG)</th>
<th style="text-align: center;">ğŸ¤ Hybrid (PLG + SLG)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Viral Coefficient (K-factor)</strong><br><em>(Há»‡ sá»‘ lan truyá»n)</em></td>
<td style="text-align: center;"><strong>Target: &gt; 1.0</strong><br><em>(1 user má»i thÃªm &gt;1 user má»›i)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;">â¬œ</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Activation Rate</strong><br><em>(Tá»· lá»‡ kÃ­ch hoáº¡t)</em></td>
<td style="text-align: center;"><strong>Critical Focus</strong><br><em>(NgÆ°á»i dÃ¹ng cháº¡m Ä‘iá»ƒm Aha!)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;"><strong>Critical Focus</strong><br><em>(Lá»c lead rÃ¡c cho Sales)</em></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Magic Number</strong><br><em>(Hiá»‡u quáº£ chi tiÃªu Sales/Mkt)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;"><strong>Target: &gt; 0.75</strong><br><em>(Bá» 1 Ä‘á»“ng Mkt thu vá» &gt;0.75 Ä‘á»“ng ARR)</em></td>
<td style="text-align: center;">â¬œ</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Quota Attainment</strong><br><em>(Tá»· lá»‡ Ä‘áº¡t chá»‰ tiÃªu Sales)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;"><strong>Target: &gt; 80%</strong><br><em>(Sá»©c khá»e cá»§a Ä‘á»™i ngÅ© Sales)</em></td>
<td style="text-align: center;">â¬œ</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Sales Ramp Time</strong><br><em>(Thá»i gian training Sales)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;"><strong>Focus</strong><br><em>(Tá»‘i Æ°u thá»i gian sales má»›i ra tráº­n)</em></td>
<td style="text-align: center;">â¬œ</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>PQL <img src="https://latex.codecogs.com/png.latex?%5Crightarrow"> SQL Rate</strong><br><em>(Tá»· lá»‡ chuyá»ƒn giao)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;"><strong>Focus</strong><br><em>(Hiá»‡u quáº£ cá»§a cÃ¡i báº¯t tay Prod-Sale)</em></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Product-Influenced Pipeline</strong><br><em>(Doanh thu nhá» Sáº£n pháº©m)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;"><strong>Target: &gt; 30%</strong><br><em>(Tá»· trá»ng PLG Ä‘Ã³ng gÃ³p vÃ o Deal lá»›n)</em></td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>ğŸ’¡ Giáº£i mÃ£ Matrix
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>Táº¡i sao SLG khÃ´ng Ä‘o Viral Coefficient?</strong>
<ul>
<li>VÃ¬ Sales bÃ¡n hÃ ng qua quan há»‡ vÃ  cold call. KhÃ¡ch hÃ ng B2B truyá»n thá»‘ng Ã­t khi â€œinvite friendâ€ Ä‘á»ƒ nháº­n thÆ°á»Ÿng.</li>
</ul></li>
<li><strong>Táº¡i sao PLG khÃ´ng Ä‘o Quota Attainment?</strong>
<ul>
<li>VÃ¬ khÃ´ng cÃ³ nhÃ¢n viÃªn Sales Ä‘á»ƒ Ã¡p doanh sá»‘ (Quota). Ãp lá»±c tÄƒng trÆ°á»Ÿng Ä‘áº·t lÃªn vai Product Manager &amp; Growth Hacker.</li>
</ul></li>
<li><strong>Táº¡i sao Hybrid cáº§n Ä‘o PQL <img src="https://latex.codecogs.com/png.latex?%5Crightarrow"> SQL?</strong>
<ul>
<li>ÄÃ¢y lÃ  â€œtá»­ huyá»‡tâ€ cá»§a mÃ´ hÃ¬nh lai. Náº¿u Product team Ä‘áº©y sang quÃ¡ nhiá»u lead â€œnonâ€ (chÆ°a Ä‘á»§ cháº¥t lÆ°á»£ng), Ä‘á»™i Sales sáº½ lÃ£ng phÃ­ thá»i gian vÃ  xung Ä‘á»™t ná»™i bá»™ náº£y sinh.</li>
</ul></li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>ğŸ“š TÃ i liá»‡u tham kháº£o uy tÃ­n (Reliable Sources)
</div>
</div>
<div class="callout-body-container callout-body">
<p>Äá»ƒ xÃ¢y dá»±ng dashboard Ä‘Ãºng cho tá»«ng chiáº¿n lÆ°á»£c, hÃ£y tham kháº£o:</p>
<ol type="1">
<li><strong>SaaS Magic Number (Scale Venture Partners):</strong> Chá»‰ sá»‘ vÃ ng Ä‘á»ƒ Ä‘o lÆ°á»ng hiá»‡u quáº£ Ä‘áº§u tÆ° cá»§a Sales-Led Growth.
<ul>
<li>ğŸ‘‰ <a href="https://www.scalevp.com/metrics/magic-number">Read: The SaaS Magic Number Calculator</a></li>
</ul></li>
<li><strong>Product-Led Growth Guide (OpenView):</strong> â€œKinh thÃ¡nhâ€ vá» cÃ¡c chá»‰ sá»‘ Viral vÃ  Activation cho PLG.
<ul>
<li>ğŸ‘‰ <a href="https://openviewpartners.com/product-led-growth/">Read: What is Product-Led Growth?</a></li>
</ul></li>
<li><strong>The Hybrid Model (Elena Verna / Reforge):</strong> PhÃ¢n tÃ­ch chuyÃªn sÃ¢u vá» cÃ¡ch káº¿t há»£p PLG vÃ  SLG mÃ  khÃ´ng gÃ¢y Ä‘Ã¡nh nhau giá»¯a cÃ¡c team.
<ul>
<li>ğŸ‘‰ <a href="https://www.reforge.com/blog/product-led-growth-vs-sales-led-growth">Read: PLG vs.&nbsp;SLG vs.&nbsp;Hybrid</a></li>
</ul></li>
</ol>
</div>
</div>
</section>
</section>
<section id="pricing-strategy" class="level2">
<h2 class="anchored" data-anchor-id="pricing-strategy">3. Pricing Strategy</h2>
<p>Náº¿u GTM lÃ  cÃ¡ch báº¡n bÃ¡n, Growth lÃ  Ä‘á»™ng cÆ¡, thÃ¬ <strong>Pricing Model</strong> lÃ  cÆ¡ cháº¿ â€œthu hoáº¡châ€ giÃ¡ trá»‹ (Monetization). Chá»n sai mÃ´ hÃ¬nh Ä‘á»‹nh giÃ¡ cÃ³ thá»ƒ khiáº¿n báº¡n Ä‘á»ƒ láº¡i ráº¥t nhiá»u tiá»n trÃªn bÃ n Ä‘Ã m phÃ¡n.</p>
<p>Dá»±a trÃªn sÆ¡ Ä‘á»“ chiáº¿n lÆ°á»£c, chÃºng ta cÃ³ cÃ¡c mÃ´ hÃ¬nh Ä‘á»‹nh giÃ¡ phá»• biáº¿n cáº§n theo dÃµi:</p>
<section id="per-user-seat-based-theo-Ä‘áº§u-ngÆ°á»i" class="level3">
<h3 class="anchored" data-anchor-id="per-user-seat-based-theo-Ä‘áº§u-ngÆ°á»i">1. Per-User / Seat-Based (Theo Ä‘áº§u ngÆ°á»i)</h3>
<ul>
<li><strong>CÆ¡ cháº¿:</strong> Tráº£ tiá»n theo sá»‘ lÆ°á»£ng tÃ i khoáº£n nhÃ¢n viÃªn (License).</li>
<li><strong>Phá»• biáº¿n:</strong> Microsoft 365, Salesforce, Slack.</li>
<li><strong>Rá»§i ro:</strong> KhÃ¡ch hÃ ng chia sáº» tÃ i khoáº£n (Account Sharing) Ä‘á»ƒ giáº£m chi phÃ­.</li>
</ul>
</section>
<section id="tiered-packages-gÃ³i-phÃ¢n-cáº¥p" class="level3">
<h3 class="anchored" data-anchor-id="tiered-packages-gÃ³i-phÃ¢n-cáº¥p">2. Tiered Packages (GÃ³i phÃ¢n cáº¥p)</h3>
<ul>
<li><strong>CÆ¡ cháº¿:</strong> Chia thÃ nh cÃ¡c gÃ³i (Standard, Pro, Enterprise) dá»±a trÃªn giá»›i háº¡n tÃ­nh nÄƒng.</li>
<li><strong>Phá»• biáº¿n:</strong> HubSpot, Netflix, LinkedIn.</li>
<li><strong>Má»¥c tiÃªu:</strong> ThÃºc Ä‘áº©y khÃ¡ch hÃ ng â€œleo thangâ€ (Upgrade) lÃªn gÃ³i cao hÆ¡n.</li>
</ul>
</section>
<section id="usage-based-theo-má»©c-dÃ¹ng" class="level3">
<h3 class="anchored" data-anchor-id="usage-based-theo-má»©c-dÃ¹ng">3. Usage-Based (Theo má»©c dÃ¹ng)</h3>
<ul>
<li><strong>CÆ¡ cháº¿:</strong> â€œDÃ¹ng bao nhiÃªu tráº£ báº¥y nhiÃªuâ€ (Pay-as-you-go). ÄÆ¡n vá»‹ tÃ­nh: GB, API Request, Email.</li>
<li><strong>Phá»• biáº¿n:</strong> AWS, Twilio, Snowflake.</li>
<li><strong>Sá»©c máº¡nh:</strong> KhÃ´ng cÃ³ tráº§n doanh thu (Uncapped Upsell).</li>
</ul>
</section>
<section id="transactional-theo-giao-dá»‹ch" class="level3">
<h3 class="anchored" data-anchor-id="transactional-theo-giao-dá»‹ch">4. Transactional (Theo giao dá»‹ch)</h3>
<ul>
<li><strong>CÆ¡ cháº¿:</strong> Thu phÃ­ pháº§n trÄƒm (%) trÃªn tá»•ng giÃ¡ trá»‹ giao dá»‹ch (GMV).</li>
<li><strong>Phá»• biáº¿n:</strong> Shopify (Payments), Stripe, PayPal.</li>
<li><strong>Äáº·c thÃ¹:</strong> Doanh thu biáº¿n Ä‘á»™ng máº¡nh theo mÃ¹a vá»¥ kinh doanh cá»§a khÃ¡ch hÃ ng.</li>
</ul>
</section>
<section id="freemium-miá»…n-phÃ­-cÆ¡-báº£n" class="level3">
<h3 class="anchored" data-anchor-id="freemium-miá»…n-phÃ­-cÆ¡-báº£n">5. Freemium (Miá»…n phÃ­ cÆ¡ báº£n)</h3>
<ul>
<li><strong>CÆ¡ cháº¿:</strong> DÃ¹ng thá»­ miá»…n phÃ­ mÃ£i mÃ£i (khÃ´ng giá»›i háº¡n thá»i gian) Ä‘á»ƒ thu hÃºt user, thu tiá»n tÃ­nh nÄƒng cao cáº¥p.</li>
<li><strong>Phá»• biáº¿n:</strong> Spotify, Dropbox, Zoom.</li>
<li><strong>ThÃ¡ch thá»©c:</strong> Chi phÃ­ nuÃ´i user miá»…n phÃ­ (Cost to Serve) cÃ³ thá»ƒ Äƒn mÃ²n lá»£i nhuáº­n.</li>
</ul>
<hr>
</section>
<section id="pricing-metrics-matrix-chá»‰-sá»‘-Ä‘áº·c-thÃ¹" class="level3">
<h3 class="anchored" data-anchor-id="pricing-metrics-matrix-chá»‰-sá»‘-Ä‘áº·c-thÃ¹">ğŸ“Š Pricing Metrics Matrix: Chá»‰ sá»‘ Ä‘áº·c thÃ¹</h3>
<p>DÆ°á»›i Ä‘Ã¢y lÃ  báº£ng ma tráº­n má»Ÿ rá»™ng vá»›i 5 cá»™t, giÃºp Data Analyst xÃ¡c Ä‘á»‹nh chÃ­nh xÃ¡c cáº§n Ä‘o lÆ°á»ng cÃ¡i gÃ¬ cho tá»«ng mÃ´ hÃ¬nh:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 13%">
<col style="width: 17%">
<col style="width: 17%">
<col style="width: 17%">
<col style="width: 17%">
<col style="width: 17%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Metric (Chá»‰ sá»‘)</th>
<th style="text-align: center;">ğŸ‘¤ Per-Seat</th>
<th style="text-align: center;">ğŸ“¦ Tiered</th>
<th style="text-align: center;">âš¡ Usage-Based</th>
<th style="text-align: center;">ğŸ’³ Transactional</th>
<th style="text-align: center;">ğŸ†“ Freemium</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>License Utilization</strong><br><em>(Tá»· lá»‡ dÃ¹ng gháº¿)</em></td>
<td style="text-align: center;"><strong>Target: &gt;85%</strong><br><em>(Sá»‘ gháº¿ Active / Tá»•ng gháº¿)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;">â¬œ</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Seat Expansion Rate</strong><br><em>(Tá»‘c Ä‘á»™ mua thÃªm gháº¿)</em></td>
<td style="text-align: center;"><strong>Focus</strong><br><em>(Äá»™ng lá»±c tÄƒng trÆ°á»Ÿng chÃ­nh)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;">â¬œ</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Upgrade Rate</strong><br><em>(Tá»· lá»‡ nÃ¢ng gÃ³i)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;"><strong>Target: 10-20%</strong><br><em>(Std <img src="https://latex.codecogs.com/png.latex?%5Crightarrow"> Pro)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;">â¬œ</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Feature Adoption</strong><br><em>(DÃ¹ng tÃ­nh nÄƒng gÃ³i cao)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;"><strong>Focus</strong><br><em>(ÄÃ²n báº©y Ä‘á»ƒ Upsell)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;">â¬œ</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Consumption Rate</strong><br><em>(Tá»‘c Ä‘á»™ tiÃªu thá»¥)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;"><strong>Critical</strong><br><em>(KhÃ¡ch Ä‘á»‘t tiá»n nhanh hay cháº­m)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;">â¬œ</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Overage Revenue</strong><br><em>(Doanh thu vÆ°á»£t gÃ³i)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;"><strong>Focus</strong><br><em>(Tiá»n tráº£ thÃªm ngoÃ i cam káº¿t)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;">â¬œ</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>GMV</strong><br><em>(Tá»•ng giÃ¡ trá»‹ giao dá»‹ch)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;"><strong>North Star</strong><br><em>(Sá»©c khá»e cá»§a khÃ¡ch hÃ ng)</em></td>
<td style="text-align: center;">â¬œ</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Take Rate</strong><br><em>(Tá»· lá»‡ phÃ­ thu Ä‘Æ°á»£c)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;"><strong>Focus</strong><br><em>(VÃ­ dá»¥: 2.5% trÃªn GMV)</em></td>
<td style="text-align: center;">â¬œ</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Free-to-Paid Rate</strong><br><em>(Tá»· lá»‡ chuyá»ƒn Ä‘á»•i)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;"><strong>Target: 2-5%</strong><br><em>(Sá»‘ng cÃ²n)</em></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Cost to Serve (Free)</strong><br><em>(Chi phÃ­ nuÃ´i user)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;"><strong>Critical</strong><br><em>(Cáº§n tá»‘i Æ°u)</em></td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>ğŸ’¡ Táº¡i sao Flat-Rate vÃ  Hybrid khÃ´ng cÃ³ trong báº£ng?
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>Flat-Rate (Trá»n gÃ³i):</strong> KhÃ´ng cÃ³ chá»‰ sá»‘ váº­n hÃ nh Ä‘áº·c thÃ¹ nÃ o Ä‘á»ƒ â€œtá»‘i Æ°uâ€. Báº¡n chá»‰ cÃ³ thá»ƒ theo dÃµi Churn vÃ  New Sales (Universal Metrics).</li>
<li><strong>Hybrid:</strong> LÃ  sá»± káº¿t há»£p cá»§a cÃ¡c cá»™t trÃªn. VÃ­ dá»¥: Intercom dÃ¹ng <em>Per-Seat</em> (cho Support agent) + <em>Usage-Based</em> (cho sá»‘ lÆ°á»£ng user Ä‘Æ°á»£c tiáº¿p cáº­n). Báº¡n cáº§n mix cÃ¡c metrics tá»« 2 cá»™t tÆ°Æ¡ng á»©ng.</li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>ğŸ“š TÃ i liá»‡u tham kháº£o uy tÃ­n (Reliable Sources)
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><strong>SaaS Pricing Models Guide (Stripe):</strong> PhÃ¢n tÃ­ch chi tiáº¿t Æ°u nhÆ°á»£c Ä‘iá»ƒm cá»§a Flat-rate vs.&nbsp;Tiered vs.&nbsp;Usage-based.
<ul>
<li>ğŸ‘‰ <a href="https://stripe.com/guides/saas-pricing-models">Read: A Guide to SaaS Pricing Models</a></li>
</ul></li>
<li><strong>The Freemium Manifesto (ProfitWell):</strong> Khi nÃ o nÃªn dÃ¹ng Freemium vÃ  cÃ¡c benchmark chuyá»ƒn Ä‘á»•i.
<ul>
<li>ğŸ‘‰ <a href="https://www.paddle.com/resources/freemium-vs-free-trial">Read: Freemium vs Free Trial</a></li>
</ul></li>
<li><strong>Marketplace Metrics (a16z):</strong> ChuyÃªn sÃ¢u vá» mÃ´ hÃ¬nh Transactional vÃ  chá»‰ sá»‘ GMV / Take Rate.
<ul>
<li>ğŸ‘‰ <a href="https://a16z.com/marketplace-metrics/">Read: 13 Metrics for Marketplace Companies</a></li>
</ul></li>
</ol>
</div>
</div>
</section>
</section>
<section id="market-focus" class="level2">
<h2 class="anchored" data-anchor-id="market-focus">4. Market Focus</h2>
<p>Yáº¿u tá»‘ cuá»‘i cÃ¹ng Ä‘á»‹nh hÃ¬nh bá»™ metrics cá»§a báº¡n lÃ  thá»‹ trÆ°á»ng má»¥c tiÃªu. Chiáº¿n lÆ°á»£c cá»§a má»™t cÃ´ng ty â€œbÃ¡n cho cáº£ tháº¿ giá»›iâ€ (Horizontal) sáº½ ráº¥t khÃ¡c vá»›i má»™t cÃ´ng ty â€œchá»‰ bÃ¡n cho tiá»‡m phá»Ÿâ€ (Vertical).</p>
<section id="horizontal-saas-thá»‹-trÆ°á»ng-ngang" class="level3">
<h3 class="anchored" data-anchor-id="horizontal-saas-thá»‹-trÆ°á»ng-ngang">1. Horizontal SaaS (Thá»‹ trÆ°á»ng Ngang)</h3>
<ul>
<li><strong>Äá»‹nh nghÄ©a:</strong> Giáº£i quyáº¿t má»™t váº¥n Ä‘á» chung cho má»i ngÃ nh nghá» (Chat, Accounting, HR, CRM).</li>
<li><strong>VÃ­ dá»¥:</strong> Slack, Zoom, QuickBooks, Microsoft 365.</li>
<li><strong>Äáº·c Ä‘iá»ƒm:</strong> TAM (Total Addressable Market) khá»•ng lá»“. Cuá»™c chÆ¡i lÃ  giÃ nh thá»‹ pháº§n (Market Share) vÃ  má»Ÿ rá»™ng Ä‘á»‹a lÃ½ (Global Expansion).</li>
</ul>
</section>
<section id="vertical-saas-thá»‹-trÆ°á»ng-dá»c" class="level3">
<h3 class="anchored" data-anchor-id="vertical-saas-thá»‹-trÆ°á»ng-dá»c">2. Vertical SaaS (Thá»‹ trÆ°á»ng Dá»c)</h3>
<ul>
<li><strong>Äá»‹nh nghÄ©a:</strong> Giáº£i quyáº¿t trá»n gÃ³i má»i váº¥n Ä‘á» cho má»™t ngÃ nh cá»¥ thá»ƒ (NhÃ  hÃ ng, Nha khoa, XÃ¢y dá»±ng).</li>
<li><strong>VÃ­ dá»¥:</strong> Toast (NhÃ  hÃ ng), Veeva (DÆ°á»£c pháº©m), Procore (XÃ¢y dá»±ng).</li>
<li><strong>Äáº·c Ä‘iá»ƒm:</strong> TAM bá»‹ giá»›i háº¡n (chá»‰ cÃ³ X nhÃ  hÃ ng trÃªn tháº¿ giá»›i). Äá»ƒ tÄƒng trÆ°á»Ÿng, há» buá»™c pháº£i bÃ¡n thÃªm nhiá»u sáº£n pháº©m phá»¥ (Fintech, Payroll, Inventory) cho cÃ¹ng má»™t khÃ¡ch hÃ ng Ä‘á»ƒ tÄƒng ARPA.</li>
</ul>
<hr>
</section>
<section id="market-focus-matrix-chá»‰-sá»‘-Ä‘áº·c-thÃ¹" class="level3">
<h3 class="anchored" data-anchor-id="market-focus-matrix-chá»‰-sá»‘-Ä‘áº·c-thÃ¹">ğŸ“Š Market Focus Matrix: Chá»‰ sá»‘ Ä‘áº·c thÃ¹</h3>
<p>Báº£ng dÆ°á»›i Ä‘Ã¢y lÃ m rÃµ sá»± chuyá»ƒn dá»‹ch trá»ng tÃ¢m tá»« â€œSá»‘ lÆ°á»£ngâ€ (Horizontal) sang â€œChiá»u sÃ¢uâ€ (Vertical).</p>
<table class="caption-top table">
<colgroup>
<col style="width: 28%">
<col style="width: 35%">
<col style="width: 35%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Metric (Chá»‰ sá»‘)</th>
<th style="text-align: center;">ğŸŒ Horizontal SaaS<br><em>(Slack, Zoom)</em></th>
<th style="text-align: center;">ğŸ—ï¸ Vertical SaaS<br><em>(Toast, Procore)</em></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Market Penetration %</strong><br><em>(Äá»™ thÃ¢m nháº­p thá»‹ trÆ°á»ng)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;"><strong>North Star</strong><br><em>(VÃ­ dá»¥: ÄÃ£ chiáº¿m bao nhiÃªu % tá»•ng sá»‘ nhÃ  hÃ ng táº¡i VN?)</em></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Geo Expansion Rate</strong><br><em>(Tá»‘c Ä‘á»™ má»Ÿ rá»™ng Ä‘á»‹a lÃ½)</em></td>
<td style="text-align: center;"><strong>Focus</strong><br><em>(ÄÃ¡nh chiáº¿m cÃ¡c quá»‘c gia má»›i)</em></td>
<td style="text-align: center;">â¬œ<br><em>(ThÆ°á»ng khÃ³ Globalize do Ä‘áº·c thÃ¹ ngÃ nh Ä‘á»‹a phÆ°Æ¡ng)</em></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Product Attach Rate</strong><br><em>(Tá»· lá»‡ dÃ¹ng Ä‘a sáº£n pháº©m)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;"><strong>Critical</strong><br><em>(KhÃ¡ch mua POS cÃ³ mua thÃªm Payroll khÃ´ng?)</em></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>ARPA Growth</strong><br><em>(TÄƒng trÆ°á»Ÿng doanh thu/khÃ¡ch)</em></td>
<td style="text-align: center;"><strong>Target: 10-20%</strong><br><em>(Chá»§ yáº¿u nhá» tÄƒng user)</em></td>
<td style="text-align: center;"><strong>Target: 30-50%</strong><br><em>(Nhá» bÃ¡n chÃ©o Fintech/Hardware)</em></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Wallet Share</strong><br><em>(Thá»‹ pháº§n vÃ­ tiá»n)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;"><strong>Focus</strong><br><em>(Chiáº¿m bao nhiÃªu % chi phÃ­ IT/Váº­n hÃ nh cá»§a khÃ¡ch?)</em></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Integration Breadth</strong><br><em>(Äá»™ rá»™ng tÃ­ch há»£p)</em></td>
<td style="text-align: center;"><strong>Focus</strong><br><em>(Káº¿t ná»‘i vá»›i 2000+ apps khÃ¡c)</em></td>
<td style="text-align: center;">â¬œ</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Fintech Take Rate</strong><br><em>(PhÃ­ thanh toÃ¡n/tÃ i chÃ­nh)</em></td>
<td style="text-align: center;">â¬œ</td>
<td style="text-align: center;"><strong>Critical</strong><br><em>(Nguá»“n thu chÃ­nh cá»§a Vertical hiá»‡n Ä‘áº¡i)</em></td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>ğŸ’¡ Táº¡i sao Vertical SaaS cáº§n Ä‘o â€œFintech Metricsâ€?
</div>
</div>
<div class="callout-body-container callout-body">
<p>VÃ¬ thá»‹ trÆ°á»ng ngÃ¡ch quÃ¡ nhá», cÃ¡c cÃ´ng ty Vertical SaaS hiá»‡n Ä‘áº¡i (nhÆ° Toast hay ShopBase) thÆ°á»ng Ã¡p dá»¥ng chiáº¿n lÆ°á»£c <strong>â€œSaaS + Fintechâ€</strong>. Há» khÃ´ng chá»‰ thu phÃ­ pháº§n má»m ($50/thÃ¡ng) mÃ  cÃ²n thu phÃ­ xá»­ lÃ½ thanh toÃ¡n (Payment Processing) hoáº·c cho vay vá»‘n. Do Ä‘Ã³, <strong>Take Rate</strong> vÃ  <strong>GPV (Gross Payment Volume)</strong> trá»Ÿ thÃ nh chá»‰ sá»‘ sá»‘ng cÃ²n, Ä‘Ã´i khi quan trá»ng hÆ¡n cáº£ MRR.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>ğŸ“š TÃ i liá»‡u tham kháº£o uy tÃ­n (Reliable Sources)
</div>
</div>
<div class="callout-body-container callout-body">
<p>Äá»ƒ hiá»ƒu sÃ¢u vá» sá»± trá»—i dáº­y cá»§a Vertical SaaS vÃ  cÃ¡ch Ä‘o lÆ°á»ng:</p>
<ol type="1">
<li><strong>Ten Laws of Vertical SaaS (Bessemer Venture Partners):</strong> TÃ i liá»‡u ná»n táº£ng giáº£i thÃ­ch táº¡i sao Vertical SaaS láº¡i cÃ³ cÃ¡c chá»‰ sá»‘ khÃ¡c biá»‡t vá» ARPA vÃ  Attach Rate.
<ul>
<li>ğŸ‘‰ <a href="https://www.bvp.com/atlas/ten-laws-of-vertical-saas">Read: 10 Laws of Vertical SaaS</a></li>
</ul></li>
<li><strong>Vertical SaaS Metrics (Bowery Capital):</strong> PhÃ¢n tÃ­ch chi tiáº¿t vá» táº§m quan trá»ng cá»§a Market Penetration trong thá»‹ trÆ°á»ng ngÃ¡ch.
<ul>
<li>ğŸ‘‰ <a href="https://bowerycap.com/blog/insights/vertical-saas-metrics">Read: Vertical SaaS Metrics Guide</a></li>
</ul></li>
<li><strong>The Fintech-Enabled Marketplace (a16z):</strong> CÃ¡ch cÃ¡c cÃ´ng ty Vertical kiáº¿m tiá»n tá»« Fintech.
<ul>
<li>ğŸ‘‰ <a href="https://a16z.com/fintech-scales-vertical-saas/">Read: Fintech-Enabled Marketplaces</a></li>
</ul></li>
</ol>
</div>
</div>


</section>
</section>

 ]]></description>
  <category>SaaS</category>
  <category>Business Model</category>
  <category>Strategy</category>
  <category>Startup</category>
  <guid>https://pakota159.github.io/posts/saas-metrics-3/</guid>
  <pubDate>Sat, 31 Jan 2026 17:00:00 GMT</pubDate>
  <media:content url="https://pakota159.github.io/img/saas-metrics/saas-framework.png" medium="image" type="image/png" height="79" width="144"/>
</item>
<item>
  <title>SaaS Metrics that actually make sense - Part 2</title>
  <dc:creator>Cuong Pham</dc:creator>
  <link>https://pakota159.github.io/posts/saas-metrics-2/</link>
  <description><![CDATA[ 




<blockquote class="blockquote">
<p>Tá»« nhiá»u nguá»“n tÃ i liá»‡u tham kháº£o, cÃ¹ng kinh nghiá»‡m trong nhá»¯ng nÄƒm lÃ m phÃ¢n tÃ­ch dá»¯ liá»‡u, tÃ´i tá»•ng há»£p thÃ nh 1 frameword tá»•ng quan cÃ³ thá»ƒ Ã¡p dá»¥ng cho cÃ¡c mÃ´ hÃ¬nh SaaS</p>
</blockquote>
<iframe id="saas-metrics-frame" src="saas_metrics_chart.html" width="100%" scrolling="no" style="border:none; overflow:hidden;"></iframe>

<script>
  window.addEventListener("message", function(e) {
    // Check if the message contains our height data
    if (e.data && e.data.frameHeight) {
      const iframe = document.getElementById("saas-metrics-frame");
      if (iframe) {
        // Apply the new height
        iframe.style.height = e.data.frameHeight + "px";
      }
    }
  });
</script>
<section id="layer-1-universal-saas-metrics" class="level2">
<h2 class="anchored" data-anchor-id="layer-1-universal-saas-metrics">Layer 1: Universal SaaS Metrics</h2>
<section id="mrr-arr" class="level3">
<h3 class="anchored" data-anchor-id="mrr-arr">MRR, ARR</h3>
<p>Náº¿u cÃ´ng ty SaaS lÃ  má»™t cÆ¡ thá»ƒ sá»‘ng, thÃ¬ <strong>MRR (Monthly Recurring Revenue)</strong> chÃ­nh lÃ  nhá»‹p tim. NÃ³ cho biáº¿t cÆ¡ thá»ƒ cÃ³ Ä‘ang sá»‘ng khá»e máº¡nh, á»•n Ä‘á»‹nh vÃ  bÆ¡m mÃ¡u Ä‘á»u Ä‘áº·n hay khÃ´ng.</p>
<p>KhÃ¡c vá»›i cÃ¡c mÃ´ hÃ¬nh bÃ¡n láº» (E-commerce) nÆ¡i doanh thu trá»“i sá»¥t theo mÃ¹a hoáº·c cÃ¡c Ä‘á»£t khuyáº¿n mÃ£i, Ä‘iá»ƒm quan trá»ng cá»§a SaaS náº±m á»Ÿ sá»± <strong>â€œÄá»‹nh ká»³â€ (Recurring)</strong>.</p>
<section id="Ä‘á»‹nh-nghÄ©a-chuáº©n-the-definition" class="level4">
<h4 class="anchored" data-anchor-id="Ä‘á»‹nh-nghÄ©a-chuáº©n-the-definition">1. Äá»‹nh nghÄ©a chuáº©n (The Definition)</h4>
<p>LÃ  má»™t Data Analyst, báº¡n cáº§n phÃ¢n biá»‡t ráº¡ch rÃ²i cÃ¡c khÃ¡i niá»‡m sau Ä‘á»ƒ trÃ¡nh lÃ m bÃ¡o cÃ¡o sai lá»‡ch:</p>
<ul>
<li><strong>MRR (Monthly Recurring Revenue):</strong> Tá»•ng doanh thu <em>dá»± kiáº¿n</em> láº·p láº¡i hÃ ng thÃ¡ng tá»« táº¥t cáº£ khÃ¡ch hÃ ng Ä‘ang active. Báº£n cháº¥t cá»§a MRR lÃ  sá»± <strong>â€œChuáº©n hÃ³aâ€ (Normalization)</strong> doanh thu vá» Ä‘Æ¡n vá»‹ thÃ¡ng.</li>
<li><strong>ARR (Annual Recurring Revenue):</strong> ÄÆ¡n giáº£n lÃ  <img src="https://latex.codecogs.com/png.latex?MRR%20%5Ctimes%2012">. Chá»‰ sá»‘ nÃ y thÆ°á»ng dÃ¹ng cho cÃ¡c cÃ´ng ty B2B Enterprise kÃ½ há»£p Ä‘á»“ng theo nÄƒm.</li>
</ul>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Warning</span>âš ï¸ Sai láº§m â€œcháº¿t ngÆ°á»iâ€ cá»§a Data Analyst
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>MRR KHÃ”NG PHáº¢I lÃ  dÃ²ng tiá»n (Cash Flow) hay Doanh thu ghi nháº­n (GAAP Revenue).</strong></p>
<p>VÃ­ dá»¥: Náº¿u khÃ¡ch hÃ ng tráº£ trÆ°á»›c 12 thÃ¡ng (<strong>120 triá»‡u VND</strong>) vÃ o thÃ¡ng 1:</p>
<ol type="1">
<li><strong>Cash Flow (ThÃ¡ng 1):</strong> 120 triá»‡u (Tiá»n vá» tÃºi ngay láº­p tá»©c).</li>
<li><strong>GAAP Revenue (ThÃ¡ng 1):</strong> 10 triá»‡u (Ghi nháº­n dáº§n theo nguyÃªn táº¯c káº¿ toÃ¡n).</li>
<li><strong>MRR (ThÃ¡ng 1):</strong> <strong>10 triá»‡u.</strong></li>
</ol>
<p>ğŸ‘‰ <strong>Táº¡i sao?</strong> MRR sinh ra Ä‘á»ƒ Ä‘o lÆ°á»ng <strong>tá»‘c Ä‘á»™ tÄƒng trÆ°á»Ÿng thá»±c táº¿</strong> vÃ  <strong>quy mÃ´</strong> cá»§a sáº£n pháº©m (Momentum), khÃ´ng pháº£i Ä‘á»ƒ Ä‘o lÆ°á»£ng tiá»n máº·t trong kÃ©t sáº¯t (Liquidity).</p>
</div>
</div>
</section>
<section id="cÃ´ng-thá»©c-tÃ­nh-cÃ¡ch-xá»­-lÃ½-dá»¯-liá»‡u-technical-calculation" class="level4">
<h4 class="anchored" data-anchor-id="cÃ´ng-thá»©c-tÃ­nh-cÃ¡ch-xá»­-lÃ½-dá»¯-liá»‡u-technical-calculation">2. CÃ´ng thá»©c tÃ­nh &amp; CÃ¡ch xá»­ lÃ½ dá»¯ liá»‡u (Technical Calculation)</h4>
<p>LÃ  má»™t DA, báº¡n khÃ´ng Ä‘Æ°á»£c cá»™ng thÃ´ (Sum) sá»‘ tiá»n trÃªn hÃ³a Ä‘Æ¡n. Báº¡n cáº§n tÆ° duy theo 2 bÆ°á»›c: <strong>Normalization (Chuáº©n hÃ³a)</strong> vÃ  <strong>Aggregation (Tá»•ng há»£p)</strong>.</p>
<section id="bÆ°á»›c-1-tÃ­nh-mrr-cho-tá»«ng-khÃ¡ch-hÃ ng-customer-level" class="level5">
<h5 class="anchored" data-anchor-id="bÆ°á»›c-1-tÃ­nh-mrr-cho-tá»«ng-khÃ¡ch-hÃ ng-customer-level">BÆ°á»›c 1: TÃ­nh MRR cho tá»«ng khÃ¡ch hÃ ng (Customer Level)</h5>
<p>TrÆ°á»›c khi tÃ­nh tá»•ng, báº¡n pháº£i Ä‘Æ°a táº¥t cáº£ cÃ¡c gÃ³i cÆ°á»›c vá» má»™t máº«u sá»‘ chung lÃ  â€œThÃ¡ngâ€. Theo <em>The Ultimate SaaS Metrics Cheat Sheet</em>:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0AMRR_%7Bi%7D%20=%20%5Cfrac%7B%5Ctext%7BContract%20Value%7D%7D%7B%5Ctext%7BBilling%20Interval%20(Months)%7D%7D%20-%20%5Ctext%7BOne-time%20Fees%7D%0A"></p>
<p><strong>VÃ­ dá»¥ thá»±c táº¿:</strong></p>
<ul>
<li>KhÃ¡ch A mua gÃ³i thÃ¡ng: Tráº£ $50/thÃ¡ng <img src="https://latex.codecogs.com/png.latex?%5Crightarrow"> <img src="https://latex.codecogs.com/png.latex?MRR_A%20=%2050">.</li>
<li>KhÃ¡ch B mua gÃ³i nÄƒm: Tráº£ $1,200/nÄƒm <img src="https://latex.codecogs.com/png.latex?%5Crightarrow"> <img src="https://latex.codecogs.com/png.latex?MRR_B%20=%201,200%20/%2012%20=%20100">.</li>
<li>KhÃ¡ch C mua gÃ³i quÃ½: Tráº£ $300/quÃ½ <img src="https://latex.codecogs.com/png.latex?%5Crightarrow"> <img src="https://latex.codecogs.com/png.latex?MRR_C%20=%20300%20/%203%20=%20100">.</li>
</ul>
</section>
<section id="bÆ°á»›c-2-tá»•ng-há»£p-toÃ n-há»‡-thá»‘ng-aggregation" class="level5">
<h5 class="anchored" data-anchor-id="bÆ°á»›c-2-tá»•ng-há»£p-toÃ n-há»‡-thá»‘ng-aggregation">BÆ°á»›c 2: Tá»•ng há»£p toÃ n há»‡ thá»‘ng (Aggregation)</h5>
<p>Sau khi chuáº©n hÃ³a, cÃ´ng thá»©c tá»•ng quÃ¡t sáº½ lÃ :</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Ctext%7BTotal%20MRR%7D%20=%20%5Csum_%7Bi=1%7D%5E%7Bn%7D%20MRR_%7Bi%7D%0A"></p>
</section>
<section id="bÆ°á»›c-3-phÃ¢n-tÃ­ch-biáº¿n-Ä‘á»™ng-the-mrr-equation" class="level5">
<h5 class="anchored" data-anchor-id="bÆ°á»›c-3-phÃ¢n-tÃ­ch-biáº¿n-Ä‘á»™ng-the-mrr-equation">BÆ°á»›c 3: PhÃ¢n tÃ­ch biáº¿n Ä‘á»™ng (The MRR Equation)</h5>
<p>Äá»ƒ tráº£ lá»i cÃ¢u há»i <em>â€œTáº¡i sao thÃ¡ng nÃ y MRR tÄƒng/giáº£m?â€</em>, báº¡n cáº§n tÃ¡ch MRR thÃ nh 4 dÃ²ng cháº£y (Components):</p>
<p>Trong Ä‘Ã³:</p>
<ol type="1">
<li><strong>New MRR:</strong> Tá»« khÃ¡ch hÃ ng má»›i tinh (New Logos).</li>
<li><strong>Expansion MRR:</strong> Tá»« khÃ¡ch cÅ© nÃ¢ng cáº¥p gÃ³i (Upsell) hoáº·c mua thÃªm user (Cross-sell).</li>
<li><strong>Contraction MRR:</strong> KhÃ¡ch cÅ© háº¡ cáº¥p gÃ³i (Downgrade) hoáº·c gá»¡ bá»›t user.</li>
<li><strong>Churned MRR:</strong> KhÃ¡ch hÃ ng há»§y hoÃ n toÃ n dá»‹ch vá»¥.</li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>ğŸ“š TÃ i liá»‡u tham kháº£o uy tÃ­n (Reliable Sources)
</div>
</div>
<div class="callout-body-container callout-body">
<p>Äá»ƒ hiá»ƒu sÃ¢u hÆ¡n vá» nuances (cÃ¡c sáº¯c thÃ¡i tinh táº¿) khi tÃ­nh toÃ¡n MRR/ARR, DA nÃªn tham kháº£o cÃ¡c nguá»“n sau:</p>
<ol type="1">
<li><strong>SaaS Metrics 2.0 (David Skok):</strong> ÄÆ°á»£c coi lÃ  â€œKinh thÃ¡nhâ€ cá»§a ngÃ nh SaaS. BÃ i viáº¿t giáº£i thÃ­ch chi tiáº¿t táº¡i sao MRR quan trá»ng hÆ¡n Cash Flow.
<ul>
<li>ğŸ‘‰ <a href="https://www.forentrepreneurs.com/saas-metrics-2/">Read: SaaS Metrics 2.0 â€“ A Guide to Measuring and Improving what Matters</a></li>
</ul></li>
<li><strong>The SaaS Metrics Cheat Sheet (ChartMogul):</strong> TÃ i liá»‡u ká»¹ thuáº­t cá»±c tá»‘t cho DA, Ä‘á»‹nh nghÄ©a rÃµ rÃ ng vá» cÃ¡ch xá»­ lÃ½ cÃ¡c trÆ°á»ng há»£p biÃªn (edge cases) nhÆ° discounts, refunds hay failed payments.
<ul>
<li>ğŸ‘‰ <a href="https://chartmogul.com/resources/saas-metrics-cheat-sheet/">Read: The Ultimate SaaS Metrics Cheat Sheet</a></li>
</ul></li>
</ol>
</div>
</div>
<hr>
</section>
</section>
</section>
<section id="gross-margin" class="level3">
<h3 class="anchored" data-anchor-id="gross-margin">Gross Margin</h3>
<p>Náº¿u MRR tráº£ lá»i cÃ¢u há»i <em>â€œBáº¡n bÃ¡n Ä‘Æ°á»£c bao nhiÃªu?â€</em>, thÃ¬ <strong>Gross Margin (BiÃªn lá»£i nhuáº­n gá»™p)</strong> tráº£ lá»i cÃ¢u há»i <em>â€œCháº¥t lÆ°á»£ng doanh thu cá»§a báº¡n tá»‘t Ä‘áº¿n má»©c nÃ o?â€</em>.</p>
<p>Trong giá»›i Ä‘áº§u tÆ°, $1 doanh thu cá»§a cÃ´ng ty SaaS (Margin 80%) cÃ³ giÃ¡ trá»‹ gáº¥p 3-4 láº§n so vá»›i $1 doanh thu cá»§a cÃ´ng ty Agency/Dá»‹ch vá»¥ (Margin 30%). ÄÃ¢y lÃ  chá»‰ sá»‘ phÃ¢n Ä‘á»‹nh ráº¡ch rÃ²i giá»¯a â€œCÃ´ng ty cÃ´ng nghá»‡ thá»±c thá»¥â€ vÃ  â€œCÃ´ng ty cháº¡y báº±ng cÆ¡mâ€.</p>
<section id="Ä‘á»‹nh-nghÄ©a-chuáº©n-cogs-trong-saas" class="level4">
<h4 class="anchored" data-anchor-id="Ä‘á»‹nh-nghÄ©a-chuáº©n-cogs-trong-saas">1. Äá»‹nh nghÄ©a chuáº©n &amp; COGS trong SaaS</h4>
<p><strong>Gross Margin</strong> lÃ  pháº§n doanh thu cÃ²n láº¡i sau khi trá»« Ä‘i <strong>COGS (Cost of Goods Sold - GiÃ¡ vá»‘n hÃ ng bÃ¡n)</strong>.</p>
<p>Vá»›i má»™t Data Analyst, thÃ¡ch thá»©c lá»›n nháº¥t náº±m á»Ÿ viá»‡c xÃ¡c Ä‘á»‹nh: <em>CÃ¡i gÃ¬ Ä‘Æ°á»£c tÃ­nh lÃ  COGS trong SaaS?</em></p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Warning</span>âš ï¸ Checklist: COGS bao gá»“m nhá»¯ng gÃ¬?
</div>
</div>
<div class="callout-body-container callout-body">
<p>KhÃ´ng giá»‘ng nhÆ° bÃ¡n láº» (nháº­p hÃ ng/tá»“n kho), COGS cá»§a SaaS bao gá»“m cÃ¡c chi phÃ­ trá»±c tiáº¿p Ä‘á»ƒ duy trÃ¬ dá»‹ch vá»¥ cho khÃ¡ch hÃ ng:</p>
<ol type="1">
<li>â˜ï¸ <strong>Hosting Costs:</strong> Chi phÃ­ mÃ¡y chá»§ (AWS, Azure, Google Cloud).</li>
<li>ğŸ§ <strong>Customer Support:</strong> LÆ°Æ¡ng cá»§a Ä‘á»™i ngÅ© Support/Success (LÆ°u Ã½: KhÃ´ng bao gá»“m Ä‘á»™i Sales).</li>
<li>ğŸ”— <strong>Third-party Fees:</strong> PhÃ­ báº£n quyá»n pháº§n má»m nhÃºng (vÃ­ dá»¥: phÃ­ API báº£n Ä‘á»“, phÃ­ SMS gateway, phÃ­ cá»•ng thanh toÃ¡n).</li>
<li>ğŸ‘· <strong>DevOps/Site Reliability:</strong> Chi phÃ­ nhÃ¢n sá»± duy trÃ¬ há»‡ thá»‘ng váº­n hÃ nh (Maintenance).</li>
</ol>
<p><em>LÆ°u Ã½: Chi phÃ­ phÃ¡t triá»ƒn sáº£n pháº©m (R&amp;D) vÃ  chi phÃ­ bÃ¡n hÃ ng (S&amp;M) <strong>KHÃ”NG</strong> náº±m trong COGS.</em></p>
</div>
</div>
</section>
<section id="cÃ´ng-thá»©c-tÃ­nh-the-formula" class="level4">
<h4 class="anchored" data-anchor-id="cÃ´ng-thá»©c-tÃ­nh-the-formula">2. CÃ´ng thá»©c tÃ­nh (The Formula)</h4>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Ctext%7BGross%20Margin%20%5C%25%7D%20=%20%5Cfrac%7B%5Ctext%7BRevenue%7D%20-%20%5Ctext%7BCOGS%7D%7D%7B%5Ctext%7BRevenue%7D%7D%20%5Ctimes%20100%5C%25%0A"></p>
<p>VÃ­ dá»¥: Báº¡n thu vá» $100. Báº¡n tá»‘n $10 cho server AWS vÃ  <img src="https://latex.codecogs.com/png.latex?10%20tr%E1%BA%A3%20l%C6%B0%C6%A1ng%20%C4%91%E1%BB%99i%20Support.">$ Lá»£i nhuáº­n gá»™p lÃ  $80. Gross Margin = <strong>80%</strong>.</p>
</section>
<section id="benchmarks-thÆ°á»›c-Ä‘o-Ä‘áº³ng-cáº¥p" class="level4">
<h4 class="anchored" data-anchor-id="benchmarks-thÆ°á»›c-Ä‘o-Ä‘áº³ng-cáº¥p">3. Benchmarks: ThÆ°á»›c Ä‘o â€œÄáº³ng cáº¥pâ€</h4>
<p>Gross Margin chÃ­nh lÃ  phong vÅ© biá»ƒu Ä‘á»ƒ phÃ¢n loáº¡i mÃ´ hÃ¬nh kinh doanh cá»§a báº¡n.</p>
<ul>
<li><strong>&gt; 80% (Pure SaaS):</strong> Äáº³ng cáº¥p tháº¿ giá»›i (Salesforce, Slack, Zoom). Doanh thu tÄƒng nhÆ°ng chi phÃ­ khÃ´ng tÄƒng tÆ°Æ¡ng á»©ng (Scalability cao).<br>
</li>
<li><strong>60% - 80% (Average SaaS):</strong> Má»©c cháº¥p nháº­n Ä‘Æ°á»£c. ThÆ°á»ng gáº·p á»Ÿ cÃ¡c SaaS cÃ³ yáº¿u tá»‘ phá»©c táº¡p hoáº·c cáº§n support nhiá»u.<br>
</li>
<li><strong>&lt; 50% (SaaS-enabled Service):</strong> BÃ¡o Ä‘á»™ng. CÃ³ thá»ƒ báº¡n Ä‘ang lÃ m mÃ´ hÃ¬nh dá»‹ch vá»¥ trÃ¡ hÃ¬nh SaaS (vÃ­ dá»¥: bÃ¡n pháº§n má»m nhÆ°ng pháº£i cá»­ ngÆ°á»i xuá»‘ng cÃ i Ä‘áº·t, Ä‘Ã o táº¡o, lÃ m há»™ bÃ¡o cÃ¡o). Kháº£ nÄƒng má»Ÿ rá»™ng (Scale) ráº¥t kÃ©m.</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>ğŸ’¡ Táº¡i sao Gross Margin tháº¥p láº¡i â€œgiáº¿t cháº¿tâ€ Valuation?
</div>
</div>
<div class="callout-body-container callout-body">
<p>HÃ£y nhÃ¬n vÃ o cÃ´ng thá»©c LTV á»Ÿ pháº§n sau: <img src="https://latex.codecogs.com/png.latex?LTV%20=%20%5Cfrac%7BARPU%20%5Ctimes%20%5Cmathbf%7BGross%20Margin%20%5C%25%7D%7D%7BChurn%7D"></p>
<p>Margin giáº£m tá»« 80% xuá»‘ng 40% nghÄ©a lÃ  LTV cá»§a báº¡n <strong>giáº£m má»™t ná»­a</strong>. Äá»ƒ bÃ¹ Ä‘áº¯p, báº¡n pháº£i chi Ã­t tiá»n hÆ¡n cho Marketing (CAC), dáº«n Ä‘áº¿n tÄƒng trÆ°á»Ÿng cháº­m láº¡i. ÄÃ³ lÃ  má»™t vÃ²ng xoÃ¡y Ä‘i xuá»‘ng.</p>
</div>
</div>
</section>
<section id="tá»‘i-Æ°u-hÃ³a-gross-margin-analyst-actionable" class="level4">
<h4 class="anchored" data-anchor-id="tá»‘i-Æ°u-hÃ³a-gross-margin-analyst-actionable">4. Tá»‘i Æ°u hÃ³a Gross Margin (Analyst Actionable)</h4>
<p>LÃ  DA, báº¡n cÃ³ thá»ƒ giÃºp cáº£i thiá»‡n chá»‰ sá»‘ nÃ y báº±ng cÃ¡ch phÃ¢n tÃ­ch:</p>
<ul>
<li><p><strong>Unit Cost Analysis:</strong> Chi phÃ­ AWS trÃªn má»—i khÃ¡ch hÃ ng lÃ  bao nhiÃªu? CÃ³ khÃ¡ch hÃ ng nÃ o â€œbÃ oâ€ server quÃ¡ má»©c so vá»›i sá»‘ tiá»n há» tráº£ khÃ´ng?</p></li>
<li><p><strong>Support Efficiency:</strong> Tá»· lá»‡ ticket/khÃ¡ch hÃ ng. Náº¿u má»™t tÃ­nh nÄƒng gÃ¢y lá»—i liÃªn tá»¥c khiáº¿n Ä‘á»™i Support quÃ¡ táº£i, Margin sáº½ bá»‹ Äƒn mÃ²n.</p></li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>ğŸ“š TÃ i liá»‡u tham kháº£o uy tÃ­n (Reliable Sources)
</div>
</div>
<div class="callout-body-container callout-body">
<p>Äá»ƒ chuáº©n hÃ³a cÃ¡ch háº¡ch toÃ¡n COGS cho SaaS, hÃ£y tham kháº£o:</p>
<ol type="1">
<li><strong>What to Include in COGS for SaaS (The SaaS CFO):</strong> HÆ°á»›ng dáº«n chi tiáº¿t vá» káº¿ toÃ¡n quáº£n trá»‹ Ä‘á»ƒ tÃ¡ch báº¡ch chi phÃ­ R&amp;D vÃ  COGS.
<ul>
<li>ğŸ‘‰ <a href="https://www.thesaascfo.com/saas-cost-of-goods-sold/">Read: SaaS P&amp;L: What goes in Cost of Goods Sold?</a></li>
</ul></li>
<li><strong>SaaS Gross Margin Benchmarks (OpenView):</strong> Dá»¯ liá»‡u kháº£o sÃ¡t tá»« hÃ ng trÄƒm cÃ´ng ty Ä‘á»ƒ biáº¿t báº¡n Ä‘ang Ä‘á»©ng á»Ÿ Ä‘Ã¢u trÃªn thá»‹ trÆ°á»ng.
<ul>
<li>ğŸ‘‰ <a href="https://openviewpartners.com/expansion-saas-benchmarks/">Read: 2023 SaaS Benchmarks Report</a></li>
</ul></li>
<li><strong>The Impact of Gross Margin (Kellblog):</strong> PhÃ¢n tÃ­ch cá»§a Dave Kellogg vá» viá»‡c táº¡i sao cÃ¡c nhÃ  Ä‘áº§u tÆ° láº¡i ghÃ©t Margin tháº¥p (liÃªn quan Ä‘áº¿n há»‡ sá»‘ nhÃ¢n doanh thu).
<ul>
<li>ğŸ‘‰ <a href="https://kellblog.com/2020/07/20/saas-metrics-gross-margin/">Read: Why Gross Margins Matter in SaaS</a></li>
</ul></li>
</ol>
</div>
</div>
<hr>
</section>
</section>
<section id="ltv-cac-cac-payback" class="level3">
<h3 class="anchored" data-anchor-id="ltv-cac-cac-payback">LTV, CAC, CAC Payback</h3>
<p>Náº¿u MRR cho biáº¿t quy mÃ´ hiá»‡n táº¡i, thÃ¬ cáº·p chá»‰ sá»‘ <strong>LTV (Lifetime Value)</strong> vÃ  <strong>CAC (Customer Acquisition Cost)</strong> cho biáº¿t <strong>tÃ­nh kháº£ thi (Viability)</strong> cá»§a mÃ´ hÃ¬nh kinh doanh trong dÃ i háº¡n. ÄÃ¢y Ä‘Æ°á»£c gá»i lÃ  <strong>Unit Economics</strong> (Kinh táº¿ Ä‘Æ¡n vá»‹).</p>
<p>Hiá»ƒu Ä‘Æ¡n giáº£n: Báº¡n bá» ra bao nhiÃªu tiá»n Ä‘á»ƒ mua má»™t khÃ¡ch (CAC) vÃ  khÃ¡ch Ä‘Ã³ sáº½ tráº£ láº¡i cho báº¡n bao nhiÃªu tiá»n lÃ£i trÆ°á»›c khi há» rá»i Ä‘i (LTV).</p>
<section id="cac-chi-phÃ­-Ä‘á»ƒ-cÃ³-má»™t-khÃ¡ch-hÃ ng-customer-acquisition-cost" class="level4">
<h4 class="anchored" data-anchor-id="cac-chi-phÃ­-Ä‘á»ƒ-cÃ³-má»™t-khÃ¡ch-hÃ ng-customer-acquisition-cost">1. CAC: Chi phÃ­ Ä‘á»ƒ cÃ³ má»™t khÃ¡ch hÃ ng (Customer Acquisition Cost)</h4>
<p><strong>Äá»‹nh nghÄ©a:</strong> CAC lÃ  tá»•ng chi phÃ­ Sales &amp; Marketing cáº§n thiáº¿t Ä‘á»ƒ thuyáº¿t phá»¥c má»™t khÃ¡ch hÃ ng má»›i (New Customer) mua hÃ ng trong má»™t khoáº£ng thá»i gian nháº¥t Ä‘á»‹nh.</p>
<section id="cÃ´ng-thá»©c-tÃ­nh-the-formula-1" class="level5">
<h5 class="anchored" data-anchor-id="cÃ´ng-thá»©c-tÃ­nh-the-formula-1">CÃ´ng thá»©c tÃ­nh (The Formula)</h5>
<p><img src="https://latex.codecogs.com/png.latex?%0ACAC%20=%20%5Cfrac%7B%5Csum%20(%5Ctext%7BTotal%20Sales%20%5C&amp;%20Marketing%20Expenses%7D)%7D%7B%5Ctext%7BNumber%20of%20New%20Customers%20Acquired%7D%7D%0A"></p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Warning</span>âš ï¸ Sai láº§m thÆ°á»ng gáº·p: â€œInvisible Costsâ€
</div>
</div>
<div class="callout-body-container callout-body">
<p>Nhiá»u Data Analyst chá»‰ tÃ­nh tiá»n cháº¡y quáº£ng cÃ¡o (Ad Spend) vÃ o tá»­ sá»‘. ÄÃ¢y lÃ  sai láº§m nghiÃªm trá»ng lÃ m chá»‰ sá»‘ Ä‘áº¹p giáº£ táº¡o. Theo chuáº©n <strong>HubSpot</strong> vÃ  <strong>SaaS Metrics 2.0</strong>, chi phÃ­ Sales &amp; Marketing pháº£i bao gá»“m:</p>
<ol type="1">
<li>ğŸ’° <strong>Ad Spend:</strong> Tiá»n tráº£ cho Facebook, Google, LinkedIn.</li>
<li>ğŸ‘¥ <strong>Salaries:</strong> LÆ°Æ¡ng + ThÆ°á»Ÿng + Hoa há»“ng (Commissions) cá»§a toÃ n bá»™ Ä‘á»™i Sales &amp; Marketing.</li>
<li>ğŸ› ï¸ <strong>Tools &amp; Tech:</strong> Chi phÃ­ pháº§n má»m (CRM, Marketing Automation, Zoomâ€¦).</li>
<li>ğŸ¨ <strong>Creative/Content:</strong> Chi phÃ­ sáº£n xuáº¥t ná»™i dung, design, event.</li>
</ol>
</div>
</div>
</section>
</section>
<section id="ltv-giÃ¡-trá»‹-trá»n-Ä‘á»i-khÃ¡ch-hÃ ng-customer-lifetime-value" class="level4">
<h4 class="anchored" data-anchor-id="ltv-giÃ¡-trá»‹-trá»n-Ä‘á»i-khÃ¡ch-hÃ ng-customer-lifetime-value">2. LTV: GiÃ¡ trá»‹ trá»n Ä‘á»i khÃ¡ch hÃ ng (Customer Lifetime Value)</h4>
<p><strong>Äá»‹nh nghÄ©a:</strong> LTV lÃ  tá»•ng lá»£i nhuáº­n gá»™p (Gross Profit) mÃ  báº¡n dá»± kiáº¿n thu Ä‘Æ°á»£c tá»« má»™t khÃ¡ch hÃ ng trong suá»‘t vÃ²ng Ä‘á»i cá»§a há».</p>
<p><strong>Äiá»ƒm máº¥u chá»‘t:</strong> LTV lÃ  má»™t chá»‰ sá»‘ mang tÃ­nh <strong>dá»± bÃ¡o (Predictive)</strong>, khÃ´ng pháº£i chá»‰ lÃ  lá»‹ch sá»­.</p>
<section id="cÃ´ng-thá»©c-tÃ­nh-the-formula-2" class="level5">
<h5 class="anchored" data-anchor-id="cÃ´ng-thá»©c-tÃ­nh-the-formula-2">CÃ´ng thá»©c tÃ­nh (The Formula)</h5>
<p>Theo <strong>David Skok</strong>, cÃ´ng thá»©c LTV chuáº©n xÃ¡c nháº¥t pháº£i bao gá»“m <strong>Gross Margin (BiÃªn lá»£i nhuáº­n gá»™p)</strong>. Náº¿u bá» qua Gross Margin, báº¡n Ä‘ang tÃ­nh Doanh thu (Revenue) chá»© khÃ´ng pháº£i GiÃ¡ trá»‹ (Value).</p>
<p><img src="https://latex.codecogs.com/png.latex?%0ALTV%20=%20%5Cfrac%7BARPU%20%5Ctimes%20%5Ctext%7BGross%20Margin%20%5C%25%7D%7D%7B%5Ctext%7BChurn%20Rate%7D%7D%0A"></p>
<p><em>Trong Ä‘Ã³:</em></p>
<ul>
<li><p><strong>ARPU:</strong> Doanh thu trung bÃ¬nh trÃªn má»™t khÃ¡ch hÃ ng (Average Revenue Per User).</p></li>
<li><p><strong>Gross Margin %:</strong> Tá»· lá»‡ lÃ£i gá»™p (thÆ°á»ng lÃ  70-80% vá»›i SaaS).</p></li>
<li><p><strong>Churn Rate:</strong> Tá»· lá»‡ khÃ¡ch hÃ ng rá»i bá» hÃ ng thÃ¡ng.</p></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>ğŸ§® VÃ­ dá»¥ thá»±c táº¿ (The Math)
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>KhÃ¡ch tráº£: <strong>$100 / thÃ¡ng</strong> (ARPU).</li>
<li>Chi phÃ­ server/support: <strong>$20 / thÃ¡ng</strong> <img src="https://latex.codecogs.com/png.latex?%5Crightarrow"> Gross Margin = <strong>80%</strong>.</li>
<li>Tá»· lá»‡ rá»i bá» (Churn): <strong>5% / thÃ¡ng</strong> (Trung bÃ¬nh khÃ¡ch á»Ÿ láº¡i 20 thÃ¡ng).</li>
</ul>
<p><img src="https://latex.codecogs.com/png.latex?%0ALTV%20=%20%5Cfrac%7B100%20%5Ctimes%200.8%7D%7B0.05%7D%20=%20%5C$1,600%0A"> <em>NghÄ©a lÃ : Má»—i khÃ¡ch hÃ ng mang vá» <strong>$1,600 tiá»n lÃ£i gá»™p</strong> trong suá»‘t vÃ²ng Ä‘á»i cá»§a há».</em></p>
</div>
</div>
</section>
</section>
<section id="the-golden-ratio-ltvcac" class="level4">
<h4 class="anchored" data-anchor-id="the-golden-ratio-ltvcac">3. The Golden Ratio: LTV:CAC</h4>
<p>Chá»‰ sá»‘ LTV hay CAC Ä‘á»©ng má»™t mÃ¬nh khÃ´ng cÃ³ nhiá»u Ã½ nghÄ©a. Sá»©c máº¡nh náº±m á»Ÿ tá»· lá»‡ cá»§a chÃºng.</p>
<section id="benchmark-tiÃªu-chuáº©n-the-31-rule" class="level5">
<h5 class="anchored" data-anchor-id="benchmark-tiÃªu-chuáº©n-the-31-rule">Benchmark tiÃªu chuáº©n (The 3:1 Rule)</h5>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Ctext%7BTarget%20Ratio%7D%20=%20%5Cfrac%7BLTV%7D%7BCAC%7D%20%5Cgeq%203%0A"></p>
<ul>
<li><strong>&lt; 1:1 (Tháº£m há»a):</strong> Báº¡n tá»‘n tiá»n mua khÃ¡ch nhiá»u hÆ¡n tiá»n khÃ¡ch tráº£ láº¡i. CÃ ng bÃ¡n cÃ ng lá»—.</li>
<li><strong>&lt; 3:1 (Nguy hiá»ƒm):</strong> Hiá»‡u quáº£ tháº¥p, dÃ²ng tiá»n yáº¿u, khÃ³ má»Ÿ rá»™ng quy mÃ´.</li>
<li><strong>= 3:1 (LÃ½ tÆ°á»Ÿng):</strong> Doanh nghiá»‡p khá»e máº¡nh.</li>
<li><strong>&gt; 5:1 (Cáº©n trá»ng):</strong> CÃ³ thá»ƒ báº¡n Ä‘ang Ä‘áº§u tÆ° quÃ¡ Ã­t vÃ o Marketing. Báº¡n Ä‘ang bá» lá»¡ cÆ¡ há»™i chiáº¿m lÄ©nh thá»‹ trÆ°á»ng (Under-spending).</li>
</ul>
</section>
<section id="cac-payback-period-thá»i-gian-hoÃ n-vá»‘n" class="level5">
<h5 class="anchored" data-anchor-id="cac-payback-period-thá»i-gian-hoÃ n-vá»‘n">CAC Payback Period (Thá»i gian hoÃ n vá»‘n)</h5>
<p>BÃªn cáº¡nh tá»· lá»‡ 3:1, thá»i gian thu há»“i vá»‘n quan trá»ng hÆ¡n Ä‘á»‘i vá»›i dÃ²ng tiá»n (Cash Flow).</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Ctext%7BMonths%20to%20Recover%20CAC%7D%20=%20%5Cfrac%7BCAC%7D%7BMRR%20%5Ctimes%20%5Ctext%7BGross%20Margin%20%5C%25%7D%7D%0A"></p>
<ul>
<li><strong>Target:</strong> <strong>&lt; 12 thÃ¡ng</strong>. (Tá»‘t nháº¥t lÃ  6-9 thÃ¡ng). Náº¿u quÃ¡ 12 thÃ¡ng, startup sáº½ gáº·p rá»§i ro lá»›n vá» vá»‘n lÆ°u Ä‘á»™ng.</li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>ğŸ“š TÃ i liá»‡u tham kháº£o uy tÃ­n (Reliable Sources)
</div>
</div>
<div class="callout-body-container callout-body">
<p>Ná»™i dung trÃªn Ä‘Æ°á»£c tá»•ng há»£p dá»±a trÃªn cÃ¡c nguyÃªn táº¯c Unit Economics tá»« cÃ¡c nguá»“n sau:</p>
<ol type="1">
<li><strong>SaaS Economics - The LTV:CAC Ratio (David Skok):</strong> BÃ i viáº¿t gá»‘c Ä‘á»‹nh nghÄ©a táº§m quan trá»ng cá»§a Gross Margin trong cÃ´ng thá»©c LTV.
<ul>
<li>ğŸ‘‰ <a href="https://www.forentrepreneurs.com/startup-killer/">Read: Startup Killer: the Cost of Customer Acquisition</a></li>
</ul></li>
<li><strong>LTV Calculation Guide (ProfitWell):</strong> PhÃ¢n tÃ­ch cÃ¡c sai láº§m khi tÃ­nh LTV (nhÆ° nháº§m láº«n giá»¯a Linear LTV vÃ  Geometric LTV).
<ul>
<li>ğŸ‘‰ <a href="https://www.paddle.com/resources/how-to-calculate-customer-lifetime-value">Read: How to Calculate LTV for SaaS</a></li>
</ul></li>
<li><strong>CAC Benchmarks (HubSpot):</strong> Cung cáº¥p cÃ¡i nhÃ¬n chi tiáº¿t vá» cÃ¡c thÃ nh pháº§n chi phÃ­ áº©n trong CAC.
<ul>
<li>ğŸ‘‰ <a href="https://blog.hubspot.com/service/customer-acquisition-cost">Read: The Ultimate Guide to Customer Acquisition Cost</a></li>
</ul></li>
</ol>
</div>
</div>
<hr>
</section>
</section>
</section>
<section id="net-revenue-retention-nrr-gross-revenue-retention-grr" class="level3">
<h3 class="anchored" data-anchor-id="net-revenue-retention-nrr-gross-revenue-retention-grr">Net Revenue Retention (NRR) &amp; Gross Revenue Retention (GRR)</h3>
<p>Náº¿u MRR lÃ  tá»‘c Ä‘á»™ hiá»‡n táº¡i, thÃ¬ <strong>Retention (Tá»· lá»‡ giá»¯ chÃ¢n)</strong> dá»± bÃ¡o tÆ°Æ¡ng lai. Trong mÃ´ hÃ¬nh Subscription, viá»‡c giá»¯ khÃ¡ch hÃ ng (Retention) quan trá»ng hÆ¡n viá»‡c kiáº¿m khÃ¡ch má»›i (Acquisition) gáº¥p nhiá»u láº§n.</p>
<p>CÃ³ hai lÄƒng kÃ­nh Ä‘á»ƒ nhÃ¬n vÃ o kháº£ nÄƒng giá»¯ chÃ¢n dÃ²ng tiá»n: <strong>GRR</strong> (PhÃ²ng thá»§) vÃ  <strong>NRR</strong> (Táº¥n cÃ´ng).</p>
<section id="gross-revenue-retention-grr---chá»‰-sá»‘-phÃ²ng-thá»§" class="level4">
<h4 class="anchored" data-anchor-id="gross-revenue-retention-grr---chá»‰-sá»‘-phÃ²ng-thá»§">1. Gross Revenue Retention (GRR) - Chá»‰ sá»‘ â€œPhÃ²ng thá»§â€</h4>
<p><strong>Äá»‹nh nghÄ©a:</strong> GRR Ä‘o lÆ°á»ng pháº§n doanh thu báº¡n giá»¯ láº¡i Ä‘Æ°á»£c tá»« táº­p khÃ¡ch hÃ ng cÅ© trong má»™t ká»³, <strong>khÃ´ng bao gá»“m</strong> doanh thu bÃ¡n thÃªm (Expansion/Upsell).</p>
<p><strong>Äáº·c Ä‘iá»ƒm nháº­n dáº¡ng:</strong></p>
<ul>
<li><p>GRR <strong>luÃ´n luÃ´n <img src="https://latex.codecogs.com/png.latex?%5Cle"> 100%</strong>.</p></li>
<li><p>GRR cho biáº¿t thá»±c lá»±c cá»‘t lÃµi cá»§a sáº£n pháº©m: Liá»‡u sáº£n pháº©m cÃ³ Ä‘á»§ tá»‘t Ä‘á»ƒ khÃ¡ch khÃ´ng rá»i Ä‘i khÃ´ng?</p></li>
</ul>
<section id="cÃ´ng-thá»©c-tÃ­nh-the-formula-3" class="level5">
<h5 class="anchored" data-anchor-id="cÃ´ng-thá»©c-tÃ­nh-the-formula-3">CÃ´ng thá»©c tÃ­nh (The Formula)</h5>
<p><img src="https://latex.codecogs.com/png.latex?%0AGRR%20=%20%5Cfrac%7B%5Ctext%7BMRR%20Start%7D%20-%20(%5Ctext%7BChurn%7D%20+%20%5Ctext%7BContraction%7D)%7D%7B%5Ctext%7BMRR%20Start%7D%7D%20%5Ctimes%20100%5C%25%0A"></p>
<p><em>Trong Ä‘Ã³:</em></p>
<ul>
<li><p><strong>Churn:</strong> Doanh thu máº¥t Ä‘i do khÃ¡ch há»§y dá»‹ch vá»¥.</p></li>
<li><p><strong>Contraction:</strong> Doanh thu máº¥t Ä‘i do khÃ¡ch háº¡ cáº¥p gÃ³i.</p></li>
<li><p><strong>MRR Start:</strong> Doanh thu Ä‘áº§u ká»³.</p></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>ğŸ“‰ Táº¡i sao GRR quan trá»ng?
</div>
</div>
<div class="callout-body-container callout-body">
<p>Náº¿u GRR tháº¥p (vÃ­ dá»¥ &lt; 80%), nghÄ©a lÃ  â€œcÃ¡i xÃ´ bá»‹ thá»§ng Ä‘Ã¡yâ€ (Leaky Bucket). DÃ¹ báº¡n cÃ³ Sales giá»i Ä‘áº¿n Ä‘Ã¢u (NRR cao), nhÆ°ng náº¿u GRR tháº¥p, báº¡n váº«n Ä‘ang máº¥t mÃ¡u tá»« cá»‘t lÃµi. KhÃ´ng thá»ƒ Upsell cho má»™t khÃ¡ch hÃ ng Ä‘ang muá»‘n rá»i Ä‘i.</p>
</div>
</div>
</section>
</section>
<section id="net-revenue-retention-nrr---chá»‰-sá»‘-táº¥n-cÃ´ng" class="level4">
<h4 class="anchored" data-anchor-id="net-revenue-retention-nrr---chá»‰-sá»‘-táº¥n-cÃ´ng">2. Net Revenue Retention (NRR) - Chá»‰ sá»‘ â€œTáº¥n cÃ´ngâ€</h4>
<p><strong>Äá»‹nh nghÄ©a:</strong> NRR Ä‘o lÆ°á»ng tá»•ng doanh thu giá»¯ láº¡i Ä‘Æ°á»£c tá»« khÃ¡ch cÅ©, <strong>bao gá»“m cáº£</strong> doanh thu má»Ÿ rá»™ng (Expansion) tá»« Upsell/Cross-sell.</p>
<p><strong>Äáº·c Ä‘iá»ƒm nháº­n dáº¡ng:</strong></p>
<ul>
<li><p>NRR cÃ³ thá»ƒ <strong>&gt; 100%</strong>.</p></li>
<li><p>Khi NRR &gt; 100%, doanh nghiá»‡p Ä‘áº¡t tráº¡ng thÃ¡i <strong>Negative Churn</strong> (Churn Ã¢m). Tá»©c lÃ  ngay cáº£ khi khÃ´ng cÃ³ khÃ¡ch má»›i, cÃ´ng ty váº«n tÄƒng trÆ°á»Ÿng doanh thu.</p></li>
</ul>
<section id="cÃ´ng-thá»©c-tÃ­nh-the-formula-4" class="level5">
<h5 class="anchored" data-anchor-id="cÃ´ng-thá»©c-tÃ­nh-the-formula-4">CÃ´ng thá»©c tÃ­nh (The Formula)</h5>
<p><img src="https://latex.codecogs.com/png.latex?%0ANRR%20=%20%5Cfrac%7B(%5Ctext%7BMRR%20Start%7D%20+%20%5Ctext%7BExpansion%7D)%20-%20(%5Ctext%7BChurn%7D%20+%20%5Ctext%7BContraction%7D)%7D%7B%5Ctext%7BMRR%20Start%7D%7D%20%5Ctimes%20100%5C%25%0A"></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>ğŸ¯ Benchmark: What is Good?
</div>
</div>
<div class="callout-body-container callout-body">
<p>Theo kháº£o sÃ¡t tá»« <strong>Lennyâ€™s Newsletter</strong> vÃ  <strong>ChartMogul</strong>:</p>
<ul>
<li><strong>GRR:</strong>
<ul>
<li><strong>Good:</strong> 85% - 90%.</li>
<li><strong>Great (Enterprise):</strong> &gt; 90%.</li>
</ul></li>
<li><strong>NRR:</strong>
<ul>
<li><strong>SMB SaaS:</strong> ~100% (KhÃ³ upsell vÃ¬ budget khÃ¡ch nhá»).</li>
<li><strong>Mid-Market:</strong> 110% - 120%.</li>
<li><strong>Enterprise (Snowflake, Datadog):</strong> &gt; 120% (Tháº­m chÃ­ 150%). ÄÃ¢y lÃ  lÃ½ do Ä‘á»‹nh giÃ¡ cá»§a há» cao ngáº¥t ngÆ°á»Ÿng.</li>
</ul></li>
</ul>
</div>
</div>
</section>
</section>
<section id="phÃ¢n-tÃ­ch-so-sÃ¡nh-nrr-vs.-grr-the-gap-analysis" class="level4">
<h4 class="anchored" data-anchor-id="phÃ¢n-tÃ­ch-so-sÃ¡nh-nrr-vs.-grr-the-gap-analysis">3. PhÃ¢n tÃ­ch so sÃ¡nh: NRR vs.&nbsp;GRR (The Gap Analysis)</h4>
<p>LÃ  má»™t Data Analyst, báº¡n khÃ´ng Ä‘Æ°á»£c nhÃ¬n hai chá»‰ sá»‘ nÃ y Ä‘á»™c láº­p. HÃ£y nhÃ¬n vÃ o khoáº£ng cÃ¡ch (Gap) giá»¯a chÃºng.</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Ctext%7BExpansion%20Impact%7D%20=%20NRR%20-%20GRR%0A"></p>
<ul>
<li><strong>Ká»‹ch báº£n 1: NRR cao (120%) nhÆ°ng GRR tháº¥p (70%).</strong>
<ul>
<li><em>Insight:</em> Báº¡n Ä‘ang dÃ¹ng ká»¹ nÄƒng Upsell tuyá»‡t vá»i Ä‘á»ƒ che giáº¥u má»™t sáº£n pháº©m tá»“i (khÃ¡ch bá» Ä‘i nhiá»u nhÆ°ng khÃ¡ch á»Ÿ láº¡i gÃ¡nh team). ÄÃ¢y lÃ  tÄƒng trÆ°á»Ÿng khÃ´ng bá»n vá»¯ng.</li>
</ul></li>
<li><strong>Ká»‹ch báº£n 2: NRR tháº¥p (90%) vÃ  GRR cao (90%).</strong>
<ul>
<li><em>Insight:</em> Sáº£n pháº©m cá»±c tá»‘t, khÃ¡ch trung thÃ nh, nhÆ°ng báº¡n dá»Ÿ tá»‡ trong viá»‡c kiáº¿m thÃªm tiá»n tá»« há» (Pricing strategy kÃ©m hoáº·c thiáº¿u tÃ­nh nÄƒng Upsell).</li>
</ul></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>ğŸ“š TÃ i liá»‡u tham kháº£o uy tÃ­n (Reliable Sources)
</div>
</div>
<div class="callout-body-container callout-body">
<p>Äá»ƒ hiá»ƒu sÃ¢u vá» chiáº¿n lÆ°á»£c tá»‘i Æ°u Retention, hÃ£y tham kháº£o:</p>
<ol type="1">
<li><strong>Retention Benchmarks (Lennyâ€™s Newsletter):</strong> Tá»•ng há»£p benchmark chi tiáº¿t nháº¥t vá» NRR/GRR theo tá»«ng phÃ¢n khÃºc khÃ¡ch hÃ ng (B2C, B2B SMB, Enterprise).
<ul>
<li>ğŸ‘‰ <a href="https://www.lennysnewsletter.com/p/what-is-good-retention-issue-29">Read: What is a good retention rate?</a></li>
</ul></li>
<li><strong>SaaS Retention Metrics Guide (ChartMogul):</strong> HÆ°á»›ng dáº«n ká»¹ thuáº­t vá» cÃ¡ch tÃ­nh toÃ¡n vÃ  sá»± khÃ¡c biá»‡t giá»¯a User Retention vÃ  Revenue Retention.
<ul>
<li>ğŸ‘‰ <a href="https://chartmogul.com/resources/guide/saas-retention-metrics/">Read: The Ultimate Guide to SaaS Retention Metrics</a></li>
</ul></li>
<li><strong>Negative Churn (David Skok):</strong> Giáº£i thÃ­ch táº¡i sao Negative Churn (NRR &gt; 100%) lÃ  chÃ©n thÃ¡nh cá»§a mÃ´ hÃ¬nh SaaS.
<ul>
<li>ğŸ‘‰ <a href="https://www.forentrepreneurs.com/why-churn-is-critical-in-saas/">Read: Why Churn is Critical to Success in SaaS</a></li>
</ul></li>
</ol>
</div>
</div>
<hr>
</section>
</section>
<section id="rule-of-40" class="level3">
<h3 class="anchored" data-anchor-id="rule-of-40">Rule of 40</h3>
<p>Náº¿u cÃ¡c chá»‰ sá»‘ trÃªn Ä‘i sÃ¢u vÃ o chi tiáº¿t, thÃ¬ <strong>Rule of 40</strong> lÃ  thÆ°á»›c Ä‘o tá»•ng quÃ¡t (High-level Health Check) Ä‘Æ°á»£c cÃ¡c nhÃ  Ä‘áº§u tÆ° (VC) sá»­ dá»¥ng Ä‘á»ƒ Ä‘Ã¡nh giÃ¡ nhanh sá»©c khá»e cá»§a má»™t cÃ´ng ty SaaS trÆ°á»Ÿng thÃ nh.</p>
<p>NÃ³ tráº£ lá»i cÃ¢u há»i cá»‘t tá»­: <em>â€œCÃ´ng ty nÃ y Ä‘ang Ä‘á»‘t tiá»n Ä‘á»ƒ tÄƒng trÆ°á»Ÿng (Growth) hay Ä‘ang tá»‘i Æ°u lá»£i nhuáº­n (Profitability)? VÃ  sá»± Ä‘Ã¡nh Ä‘á»•i Ä‘Ã³ cÃ³ xá»©ng Ä‘Ã¡ng khÃ´ng?â€</em></p>
<section id="nguyÃªn-lÃ½-hoáº¡t-Ä‘á»™ng-the-principle" class="level4">
<h4 class="anchored" data-anchor-id="nguyÃªn-lÃ½-hoáº¡t-Ä‘á»™ng-the-principle">1. NguyÃªn lÃ½ hoáº¡t Ä‘á»™ng (The Principle)</h4>
<p>Quy táº¯c nÃ y phÃ¡t biá»ƒu ráº±ng: Tá»•ng cá»§a <strong>Tá»‘c Ä‘á»™ tÄƒng trÆ°á»Ÿng doanh thu</strong> vÃ  <strong>BiÃªn lá»£i nhuáº­n</strong> cá»§a má»™t cÃ´ng ty SaaS khá»e máº¡nh pháº£i lá»›n hÆ¡n hoáº·c báº±ng <strong>40%</strong>.</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Ctext%7BGrowth%20Rate%20%5C%25%7D%20+%20%5Ctext%7BProfit%20Margin%20%5C%25%7D%20%5Cge%2040%5C%25%0A"></p>
<p>NguyÃªn lÃ½ nÃ y cho phÃ©p sá»± linh hoáº¡t tuyá»‡t vá»i:</p>
<ul>
<li><p>Náº¿u báº¡n tÄƒng trÆ°á»Ÿng cá»±c nhanh (100%), báº¡n cÃ³ thá»ƒ cháº¥p nháº­n lá»— náº·ng (-60%). (Tá»•ng = 40%).</p></li>
<li><p>Náº¿u báº¡n tÄƒng trÆ°á»Ÿng cháº­m (10%), báº¡n buá»™c pháº£i cÃ³ lÃ£i cao (30%). (Tá»•ng = 40%).</p></li>
</ul>
</section>
<section id="cÃ´ng-thá»©c-tÃ­nh-sáº¯c-thÃ¡i-dá»¯-liá»‡u-nuances" class="level4">
<h4 class="anchored" data-anchor-id="cÃ´ng-thá»©c-tÃ­nh-sáº¯c-thÃ¡i-dá»¯-liá»‡u-nuances">2. CÃ´ng thá»©c tÃ­nh &amp; Sáº¯c thÃ¡i dá»¯ liá»‡u (Nuances)</h4>
<p>LÃ  má»™t Data Analyst, báº¡n cáº§n Ä‘á»‹nh nghÄ©a rÃµ â€œGrowthâ€ lÃ  gÃ¬ vÃ  â€œProfitâ€ lÃ  gÃ¬ trong cÃ´ng thá»©c nÃ y.</p>
<section id="cÃ´ng-thá»©c-chuáº©n-the-standard-formula" class="level5">
<h5 class="anchored" data-anchor-id="cÃ´ng-thá»©c-chuáº©n-the-standard-formula">CÃ´ng thá»©c chuáº©n (The Standard Formula)</h5>
<p><img src="https://latex.codecogs.com/png.latex?%0AR40%20=%20%5Ctext%7BYoY%20ARR%20Growth%7D%20+%20%5Ctext%7BEBITDA%20Margin%7D%0A"></p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>ğŸ’¡ Data Analyst Note: EBITDA vs.&nbsp;FCF
</div>
</div>
<div class="callout-body-container callout-body">
<p>Trong khi cÃ¡c Finance Manager thÆ°á»ng dÃ¹ng <strong>EBITDA</strong> (Lá»£i nhuáº­n trÆ°á»›c thuáº¿, lÃ£i vay, kháº¥u hao) Ä‘á»ƒ tÃ­nh Profit, thÃ¬ cÃ¡c nhÃ  Ä‘áº§u tÆ° cÃ´ng nghá»‡ khÃ³ tÃ­nh (Tech Investors) láº¡i thÃ­ch dÃ¹ng <strong>Free Cash Flow (FCF) Margin</strong>.</p>
<p>Táº¡i sao? VÃ¬ dÃ²ng tiá»n (FCF) lÃ  sá»± tháº­t, cÃ²n EBITDA cÃ³ thá»ƒ bá»‹ â€œxÃ o náº¥uâ€ bá»Ÿi cÃ¡c thá»§ thuáº­t káº¿ toÃ¡n. Náº¿u sáº¿p báº¡n yÃªu cáº§u sá»± trung thá»±c tuyá»‡t Ä‘á»‘i, hÃ£y dÃ¹ng FCF.</p>
</div>
</div>
</section>
</section>
<section id="phÃ¢n-tÃ­ch-cÃ¡c-ká»‹ch-báº£n-scenario-analysis" class="level4">
<h4 class="anchored" data-anchor-id="phÃ¢n-tÃ­ch-cÃ¡c-ká»‹ch-báº£n-scenario-analysis">3. PhÃ¢n tÃ­ch cÃ¡c ká»‹ch báº£n (Scenario Analysis)</h4>
<p>KhÃ´ng pháº£i cá»© cá»™ng láº¡i lÃ  xong. Báº¡n cáº§n Ä‘áº·t cÃ´ng ty vÃ o Ä‘Ãºng ngá»¯ cáº£nh cá»§a nÃ³ trÃªn biá»ƒu Ä‘á»“:</p>
<ol type="1">
<li><strong>The Rocket Ship (TÄƒng trÆ°á»Ÿng nÃ³ng):</strong>
<ul>
<li>Growth: <strong>80%</strong>. Profit: <strong>-30%</strong>. <img src="https://latex.codecogs.com/png.latex?%5CRightarrow"> Total: <strong>50%</strong> (&gt;40).</li>
<li><em>ÄÃ¡nh giÃ¡:</em> Tá»‘t. CÃ¡c nhÃ  Ä‘áº§u tÆ° sáºµn sÃ ng cháº¥p nháº­n lá»— Ä‘á»ƒ chiáº¿m thá»‹ pháº§n (Land Grab).</li>
</ul></li>
<li><strong>The Cash Cow (Con bÃ² sá»¯a):</strong>
<ul>
<li>Growth: <strong>10%</strong>. Profit: <strong>35%</strong>. <img src="https://latex.codecogs.com/png.latex?%5CRightarrow"> Total: <strong>45%</strong> (&gt;40).</li>
<li><em>ÄÃ¡nh giÃ¡:</em> Tá»‘t. CÃ´ng ty Ä‘Ã£ trÆ°á»Ÿng thÃ nh, táº­p trung vÃ o tá»‘i Æ°u hÃ³a lá»£i nhuáº­n vÃ  cá»• tá»©c.</li>
</ul></li>
<li><strong>The Zombie (XÃ¡c sá»‘ng):</strong>
<ul>
<li>Growth: <strong>15%</strong>. Profit: <strong>5%</strong>. <img src="https://latex.codecogs.com/png.latex?%5CRightarrow"> Total: <strong>20%</strong> (&lt;40).</li>
<li><em>ÄÃ¡nh giÃ¡:</em> Nguy hiá»ƒm. TÄƒng trÆ°á»Ÿng khÃ´ng Ä‘á»§ nhanh Ä‘á»ƒ gá»i vá»‘n, nhÆ°ng lá»£i nhuáº­n khÃ´ng Ä‘á»§ nhiá»u Ä‘á»ƒ tá»± nuÃ´i sá»‘ng. ÄÃ¢y lÃ  vÃ¹ng cháº¿t (Dead Zone).</li>
</ul></li>
</ol>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Warning</span>âš ï¸ Khi nÃ o KHÃ”NG Ã¡p dá»¥ng Rule of 40?
</div>
</div>
<div class="callout-body-container callout-body">
<p>Äá»«ng Ã¡p dá»¥ng quy táº¯c nÃ y cho <strong>Early-stage Startups</strong> (dÆ°á»›i $1M ARR). Giai Ä‘oáº¡n Ä‘áº§u, cÃ¡c startup thÆ°á»ng cÃ³ Margin cá»±c tháº¥p (-100% Ä‘áº¿n -200%) vÃ  Growth cá»±c cao (300%). Cá»™ng hai sá»‘ nÃ y láº¡i ra káº¿t quáº£ ráº¥t nhiá»…u (Volatile). <strong>NgÆ°á»¡ng Ã¡p dá»¥ng:</strong> ThÆ°á»ng khi cÃ´ng ty Ä‘áº¡t &gt;$1M ARR (hoáº·c chuáº©n hÆ¡n lÃ  &gt;$5M ARR).</p>
</div>
</div>
</section>
<section id="biáº¿n-thá»ƒ-má»›i-rule-of-x-the-new-standard" class="level4">
<h4 class="anchored" data-anchor-id="biáº¿n-thá»ƒ-má»›i-rule-of-x-the-new-standard">4. Biáº¿n thá»ƒ má»›i: Rule of X (The New Standard)</h4>
<p>Gáº§n Ä‘Ã¢y (2023-2024), trong bá»‘i cáº£nh thá»‹ trÆ°á»ng vá»‘n khÃ³ khÄƒn, cÃ¡c quá»¹ Ä‘áº§u tÆ° nhÆ° <strong>Bessemer Venture Partners (BVP)</strong> cho ráº±ng Rule of 40 Ä‘Ã£ lá»—i thá»i. Há» Ä‘á» xuáº¥t <strong>Rule of X</strong>, trong Ä‘Ã³ Ä‘á»‹nh giÃ¡ Growth cao hÆ¡n Profit.</p>
<p>CÃ´ng thá»©c (tham kháº£o): <img src="https://latex.codecogs.com/png.latex?%0A%5Ctext%7BRule%20of%20X%7D%20=%20(Multiplier%20%5Ctimes%20%5Ctext%7BGrowth%7D)%20+%20%5Ctext%7BProfit%7D%0A"> <em>ThÆ°á»ng Multiplier náº±m trong khoáº£ng 2x - 3x, nháº¥n máº¡nh ráº±ng tÄƒng trÆ°á»Ÿng doanh thu váº«n lÃ  vua trong SaaS.</em></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>ğŸ“š TÃ i liá»‡u tham kháº£o uy tÃ­n (Reliable Sources)
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><strong>The Rule of 40 for a Healthy SaaS Company (Brad Feld):</strong> BÃ i viáº¿t gá»‘c nÄƒm 2015 tá»« ngÆ°á»i Ä‘Ã£ â€œkhai sinhâ€ ra khÃ¡i niá»‡m nÃ y.
<ul>
<li>ğŸ‘‰ <a href="https://feld.com/archives/2015/02/rule-40-healthy-saas-company.html">Read: The Rule of 40% For a Healthy SaaS Company</a></li>
</ul></li>
<li><strong>SaaS Rule of 40 Benchmark (Bain &amp; Company):</strong> BÃ¡o cÃ¡o chi tiáº¿t vá» cÃ¡ch cÃ¡c cÃ´ng ty cÃ´ng nghá»‡ Ã¡p dá»¥ng vÃ  duy trÃ¬ Rule of 40 qua cÃ¡c nÄƒm.
<ul>
<li>ğŸ‘‰ <a href="https://www.bain.com/insights/hacking-saas-rule-of-40/">Read: Hacking the SaaS Rule of 40</a></li>
</ul></li>
<li><strong>Introducing the Rule of X (Bessemer Venture Partners):</strong> Cáº­p nháº­t tÆ° duy má»›i nháº¥t vá» Ä‘á»‹nh giÃ¡ SaaS 2024.
<ul>
<li>ğŸ‘‰ <a href="https://www.bvp.com/atlas/state-of-the-cloud-2023/#rule-of-x">Read: State of the Cloud 2024 - Rule of X</a></li>
</ul></li>
</ol>
</div>
</div>
</section>
</section>
</section>
<section id="benchmark" class="level2">
<h2 class="anchored" data-anchor-id="benchmark">Benchmark</h2>
<p>DÆ°á»›i Ä‘Ã¢y lÃ  báº£ng Ä‘á»‘i chiáº¿u trá»±c diá»‡n giá»¯a 3 thá»‹ trÆ°á»ng dá»±a trÃªn cÃ¡c metric Ä‘Ã£ phÃ¢n tÃ­ch á»Ÿ trÃªn:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Metric</th>
<th style="text-align: left;">US</th>
<th style="text-align: left;">China</th>
<th style="text-align: left;">Vietnam</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>1. ARPU (Monthly)</strong><br><em>(Quy mÃ´ MRR)</em></td>
<td style="text-align: left;"><strong>Cao ($500 - $5,000+)</strong><br>Sáºµn sÃ ng tráº£ phÃ­ cao cho pháº§n má»m thuáº§n tÃºy.</td>
<td style="text-align: left;"><strong>Tháº¥p (~20% US)</strong><br>VÄƒn hÃ³a thÃ­ch â€œmua Ä‘á»©tâ€ (One-off) hoáº·c miá»…n phÃ­.</td>
<td style="text-align: left;"><strong>Ráº¥t Tháº¥p ($10 - $50)</strong><br>Nháº¡y cáº£m vá» giÃ¡ (200k - 1tr VND/thÃ¡ng).</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>2. Gross Margin</strong><br><em>(Cháº¥t lÆ°á»£ng doanh thu)</em></td>
<td style="text-align: left;"><strong>~80% (Pure SaaS)</strong><br>Doanh thu tÄƒng, chi phÃ­ khÃ´ng tÄƒng.</td>
<td style="text-align: left;"><strong>50% - 60%</strong><br>Náº·ng chi phÃ­ Customization &amp; Service Ä‘i kÃ¨m.</td>
<td style="text-align: left;"><strong>&lt; 60%</strong><br>Náº·ng chi phÃ­ váº­n hÃ nh Sales/Support â€œcháº¡y báº±ng cÆ¡mâ€.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>3. Net Retention (NRR)</strong><br><em>(Kháº£ nÄƒng Upsell)</em></td>
<td style="text-align: left;"><strong>&gt; 110%</strong><br>TÄƒng trÆ°á»Ÿng dá»±a trÃªn Expansion (Upsell).</td>
<td style="text-align: left;"><strong>&lt; 90%</strong><br>KhÃ³ Upsell, doanh thu tá»« khÃ¡ch cÅ© giáº£m dáº§n.</td>
<td style="text-align: left;"><strong>~100%</strong><br>NgÃ¢n sÃ¡ch IT cá»§a SME Viá»‡t Nam thÆ°á»ng cá»‘ Ä‘á»‹nh, khÃ³ má»Ÿ rá»™ng.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>4. SME Churn Rate</strong><br><em>(Äá»™ á»•n Ä‘á»‹nh)</em></td>
<td style="text-align: left;"><strong>20% - 30% / nÄƒm</strong><br>KhÃ¡ch hÃ ng trung thÃ nh &amp; á»•n Ä‘á»‹nh.</td>
<td style="text-align: left;"><strong>40% - 60% / nÄƒm</strong><br>Cáº¡nh tranh khá»‘c liá»‡t, hay thay Ä‘á»•i vendor.</td>
<td style="text-align: left;"><strong>Ráº¥t Cao (&gt;40%)</strong><br>Tá»· lá»‡ giáº£i thá»ƒ cá»§a há»™ kinh doanh/SME cao.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>5. CAC Payback</strong><br><em>(Tá»‘c Ä‘á»™ hoÃ n vá»‘n)</em></td>
<td style="text-align: left;"><strong>12 - 18 thÃ¡ng</strong><br>Chi phÃ­ Marketing &amp; NhÃ¢n sá»± ráº¥t Ä‘áº¯t Ä‘á».</td>
<td style="text-align: left;"><strong>18 - 24 thÃ¡ng</strong><br>Hiá»‡u quáº£ tháº¥p do vÃ²ng Ä‘á»i khÃ¡ch ngáº¯n.</td>
<td style="text-align: left;"><strong>6 - 12 thÃ¡ng</strong><br>Lá»£i tháº¿ nhÃ¢n sá»± Sales/Telesales giÃ¡ ráº» bÃ¹ láº¡i.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>6. Rule of 40</strong><br><em>(Sá»©c khá»e tá»•ng quÃ¡t)</em></td>
<td style="text-align: left;"><strong>TiÃªu chuáº©n vÃ ng</strong><br>Nhiá»u cÃ´ng ty Ä‘áº¡t Ä‘Æ°á»£c sá»± cÃ¢n báº±ng.</td>
<td style="text-align: left;"><strong>Hiáº¿m gáº·p</strong><br>ThÆ°á»ng cháº¥p nháº­n lá»— sÃ¢u Ä‘á»ƒ giÃ nh thá»‹ pháº§n (Market Share).</td>
<td style="text-align: left;"><strong>KhÃ³ Ä‘áº¡t</strong><br>BiÃªn lá»£i nhuáº­n má»ng khiáº¿n tá»•ng Ä‘iá»ƒm thÆ°á»ng &lt; 40%.</td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>ğŸ“š Nguá»“n dá»¯ liá»‡u tham kháº£o (Data Sources)
</div>
</div>
<div class="callout-body-container callout-body">
<p>Sá»‘ liá»‡u benchmark trÃªn Ä‘Æ°á»£c tá»•ng há»£p tá»« cÃ¡c bÃ¡o cÃ¡o thá»‹ trÆ°á»ng uy tÃ­n theo tá»«ng khu vá»±c:</p>
<ol type="1">
<li><strong>Global/US Data:</strong>
<ul>
<li><strong>KeyBanc SaaS Survey:</strong> BÃ¡o cÃ¡o chi tiáº¿t nháº¥t hÃ ng nÄƒm vá» private SaaS companies.</li>
<li>ğŸ‘‰ <a href="https://www.key.com/businesses-institutions/industry-expertise/technology-group/saas-survey.html">Link: KeyBanc Capital Markets Technology Group</a></li>
</ul></li>
<li><strong>China Data:</strong>
<ul>
<li><strong>McKinsey &amp; Bain:</strong> CÃ¡c phÃ¢n tÃ­ch chuyÃªn sÃ¢u vá» sá»± khÃ¡c biá»‡t cáº¥u trÃºc lá»£i nhuáº­n cá»§a SaaS Trung Quá»‘c.</li>
<li>ğŸ‘‰ <a href="https://www.mckinsey.com/industries/technology-media-and-telecommunications/our-insights/saas-in-china-the-market-is-growing-but-profits-remain-elusive">Link: SaaS in China - The Market is Growing but Profits Remain Elusive</a></li>
</ul></li>
<li><strong>Vietnam Context:</strong>
<ul>
<li>Dá»¯ liá»‡u Ä‘Æ°á»£c tá»•ng há»£p tá»« cÃ¡c bÃ¡o cÃ¡o ngÃ nh cá»§a <strong>Mordor Intelligence</strong> (Vietnam Cloud Service Market) vÃ  quan sÃ¡t thá»±c táº¿ tá»« cÃ¡c mÃ´ hÃ¬nh <strong>Base.vn, Haravan</strong>.</li>
</ul></li>
</ol>
</div>
</div>


</section>

 ]]></description>
  <category>SaaS</category>
  <category>Business Model</category>
  <category>Strategy</category>
  <category>Startup</category>
  <guid>https://pakota159.github.io/posts/saas-metrics-2/</guid>
  <pubDate>Sat, 24 Jan 2026 17:00:00 GMT</pubDate>
  <media:content url="https://pakota159.github.io/img/saas-metrics/saas-framework.png" medium="image" type="image/png" height="79" width="144"/>
</item>
<item>
  <title>SaaS Metrics that actually make sense - Part 4</title>
  <dc:creator>Cuong Pham</dc:creator>
  <link>https://pakota159.github.io/posts/saas-metrics-4/</link>
  <description><![CDATA[ 




<blockquote class="blockquote">
<p>Tá»« nhiá»u nguá»“n tÃ i liá»‡u tham kháº£o, cÃ¹ng kinh nghiá»‡m trong nhá»¯ng nÄƒm lÃ m phÃ¢n tÃ­ch dá»¯ liá»‡u, tÃ´i tá»•ng há»£p thÃ nh 1 frameword tá»•ng quan cÃ³ thá»ƒ Ã¡p dá»¥ng cho cÃ¡c mÃ´ hÃ¬nh SaaS</p>
</blockquote>
<iframe id="saas-metrics-frame" src="saas_metrics_chart.html" width="100%" scrolling="no" style="border:none; overflow:hidden;"></iframe>

<script>
  window.addEventListener("message", function(e) {
    // Check if the message contains our height data
    if (e.data && e.data.frameHeight) {
      const iframe = document.getElementById("saas-metrics-frame");
      if (iframe) {
        // Apply the new height
        iframe.style.height = e.data.frameHeight + "px";
      }
    }
  });
</script>
<section id="layer-3-product-analysis-behavioral-metrics" class="level2">
<h2 class="anchored" data-anchor-id="layer-3-product-analysis-behavioral-metrics">Layer 3: Product Analysis (Behavioral Metrics)</h2>
<p>Náº¿u Layer 1 &amp; 2 cho báº¡n biáº¿t â€œSá»©c khá»e tÃ i chÃ­nhâ€ (Financial Health), thÃ¬ <strong>Layer 3: Product Analysis</strong> giÃºp báº¡n tráº£ lá»i cÃ¢u há»i <em>â€œTáº¡i sao?â€</em>. Táº¡i sao khÃ¡ch hÃ ng rá»i bá»? Táº¡i sao há» khÃ´ng nÃ¢ng cáº¥p gÃ³i?</p>
<p>Product Analysis lÃ  cáº§u ná»‘i giá»¯a hÃ nh vi ngÆ°á»i dÃ¹ng (User Behavior) vÃ  káº¿t quáº£ kinh doanh (Business Outcomes).</p>
<section id="product-led-growth-plg-hay-sales-led-cÅ©ng-cáº§n" class="level3">
<h3 class="anchored" data-anchor-id="product-led-growth-plg-hay-sales-led-cÅ©ng-cáº§n">1. Product-Led Growth (PLG) hay Sales-Led cÅ©ng cáº§n?</h3>
<p>Nhiá»u ngÆ°á»i láº§m tÆ°á»Ÿng Product Analysis chá»‰ dÃ nh cho mÃ´ hÃ¬nh PLG (Product-Led Growth). ÄÃ¢y lÃ  sai láº§m lá»›n.</p>
<ul>
<li><strong>Vá»›i PLG (Zoom, Slack):</strong> Product Analysis lÃ  sinh máº¡ng. Sáº£n pháº©m tá»± bÃ¡n nÃ³, nÃªn báº¡n pháº£i tá»‘i Æ°u tá»«ng click, tá»«ng giÃ¢y loading.</li>
<li><strong>Vá»›i SLG (Salesforce):</strong> Product Analysis giÃºp Customer Success team biáº¿t khÃ¡ch hÃ ng nÃ o Ä‘ang â€œhealthyâ€ Ä‘á»ƒ upsell, vÃ  khÃ¡ch nÃ o Ä‘ang â€œháº¥p há»‘iâ€ (khÃ´ng log in 30 ngÃ y) Ä‘á»ƒ cá»©u vÃ£n.</li>
</ul>
</section>
<section id="cÃ¡c-framework-phá»•-biáº¿n-nháº¥t" class="level3">
<h3 class="anchored" data-anchor-id="cÃ¡c-framework-phá»•-biáº¿n-nháº¥t">2. CÃ¡c Framework phá»• biáº¿n nháº¥t</h3>
<p>Äá»«ng phÃ¡t minh láº¡i cÃ¡i bÃ¡nh xe. CÃ¡c gÃ£ khá»•ng lá»“ cÃ´ng nghá»‡ Ä‘Ã£ Ä‘Ãºc káº¿t ra nhá»¯ng khung tÆ° duy chuáº©n má»±c:</p>
<section id="a.-heart-framework-google" class="level4">
<h4 class="anchored" data-anchor-id="a.-heart-framework-google">A. HEART Framework (Google) ğŸ§¡</h4>
<p><em>DÃ nh cho: UX/UI Designer &amp; Product Manager táº­p trung vÃ o tráº£i nghiá»‡m.</em></p>
<ul>
<li><strong>H - Happiness:</strong> KhÃ¡ch hÃ ng cÃ³ hÃ i lÃ²ng khÃ´ng? (Äo báº±ng NPS, CSAT).</li>
<li><strong>E - Engagement:</strong> Má»©c Ä‘á»™ tÆ°Æ¡ng tÃ¡c (Sá»‘ láº§n log in, thá»i gian session).</li>
<li><strong>A - Adoption:</strong> Tá»· lá»‡ cháº¥p nháº­n tÃ­nh nÄƒng má»›i.</li>
<li><strong>R - Retention:</strong> Tá»· lá»‡ quay láº¡i sau láº§n dÃ¹ng Ä‘áº§u tiÃªn.</li>
<li><strong>T - Task Success:</strong> Hiá»‡u quáº£ hoÃ n thÃ nh cÃ´ng viá»‡c (Thá»i gian Ä‘á»ƒ xuáº¥t bÃ¡o cÃ¡o, tá»· lá»‡ lá»—i).</li>
</ul>
</section>
<section id="b.-aarrr-pirate-metrics-dave-mcclure" class="level4">
<h4 class="anchored" data-anchor-id="b.-aarrr-pirate-metrics-dave-mcclure">B. AARRR â€œPirate Metricsâ€ (Dave McClure) ğŸ´â€â˜ ï¸</h4>
<p><em>DÃ nh cho: Growth Hacker &amp; Marketer.</em></p>
<ul>
<li><strong>Acquisition:</strong> NgÆ°á»i dÃ¹ng Ä‘áº¿n tá»« Ä‘Ã¢u?</li>
<li><strong>Activation:</strong> Há» cÃ³ tráº£i nghiá»‡m â€œAha momentâ€ Ä‘áº§u tiÃªn khÃ´ng?</li>
<li><strong>Retention:</strong> Há» cÃ³ quay láº¡i khÃ´ng?</li>
<li><strong>Revenue:</strong> Há» cÃ³ tráº£ tiá»n khÃ´ng?</li>
<li><strong>Referral:</strong> Há» cÃ³ giá»›i thiá»‡u báº¡n bÃ¨ khÃ´ng?</li>
</ul>
</section>
<section id="c.-the-north-star-framework-amplitude" class="level4">
<h4 class="anchored" data-anchor-id="c.-the-north-star-framework-amplitude">C. The North Star Framework (Amplitude) â­</h4>
<p><em>DÃ nh cho: C-Level &amp; Head of Product Ä‘á»ƒ Ä‘á»‹nh hÆ°á»›ng chiáº¿n lÆ°á»£c.</em></p>
<p>Thay vÃ¬ cháº¡y theo hÃ ng trÄƒm metrics, cáº£ cÃ´ng ty chá»‰ nhÃ¬n vÃ o má»™t ngÃ´i sao báº¯c Ä‘áº©u duy nháº¥t (North Star Metric) pháº£n Ã¡nh giÃ¡ trá»‹ cá»‘t lÃµi khÃ¡ch hÃ ng nháº­n Ä‘Æ°á»£c.</p>
<ul>
<li><em>Spotify:</em> Time spent listening (Thá»i gian nghe nháº¡c).</li>
<li><em>Airbnb:</em> Nights booked (Sá»‘ Ä‘Ãªm Ä‘áº·t phÃ²ng).</li>
<li><em>Zoom:</em> Weekly Hosted Meetings (Sá»‘ cuá»™c há»p Ä‘Æ°á»£c tá»• chá»©c).</li>
</ul>
</section>
<section id="d.-rae-framework-mixpanel" class="level4">
<h4 class="anchored" data-anchor-id="d.-rae-framework-mixpanel">D. RAE Framework (Mixpanel) ğŸ“‰</h4>
<p><em>DÃ nh cho: Product Analyst táº­p trung vÃ o vÃ²ng Ä‘á»i ngÆ°á»i dÃ¹ng (User Lifecycle).</em></p>
<p>KhÃ¡c vá»›i AARRR (quÃ¡ táº­p trung vÃ o Acquisition), RAE Ä‘i tháº³ng vÃ o giÃ¡ trá»‹ sáº£n pháº©m:</p>
<ul>
<li><strong>R - Reach:</strong> Báº¡n tiáº¿p cáº­n Ä‘Æ°á»£c bao nhiÃªu ngÆ°á»i dÃ¹ng tiá»m nÄƒng (Ä‘Ã£ sign-up)?<br>
</li>
<li><strong>A - Activation:</strong> Bao nhiÃªu ngÆ°á»i thá»±c sá»± nháº­n Ä‘Æ°á»£c giÃ¡ trá»‹ cá»‘t lÃµi (Value Moment)?<br>
</li>
<li><strong>E - Engagement ( &amp; Retention):</strong> Há» cÃ³ quay láº¡i vÃ  biáº¿n sáº£n pháº©m thÃ nh thÃ³i quen khÃ´ng?</li>
</ul>
</section>
</section>
<section id="use-cases-khi-nÃ o-dÃ¹ng-cÃ¡i-gÃ¬" class="level3">
<h3 class="anchored" data-anchor-id="use-cases-khi-nÃ o-dÃ¹ng-cÃ¡i-gÃ¬">3. Use Cases: Khi nÃ o dÃ¹ng cÃ¡i gÃ¬?</h3>
<p>LÃ  Data Analyst, báº¡n cáº§n chá»n Ä‘Ãºng cÃ´ng cá»¥ cho Ä‘Ãºng váº¥n Ä‘á»:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">BÃ i toÃ¡n (Problem)</th>
<th style="text-align: left;">Framework khuyÃªn dÃ¹ng</th>
<th style="text-align: left;">Táº¡i sao?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Ra máº¯t tÃ­nh nÄƒng má»›i</strong></td>
<td style="text-align: left;"><strong>HEART</strong></td>
<td style="text-align: left;">Cáº§n biáº¿t user cÃ³ tháº¥y dá»… dÃ¹ng (Task Success) vÃ  thÃ­ch nÃ³ khÃ´ng (Happiness).</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Tá»‘i Æ°u phá»…u chuyá»ƒn Ä‘á»•i</strong></td>
<td style="text-align: left;"><strong>AARRR</strong></td>
<td style="text-align: left;">Cáº§n biáº¿t user rá»›t á»Ÿ bÆ°á»›c nÃ o: ÄÄƒng kÃ½ (Acquisition) hay KÃ­ch hoáº¡t (Activation)?</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Thá»‘ng nháº¥t má»¥c tiÃªu cÃ´ng ty</strong></td>
<td style="text-align: left;"><strong>North Star</strong></td>
<td style="text-align: left;">TrÃ¡nh viá»‡c team Sales cháº¡y theo doanh sá»‘ ngáº¯n háº¡n lÃ m há»ng tráº£i nghiá»‡m user dÃ i háº¡n.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>PhÃ¢n tÃ­ch Ä‘á»™ sÃ¢u sá»­ dá»¥ng</strong></td>
<td style="text-align: left;"><strong>RAE (Mixpanel)</strong></td>
<td style="text-align: left;">Táº­p trung cá»±c sÃ¢u vÃ o viá»‡c user cÃ³ Active vÃ  Engage hay khÃ´ng (bá» qua pháº§n Acquisition rÆ°á»m rÃ ).</td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>ğŸ“š TÃ i liá»‡u tham kháº£o uy tÃ­n (Reliable Sources)
</div>
</div>
<div class="callout-body-container callout-body">
<p>Äá»ƒ Ã¡p dá»¥ng cÃ¡c framework nÃ y vÃ o thá»±c táº¿ (cÃ¡ch tÃ­nh toÃ¡n cá»¥ thá»ƒ), hÃ£y Ä‘á»c cÃ¡c tÃ i liá»‡u gá»‘c:</p>
<ol type="1">
<li><strong>Google HEART Framework:</strong> Paper gá»‘c tá»« Ä‘á»™i ngÅ© Google Research.
<ul>
<li>ğŸ‘‰ <a href="https://library.gv.com/google-heart-framework-b068897040ce">Read: Measuring the User Experience on a Large Scale</a></li>
</ul></li>
<li><strong>Startup Metrics for Pirates (AARRR):</strong> Slide gá»‘c cá»§a Dave McClure (500 Startups).
<ul>
<li>ğŸ‘‰ <a href="https://500hats.com/startup-metrics-for-pirates-aarrr/">Read: Startup Metrics for Pirates</a></li>
</ul></li>
<li><strong>The Guide to Product Analytics (Mixpanel):</strong> TÃ i liá»‡u chi tiáº¿t vá» RAE framework vÃ  cÃ¡ch Ä‘o lÆ°á»ng User Engagement.
<ul>
<li>ğŸ‘‰ <a href="https://mixpanel.com/content/guide-to-product-analytics/">Read: The Guide to Product Analytics</a></li>
</ul></li>
</ol>
</div>
</div>
</section>
</section>
<section id="execution-turning-data-into-action" class="level2">
<h2 class="anchored" data-anchor-id="execution-turning-data-into-action">Execution: Turning Data into Action</h2>
<p>Biáº¿t framework lÃ  má»™t chuyá»‡n, Ã¡p dá»¥ng nÃ³ Ä‘á»ƒ thay Ä‘á»•i káº¿t quáº£ kinh doanh lÃ  chuyá»‡n khÃ¡c. Äá»«ng cá»‘ gáº¯ng theo dÃµi táº¥t cáº£ metrics cÃ¹ng má»™t lÃºc. Báº¡n sáº½ bá»‹ â€œngá»™ Ä‘á»™c dá»¯ liá»‡uâ€ (Analysis Paralysis).</p>
<p>DÆ°á»›i Ä‘Ã¢y lÃ  quy trÃ¬nh 3 bÆ°á»›c Ä‘á»ƒ thá»±c thi Product Analysis hiá»‡u quáº£:</p>
<section id="step-1-chá»n-vÅ©-khÃ­-phÃ¹-há»£p-select-framework" class="level3">
<h3 class="anchored" data-anchor-id="step-1-chá»n-vÅ©-khÃ­-phÃ¹-há»£p-select-framework">Step 1: Chá»n â€œVÅ© khÃ­â€ phÃ¹ há»£p (Select Framework)</h3>
<p>KhÃ´ng cÃ³ framework nÃ o Ä‘Ãºng cho má»i giai Ä‘oáº¡n. Báº¡n cáº§n chá»n cÃ´ng cá»¥ dá»±a trÃªn <strong>Ä‘á»™ trÆ°á»Ÿng thÃ nh (Maturity)</strong> cá»§a sáº£n pháº©m.</p>
<p><strong>VÃ­ dá»¥:</strong> Báº¡n Ä‘ang cÃ³ má»™t sáº£n pháº©m Ä‘Ã£ trÆ°á»Ÿng thÃ nh (Mature Product), lÆ°á»£ng user á»•n Ä‘á»‹nh nhÆ°ng tÄƒng trÆ°á»Ÿng cháº­m láº¡i. Báº¡n muá»‘n hiá»ƒu sÃ¢u sáº¯c <em>táº¡i sao</em> user dÃ¹ng (hoáº·c khÃ´ng dÃ¹ng) tÃ­nh nÄƒng X.</p>
<ul>
<li>âŒ <strong>KhÃ´ng dÃ¹ng AARRR:</strong> VÃ¬ AARRR quÃ¡ táº­p trung vÃ o Acquisition (kÃ©o user má»›i), khÃ´ng giÃºp Ã­ch nhiá»u cho viá»‡c Ä‘Ã o sÃ¢u hÃ nh vi hiá»‡n táº¡i.</li>
<li>âœ… <strong>NÃªn dÃ¹ng RAE (Mixpanel) hoáº·c North Star (Amplitude):</strong>
<ul>
<li><strong>RAE</strong> giÃºp báº¡n bá» qua pháº§n rÃ¢u ria Ä‘á»ƒ Ä‘i tháº³ng vÃ o <strong>Engagement</strong> (TÆ°Æ¡ng tÃ¡c sÃ¢u) vÃ  <strong>Retention</strong> (Giá»¯ chÃ¢n).</li>
<li>NÃ³ tráº£ lá»i cÃ¢u há»i: <em>â€œUser cÃ³ thá»±c sá»± nháº­n Ä‘Æ°á»£c giÃ¡ trá»‹ cá»‘t lÃµi (Core Value) khÃ´ng, hay há» chá»‰ log in rá»“i log out?â€</em></li>
</ul></li>
</ul>
</section>
<section id="step-2-khÃ¡m-sá»©c-khá»e-hiá»‡n-táº¡i-metric-audit" class="level3">
<h3 class="anchored" data-anchor-id="step-2-khÃ¡m-sá»©c-khá»e-hiá»‡n-táº¡i-metric-audit">Step 2: KhÃ¡m sá»©c khá»e hiá»‡n táº¡i (Metric Audit)</h3>
<p>TrÆ°á»›c khi muá»‘n â€œtÄƒngâ€ cÃ¡i gÃ¬, báº¡n pháº£i biáº¿t mÃ¬nh Ä‘ang Ä‘á»©ng á»Ÿ Ä‘Ã¢u. HÃ£y so sÃ¡nh metrics hiá»‡n táº¡i cá»§a báº¡n vá»›i cÃ¡c <strong>Benchmark</strong> Ä‘Ã£ nÃªu á»Ÿ Layer 1 &amp; 2.</p>
<p><strong>CÃ¡ch lÃ m:</strong> Láº­p má»™t báº£ng â€œTraffic Lightâ€ (ÄÃ¨n giao thÃ´ng).</p>
<table class="caption-top table">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Metric</th>
<th style="text-align: left;">Hiá»‡n táº¡i</th>
<th style="text-align: left;">Benchmark</th>
<th style="text-align: left;">Tráº¡ng thÃ¡i</th>
<th style="text-align: left;">Nháº­n Ä‘á»‹nh (Diagnosis)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Activation Rate</strong></td>
<td style="text-align: left;">15%</td>
<td style="text-align: left;">25%</td>
<td style="text-align: left;">ğŸ”´ <strong>Bad</strong></td>
<td style="text-align: left;">User Ä‘Äƒng kÃ½ nhiá»u nhÆ°ng rá»›t ngay á»Ÿ bÆ°á»›c Onboarding. Cáº§n cáº¥p cá»©u gáº¥p.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Retention D30</strong></td>
<td style="text-align: left;">60%</td>
<td style="text-align: left;">40%</td>
<td style="text-align: left;">ğŸŸ¢ <strong>Good</strong></td>
<td style="text-align: left;">Ai Ä‘Ã£ qua Ä‘Æ°á»£c bÆ°á»›c Onboarding thÃ¬ á»Ÿ láº¡i ráº¥t lÃ¢u. Sáº£n pháº©m tá»‘t (PMF ngon).</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Upgrade Rate</strong></td>
<td style="text-align: left;">2%</td>
<td style="text-align: left;">5%</td>
<td style="text-align: left;">ğŸŸ¡ <strong>Avg</strong></td>
<td style="text-align: left;">ChÆ°a tá»‘i Æ°u cÃ¡c Ä‘iá»ƒm cháº¡m Upsell (Paywall).</td>
</tr>
</tbody>
</table>
<p>ğŸ‘‰ <strong>Káº¿t luáº­n:</strong> Váº¥n Ä‘á» khÃ´ng náº±m á»Ÿ sáº£n pháº©m (Retention tá»‘t), mÃ  náº±m á»Ÿ <strong>tráº£i nghiá»‡m ban Ä‘áº§u (Activation)</strong>.</p>
</section>
<section id="step-3-drill-down-optimize-Ä‘Ã o-sÃ¢u-tá»‘i-Æ°u" class="level3">
<h3 class="anchored" data-anchor-id="step-3-drill-down-optimize-Ä‘Ã o-sÃ¢u-tá»‘i-Æ°u">Step 3: Drill Down &amp; Optimize (ÄÃ o sÃ¢u &amp; Tá»‘i Æ°u)</h3>
<p>Thay vÃ¬ cá»‘ sá»­a táº¥t cáº£, hÃ£y chá»n <strong>Activation Rate</strong> lÃ m <strong>â€œThe One Metric That Mattersâ€ (OMTM)</strong> trong quÃ½ nÃ y. Äá»ƒ cáº£i thiá»‡n nÃ³, báº¡n cáº§n phá»‘i há»£p giá»¯a <strong>Äá»‹nh lÆ°á»£ng (Quantitative)</strong> vÃ  <strong>Äá»‹nh tÃ­nh (Qualitative)</strong>:</p>
<section id="event-based-modeling-mÃ´-hÃ¬nh-hÃ³a-sá»±-kiá»‡n" class="level4">
<h4 class="anchored" data-anchor-id="event-based-modeling-mÃ´-hÃ¬nh-hÃ³a-sá»±-kiá»‡n">1. Event-Based Modeling (MÃ´ hÃ¬nh hÃ³a sá»± kiá»‡n)</h4>
<p>Äá»«ng nhÃ¬n data chung chung (Pageview). HÃ£y nhÃ¬n vÃ o hÃ nh Ä‘á»™ng (Event).</p>
<ul>
<li><em>CÃ¢u há»i:</em> User rá»›t á»Ÿ Ä‘Ã¢u trong quÃ¡ trÃ¬nh Onboarding?<br>
</li>
<li><em>HÃ nh Ä‘á»™ng:</em> Váº½ phá»…u (Funnel) chi tiáº¿t tá»«ng bÆ°á»›c click: <code>Sign Up</code> <img src="https://latex.codecogs.com/png.latex?%5Crightarrow"> <code>Verify Email</code> <img src="https://latex.codecogs.com/png.latex?%5Crightarrow"> <code>Create Project</code> <img src="https://latex.codecogs.com/png.latex?%5Crightarrow"> <code>Invite Colleague</code>.<br>
</li>
<li><em>PhÃ¡t hiá»‡n:</em> 70% user rá»›t á»Ÿ bÆ°á»›c <code>Verify Email</code>.</li>
</ul>
</section>
<section id="user-surveys-feedback-kháº£o-sÃ¡t-ngÆ°á»i-dÃ¹ng" class="level4">
<h4 class="anchored" data-anchor-id="user-surveys-feedback-kháº£o-sÃ¡t-ngÆ°á»i-dÃ¹ng">2. User Surveys &amp; Feedback (Kháº£o sÃ¡t ngÆ°á»i dÃ¹ng)</h4>
<p>Data cho biáº¿t <em>cÃ¡i gÃ¬</em> Ä‘ang xáº£y ra (rá»›t á»Ÿ Verify Email), nhÆ°ng Survey cho biáº¿t <em>táº¡i sao</em>.</p>
<ul>
<li><em>CÃ¢u há»i:</em> Táº¡i sao há» khÃ´ng verify email? Do lÆ°á»i, do khÃ´ng nháº­n Ä‘Æ°á»£c mail, hay do sá»£ spam?<br>
</li>
<li><em>HÃ nh Ä‘á»™ng:</em> Gá»­i Micro-survey (kháº£o sÃ¡t nhá») cho nhá»¯ng user Ä‘Ã£ drop-off, hoáº·c cÃ i widget há»i trá»±c tiáº¿p trÃªn trang.<br>
</li>
<li><em>Insight:</em> â€œTÃ´i Ä‘ang dÃ¹ng Ä‘iá»‡n thoáº¡i, ngáº¡i má»Ÿ mail app Ä‘á»ƒ verify ngay lÃºc nÃ y.â€</li>
</ul>
</section>
<section id="cohort-analysis-phÃ¢n-tÃ­ch-Ä‘oÃ n-há»‡" class="level4">
<h4 class="anchored" data-anchor-id="cohort-analysis-phÃ¢n-tÃ­ch-Ä‘oÃ n-há»‡">3. Cohort Analysis (PhÃ¢n tÃ­ch Ä‘oÃ n há»‡)</h4>
<p>Chia user thÃ nh cÃ¡c nhÃ³m nhá» Ä‘á»ƒ xem hÃ nh vi nÃ y cÃ³ phá»• biáº¿n khÃ´ng.</p>
<ul>
<li><em>HÃ nh Ä‘á»™ng:</em> So sÃ¡nh Cohort <code>Device: Mobile</code> vs.&nbsp;<code>Device: Desktop</code>.<br>
</li>
<li><em>PhÃ¡t hiá»‡n:</em> Chá»‰ cÃ³ user Mobile bá»‹ káº¹t á»Ÿ bÆ°á»›c Verify Email cao báº¥t thÆ°á»ng. User Desktop váº«n á»•n.</li>
</ul>
</section>
<section id="ab-testing-thá»­-nghiá»‡m-phÃ¢n-tÃ¡ch" class="level4">
<h4 class="anchored" data-anchor-id="ab-testing-thá»­-nghiá»‡m-phÃ¢n-tÃ¡ch">4. A/B Testing (Thá»­ nghiá»‡m phÃ¢n tÃ¡ch)</h4>
<p>Sau khi cÃ³ Ä‘á»§ báº±ng chá»©ng (Mobile user ngáº¡i verify), hÃ£y thá»­ nghiá»‡m giáº£i phÃ¡p.</p>
<ul>
<li><em>Giáº£ thuyáº¿t:</em> Cho phÃ©p Mobile user bá» qua bÆ°á»›c Verify Email (Verify later) sáº½ tÄƒng Activation.<br>
</li>
<li><em>Thá»­ nghiá»‡m:</em>
<ul>
<li><strong>NhÃ³m A (Control):</strong> Giá»¯ nguyÃªn luá»“ng cÅ©.<br>
</li>
<li><strong>NhÃ³m B (Variant):</strong> NÃºt â€œVerify Laterâ€ to rÃµ trÃªn Mobile.<br>
</li>
</ul></li>
<li><em>Káº¿t quáº£:</em> NhÃ³m B cÃ³ Activation tÄƒng 30%. <img src="https://latex.codecogs.com/png.latex?%5Crightarrow"> <strong>Triá»ƒn khai toÃ n bá»™.</strong></li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>ğŸ› ï¸ Tooling: Chá»n ná»n táº£ng nÃ o?
</div>
</div>
<div class="callout-body-container callout-body">
<p>Äá»ƒ lÃ m Ä‘Æ°á»£c quy trÃ¬nh 4 bÆ°á»›c trÃªn, báº¡n cáº§n sá»± phá»‘i há»£p cÃ´ng cá»¥:</p>
<ul>
<li><strong>Product Analytics (Cho bÆ°á»›c 1 &amp; 3):</strong> Mixpanel, Amplitude.<br>
</li>
<li><strong>Qualitative/Survey (Cho bÆ°á»›c 2):</strong> Sprig, Hotjar (Ä‘á»ƒ há»i â€œWhy?â€).<br>
</li>
<li><strong>Experimentation (Cho bÆ°á»›c 4):</strong> PostHog, Optimizely.<br>
</li>
</ul>
</div>
</div>


</section>
</section>
</section>

 ]]></description>
  <category>SaaS</category>
  <category>Business Model</category>
  <category>Strategy</category>
  <category>Startup</category>
  <guid>https://pakota159.github.io/posts/saas-metrics-4/</guid>
  <pubDate>Tue, 13 Jan 2026 17:00:00 GMT</pubDate>
  <media:content url="https://pakota159.github.io/img/saas-metrics/saas-framework.png" medium="image" type="image/png" height="79" width="144"/>
</item>
<item>
  <title>SaaS Metrics that actually make sense - Part 1</title>
  <dc:creator>Cuong Pham</dc:creator>
  <link>https://pakota159.github.io/posts/saas-metrics-1/</link>
  <description><![CDATA[ 




<section id="saas-lÃ -gÃ¬" class="level2">
<h2 class="anchored" data-anchor-id="saas-lÃ -gÃ¬">SaaS lÃ  gÃ¬?</h2>
<p>TrÆ°á»›c khi Ä‘i sÃ¢u vÃ o cÃ¡c chá»‰ sá»‘ phá»©c táº¡p, hÃ£y tráº£ lá»i cÃ¢u há»i cÆ¡ báº£n: SaaS thá»±c cháº¥t lÃ  gÃ¬?</p>
<p><strong>SaaS (Software as a Service)</strong> lÃ  mÃ´ hÃ¬nh phÃ¢n phá»‘i pháº§n má»m trong Ä‘Ã³ nhÃ  cung cáº¥p lÆ°u trá»¯ á»©ng dá»¥ng trÃªn Ä‘Ã¡m mÃ¢y (Cloud) vÃ  cung cáº¥p cho khÃ¡ch hÃ ng qua Internet.</p>
<ul>
<li><strong>Thay vÃ¬</strong> mua Ä‘á»©t vÃ  cÃ i Ä‘áº·t vÃ o mÃ¡y (nhÆ° Ä‘Ä©a CD Microsoft Office 2003 ngÃ y xÆ°a)</li>
<li><strong>KhÃ¡ch hÃ ng</strong> tráº£ phÃ­ thuÃª bao (Subscription) Ä‘á»ƒ truy cáº­p vÃ  sá»­ dá»¥ng (nhÆ° Office 365, Google Workspace)</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>TÆ° duy cho Data Analyst
</div>
</div>
<div class="callout-body-container callout-body">
<p>Sá»± thay Ä‘á»•i nÃ y chuyá»ƒn dá»‹ch doanh thu tá»« <strong>One-time payment</strong> (mua 1 láº§n) sang <strong>Recurring Revenue</strong> (doanh thu Ä‘á»‹nh ká»³). ÄÃ¢y lÃ  lÃ½ do táº¡i sao cÃ¡c metrics nhÆ° MRR, ARR, Churn ra Ä‘á»i.</p>
</div>
</div>
</section>
<section id="phÃ¢n-biá»‡t-saas-vá»›i-cÃ¡c-mÃ´-hÃ¬nh-khÃ¡c" class="level2">
<h2 class="anchored" data-anchor-id="phÃ¢n-biá»‡t-saas-vá»›i-cÃ¡c-mÃ´-hÃ¬nh-khÃ¡c">PhÃ¢n biá»‡t SaaS vá»›i cÃ¡c mÃ´ hÃ¬nh khÃ¡c</h2>
<p>Äá»ƒ dá»… hÃ¬nh dung, hÃ£y so sÃ¡nh SaaS vá»›i mÃ´ hÃ¬nh truyá»n thá»‘ng (On-Premise) vÃ  cÃ¡c táº§ng khÃ¡c cá»§a Cloud Computing.</p>
<section id="saas-vs.-on-premise-mÃ´-hÃ¬nh-truyá»n-thá»‘ng" class="level3">
<h3 class="anchored" data-anchor-id="saas-vs.-on-premise-mÃ´-hÃ¬nh-truyá»n-thá»‘ng">1. SaaS vs.&nbsp;On-Premise (MÃ´ hÃ¬nh truyá»n thá»‘ng)</h3>
<p>ÄÃ¢y lÃ  sá»± so sÃ¡nh quan trá»ng nháº¥t vá» máº·t kinh doanh.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 18%">
<col style="width: 50%">
<col style="width: 31%">
</colgroup>
<thead>
<tr class="header">
<th>Äáº·c Ä‘iá»ƒm</th>
<th>On-Premise (Truyá»n thá»‘ng)</th>
<th>SaaS (Hiá»‡n Ä‘áº¡i)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Sá»Ÿ há»¯u</strong></td>
<td>Báº¡n mua pháº§n má»m vÄ©nh viá»…n (â€œCÃ¡i Ä‘Ä©a lÃ  cá»§a báº¡nâ€)</td>
<td>Báº¡n thuÃª quyá»n sá»­ dá»¥ng (â€œDá»‹ch vá»¥ lÃ  cá»§a há»â€)</td>
</tr>
<tr class="even">
<td><strong>Chi phÃ­</strong></td>
<td>CapEx (Chi phÃ­ vá»‘n): Tráº£ 1 cá»¥c tiá»n lá»›n ban Ä‘áº§u</td>
<td>OpEx (Chi phÃ­ váº­n hÃ nh): Tráº£ nhá» giá»t hÃ ng thÃ¡ng/nÄƒm</td>
</tr>
<tr class="odd">
<td><strong>Báº£o trÃ¬</strong></td>
<td>Báº¡n tá»± lo server, update, vÃ¡ lá»—i, báº£o máº­t</td>
<td>NhÃ  cung cáº¥p lo tá»« A-Z (Auto-update)</td>
</tr>
<tr class="even">
<td><strong>Truy cáº­p</strong></td>
<td>Táº¡i nÆ¡i cÃ i Ä‘áº·t (Táº¡i vÄƒn phÃ²ng/mÃ¡y tÃ­nh cÃ¡ nhÃ¢n)</td>
<td>Má»i lÃºc, má»i nÆ¡i, miá»…n cÃ³ Internet</td>
</tr>
<tr class="odd">
<td><strong>Metrics</strong></td>
<td>Sales, Unit Sold (Sá»‘ báº£n bÃ¡n Ä‘Æ°á»£c)</td>
<td>MRR, Churn, LTV (VÃ²ng Ä‘á»i khÃ¡ch hÃ ng)</td>
</tr>
</tbody>
</table>
</section>
<section id="saas-vs.-iaas-vs.-paas-cÃ¡c-táº§ng-cloud" class="level3">
<h3 class="anchored" data-anchor-id="saas-vs.-iaas-vs.-paas-cÃ¡c-táº§ng-cloud">2. SaaS vs.&nbsp;IaaS vs.&nbsp;PaaS (CÃ¡c táº§ng Cloud)</h3>
<p>Náº¿u vÃ­ viá»‡c xÃ¢y dá»±ng pháº§n má»m nhÆ° viá»‡c <strong>Ä‚n Pizza</strong>, thÃ¬:</p>
<ul>
<li><p><strong>On-Premise (LÃ m táº¡i nhÃ )</strong>: Báº¡n mua bá»™t, mua lÃ² nÆ°á»›ng, tá»± lÃ m Ä‘áº¿, tá»± nÆ°á»›ng, tá»± dá»n dáº¹p.</p></li>
<li><p><strong>IaaS (Infrastructure as a Service)</strong>: Báº¡n thuÃª nhÃ  báº¿p vÃ  lÃ² nÆ°á»›ng. Báº¡n váº«n tá»± mua bá»™t vÃ  lÃ m bÃ¡nh.<br>
<em>VÃ­ dá»¥: AWS EC2, DigitalOcean</em></p></li>
<li><p><strong>PaaS (Platform as a Service)</strong>: Báº¡n mua Ä‘áº¿ bÃ¡nh lÃ m sáºµn. Báº¡n chá»‰ viá»‡c ráº¯c topping (code) lÃªn vÃ  nÆ°á»›ng.<br>
<em>VÃ­ dá»¥: Heroku, Google App Engine</em></p></li>
<li><p><strong>SaaS (Software as a Service)</strong>: Báº¡n Ä‘áº¿n nhÃ  hÃ ng Pizza. Báº¡n chá»‰ viá»‡c gá»i mÃ³n vÃ  Äƒn.<br>
<em>VÃ­ dá»¥: Gmail, Salesforce, Dropbox</em></p></li>
</ul>
</section>
</section>
<section id="táº¡i-sao-data-analyst-cáº§n-quan-tÃ¢m-sá»±-phÃ¢n-biá»‡t-nÃ y" class="level2">
<h2 class="anchored" data-anchor-id="táº¡i-sao-data-analyst-cáº§n-quan-tÃ¢m-sá»±-phÃ¢n-biá»‡t-nÃ y">Táº¡i sao Data Analyst cáº§n quan tÃ¢m sá»± phÃ¢n biá»‡t nÃ y?</h2>
<p>VÃ¬ <strong>mÃ´ hÃ¬nh quyáº¿t Ä‘á»‹nh dá»¯ liá»‡u báº¡n cÃ³</strong>:</p>
<ol type="1">
<li><p><strong>SaaS</strong>: Báº¡n cÃ³ quyá»n truy cáº­p vÃ o <strong>Behavioral Data</strong> (Dá»¯ liá»‡u hÃ nh vi). Báº¡n biáº¿t khÃ¡ch hÃ ng click vÃ o Ä‘Ã¢u, dÃ¹ng tÃ­nh nÄƒng nÃ o má»—i ngÃ y.</p></li>
<li><p><strong>On-Premise</strong>: Báº¡n thÆ°á»ng bá»‹ â€œmÃ¹â€ vá» cÃ¡ch khÃ¡ch hÃ ng sá»­ dá»¥ng sáº£n pháº©m sau khi bÃ¡n xong (trá»« khi cÃ³ cÆ¡ cháº¿ telemetry Ä‘áº·c biá»‡t).</p></li>
</ol>
<hr>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>TÃ i liá»‡u tham kháº£o
</div>
</div>
<div class="callout-body-container callout-body">
<p>Äá»ƒ tÃ¬m hiá»ƒu sÃ¢u hÆ¡n vá» cÃ¡c mÃ´ hÃ¬nh kinh doanh SaaS, xem thÃªm:</p>
<ul>
<li><a href="https://nvlpubs.nist.gov/nistpubs/Legacy/SP/nistspecialpublication800-145.pdf">Äá»‹nh nghÄ©a SaaS cá»§a NIST</a> - Tháº¿ nÃ o lÃ  SaaS</li>
<li><a href="https://www.salesforce.com/saas/">Saleforce articles</a> - What is SaaS? Software as a Service Defined</li>
<li><a href="https://www.ibm.com/think/topics/iaas-paas-saas">PhÃ¢n biá»‡t IaaS, SaaS, PaaS</a> - IBM document</li>
</ul>
</div>
</div>
</section>
<section id="saas-landscape" class="level2">
<h2 class="anchored" data-anchor-id="saas-landscape">PhÃ¢n loáº¡i SaaS</h2>
<p>á» vai trÃ² cá»§a 1 nhÃ  quáº£n lÃ½, hoáº·c 1 data analyst, Ä‘á»ƒ biáº¿t Ä‘Æ°á»£c nhá»¯ng chá»‰ sá»‘ nÃ o quan trá»ng cáº§n theo dÃµi Ä‘á»ƒ Ä‘Ã¡nh giÃ¡ hiá»‡u quáº£ kinh doanh cá»§a cÃ´ng ty, thÃ¬ báº¡n pháº£i biáº¿t cÃ´ng ty mÃ¬nh thuá»™c loáº¡i nÃ o trong nhá»¯ng loáº¡i sau.</p>
<div class="cell" data-fig-width="10" data-fig-height="8" data-layout-align="default">
<div class="cell-output-display">
<div id="fig-saas-mindmap" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-saas-mindmap-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>
<pre class="mermaid mermaid-js" data-label="fig-saas-mindmap">mindmap
  root((SaaS Business Model))
    BÃ¡n hÃ ng &amp; Go-to-Market
      Self-Service
      Transactional
      Enterprise
    Chiáº¿n lÆ°á»£c TÄƒng trÆ°á»Ÿng
      Product-Led Growth
      Sales-Led Growth
      Marketing-Led Growth
      Hybrid Motion
    MÃ´ hÃ¬nh Äá»‹nh giÃ¡
      Freemium
      Per-User Seat-Based
      Usage-Based
      Tiered Packages
      Flat-Rate
      Transactional
      Hybrid Pricing
    Äá»‹nh hÆ°á»›ng Thá»‹ trÆ°á»ng
      Horizontal SaaS
      Vertical SaaS
</pre>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-saas-mindmap-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: 4 cÃ¡ch phÃ¢n loáº¡i cá»§a mÃ´ hÃ¬nh kinh doanh SaaS
</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb1" data-startfrom="118" data-source-offset="-68" style="background: #f1f3f5;"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 117;"><span id="cb1-118">companies <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [</span>
<span id="cb1-119">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// CÃ´ng ty lá»›n</span></span>
<span id="cb1-120">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Salesforce"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">280</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Enterprise"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sales-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Tiered"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-121">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Microsoft 365"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">350</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Enterprise"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Hybrid"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Per-User"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-122">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"SAP"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Enterprise"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sales-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Tiered"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-123">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Oracle"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">220</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Enterprise"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sales-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Tiered"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-124">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Workday"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">60</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Enterprise"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sales-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Per-User"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-125">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ServiceNow"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">150</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Enterprise"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sales-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Per-User"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-126">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Adobe CC"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">180</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Transactional"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Hybrid"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Flat-Rate"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-127">  </span>
<span id="cb1-128">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// CÃ´ng ty trung bÃ¬nh</span></span>
<span id="cb1-129">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Zoom"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Transactional"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Product-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Per-User"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-130">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Slack"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">25</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Transactional"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Product-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Per-User"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-131">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Dropbox"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Self-Service"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Product-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Freemium"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-132">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"HubSpot"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Transactional"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Marketing-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Tiered"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-133">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Atlassian"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">45</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Transactional"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Hybrid"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Tiered"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-134">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Datadog"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">35</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Transactional"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Hybrid"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Usage-Based"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-135">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Snowflake"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Enterprise"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sales-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Usage-Based"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-136">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Shopify"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">90</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Self-Service"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Product-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Transactional"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Vertical"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-137">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Twilio"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Self-Service"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Product-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Usage-Based"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-138">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Stripe"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">65</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Self-Service"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Product-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Transactional"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-139">  </span>
<span id="cb1-140">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// CÃ´ng ty nhá» / TÄƒng trÆ°á»Ÿng</span></span>
<span id="cb1-141">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Figma"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Self-Service"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Product-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Freemium"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-142">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Notion"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Self-Service"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Product-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Freemium"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-143">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Canva"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">26</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Self-Service"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Product-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Freemium"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-144">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Miro"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">17</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Self-Service"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Product-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Freemium"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-145">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Asana"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Transactional"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Product-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Per-User"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-146">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Monday.com"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Self-Service"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Product-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Per-User"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-147">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Airtable"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">11</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Self-Service"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Hybrid"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Freemium"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-148">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"GitLab"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Transactional"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Hybrid"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Tiered"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-149">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Loom"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.5</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Self-Service"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Product-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Freemium"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-150">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Calendly"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Self-Service"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Product-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Freemium"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-151">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Grammarly"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">13</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Self-Service"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Product-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Freemium"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-152">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Mailchimp"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Self-Service"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Marketing-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Tiered"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-153">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Zendesk"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Transactional"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Marketing-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Tiered"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-154">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Intercom"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Transactional"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Product-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Hybrid"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-155">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Zapier"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Self-Service"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Product-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Tiered"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-156">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Webflow"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Self-Service"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Product-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Tiered"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-157">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"SendGrid"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Self-Service"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Product-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Usage-Based"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-158">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Trello"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.4</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Self-Service"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Product-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Freemium"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-159">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Basecamp"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Self-Service"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Marketing-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Flat-Rate"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-160">  </span>
<span id="cb1-161">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Vertical SaaS</span></span>
<span id="cb1-162">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Veeva"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Enterprise"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sales-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Per-User"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Vertical"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-163">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Toast"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">14</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Transactional"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sales-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Transactional"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Vertical"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-164">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Procore"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Enterprise"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sales-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Tiered"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Vertical"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-165">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Mindbody"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Transactional"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sales-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Tiered"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Vertical"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-166">  </span>
<span id="cb1-167">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Payment/Fintech</span></span>
<span id="cb1-168">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"PayPal"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">70</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Self-Service"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Product-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Transactional"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-169">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Square"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">45</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Self-Service"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Product-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Transactional"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-170">  </span>
<span id="cb1-171">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Cloud Infrastructure</span></span>
<span id="cb1-172">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AWS"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">400</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Transactional"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Hybrid"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Usage-Based"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-173">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Google Cloud"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">150</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Transactional"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Hybrid"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Per-User"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-174">  {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"GitHub"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marketCap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">7.5</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Self-Service"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Product-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Hybrid"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-175">]</span>
<span id="cb1-176"></span>
<span id="cb1-177"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Cáº¥u hÃ¬nh cÃ¡c danh má»¥c</span></span>
<span id="cb1-178">categories <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> ({</span>
<span id="cb1-179">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb1-180">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">title</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MÃ´ HÃ¬nh BÃ¡n HÃ ng vÃ  Tiáº¿p Cáº­n Thá»‹ TrÆ°á»ng"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-181">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">subtitle</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sales and Go-to-Market Model"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-182">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">field</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sales"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-183">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">segments</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Self-Service"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Transactional"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Enterprise"</span>]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-184">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">colors</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#22c55e"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#3b82f6"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#8b5cf6"</span>]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-185">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">descriptions</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb1-186">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Self-Service"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ACV &lt; $5K â€¢ Tá»± Ä‘á»™ng hÃ³a"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-187">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Transactional"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ACV $5K-$50K â€¢ Inside sales"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-188">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Enterprise"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ACV &gt; $50K â€¢ Field sales"</span></span>
<span id="cb1-189">    }</span>
<span id="cb1-190">  }<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-191">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb1-192">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">title</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Chiáº¿n LÆ°á»£c TÄƒng TrÆ°á»Ÿng vÃ  Thu HÃºt KhÃ¡ch HÃ ng"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-193">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">subtitle</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Growth Strategy and Acquisition Motion"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-194">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">field</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"growth"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-195">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">segments</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Product-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sales-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Marketing-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Hybrid"</span>]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-196">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">colors</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#6366f1"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#f59e0b"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#10b981"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#ec4899"</span>]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-197">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">descriptions</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb1-198">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Product-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sáº£n pháº©m lÃ  Ä‘á»™ng lá»±c chÃ­nh"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-199">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sales-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Äá»™i ngÅ© bÃ¡n hÃ ng dáº«n dáº¯t"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-200">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Marketing-Led"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Content &amp; demand gen"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-201">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Hybrid"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Káº¿t há»£p nhiá»u chiáº¿n lÆ°á»£c"</span></span>
<span id="cb1-202">    }</span>
<span id="cb1-203">  }<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-204">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb1-205">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">title</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MÃ´ HÃ¬nh Äá»‹nh GiÃ¡ vÃ  Doanh Thu"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-206">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">subtitle</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Pricing and Revenue Model"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-207">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">field</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pricing"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-208">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">segments</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Freemium"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Per-User"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Usage-Based"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Tiered"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Flat-Rate"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Transactional"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Hybrid"</span>]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-209">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">colors</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#22c55e"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#3b82f6"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#f59e0b"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#8b5cf6"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#64748b"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#ef4444"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#ec4899"</span>]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-210">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">descriptions</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb1-211">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Freemium"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Miá»…n phÃ­ + Premium"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-212">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Per-User"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"$/user/thÃ¡ng"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-213">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Usage-Based"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Tráº£ theo sá»­ dá»¥ng"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-214">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Tiered"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"GÃ³i Good-Better-Best"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-215">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Flat-Rate"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Má»™t giÃ¡ cho táº¥t cáº£"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-216">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Transactional"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"% má»—i giao dá»‹ch"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-217">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Hybrid"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Káº¿t há»£p nhiá»u mÃ´ hÃ¬nh"</span></span>
<span id="cb1-218">    }</span>
<span id="cb1-219">  }<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-220">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb1-221">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">title</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Äá»‹nh HÆ°á»›ng Thá»‹ TrÆ°á»ng vÃ  Tiáº¿p Cáº­n NgÃ nh"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-222">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">subtitle</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Market Focus and Industry Approach"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-223">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">field</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"market"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-224">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">segments</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Vertical"</span>]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-225">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">colors</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#3b82f6"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#f59e0b"</span>]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-226">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">descriptions</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb1-227">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Horizontal"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Äa ngÃ nh, Ä‘a má»¥c Ä‘Ã­ch"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-228">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Vertical"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ChuyÃªn biá»‡t theo ngÃ nh"</span></span>
<span id="cb1-229">    }</span>
<span id="cb1-230">  }</span>
<span id="cb1-231">})</span>
<span id="cb1-232"></span>
<span id="cb1-233"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Chá»n view</span></span>
<span id="cb1-234">viewof selectedView <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> Inputs<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">radio</span>(</span>
<span id="cb1-235">  [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sales"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"growth"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pricing"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"market"</span>]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-236">  {</span>
<span id="cb1-237">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">value</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"growth"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-238">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">label</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Chá»n cÃ¡ch phÃ¢n loáº¡i:"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-239">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">format</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> x <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=&gt;</span> ({</span>
<span id="cb1-240">      <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ğŸª MÃ´ HÃ¬nh BÃ¡n HÃ ng"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-241">      <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">growth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ğŸš€ Chiáº¿n LÆ°á»£c TÄƒng TrÆ°á»Ÿng"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> </span>
<span id="cb1-242">      <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pricing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ğŸ’° MÃ´ HÃ¬nh Äá»‹nh GiÃ¡"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-243">      <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">market</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ğŸ¯ Äá»‹nh HÆ°á»›ng Thá»‹ TrÆ°á»ng"</span></span>
<span id="cb1-244">    })[x]</span>
<span id="cb1-245">  }</span>
<span id="cb1-246">)</span>
<span id="cb1-247"></span>
<span id="cb1-248">currentCat <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> categories[selectedView]</span></code></pre></div></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-4" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb2" data-startfrom="252" data-source-offset="0" style="background: #f1f3f5;"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 251;"><span id="cb2-252">chart <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {</span>
<span id="cb2-253">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> segments <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> currentCat<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">segments</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-254">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> field <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> currentCat<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">field</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-255">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> colors <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> currentCat<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colors</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-256">  </span>
<span id="cb2-257">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Calculate max companies in any segment to determine row height</span></span>
<span id="cb2-258">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> grouped <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> d3<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group</span>(companies<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> d <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=&gt;</span> d[field])<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-259">  </span>
<span id="cb2-260">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> width <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">800</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-261">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> headerHeight <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">70</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-262">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> rowHeaderHeight <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-263">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> bubbleRowHeight <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">70</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Height per bubble row</span></span>
<span id="cb2-264">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> padding <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-265">  </span>
<span id="cb2-266">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Calculate how many bubble rows needed for each segment</span></span>
<span id="cb2-267">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> getRowsNeeded <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (segCompanies) <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=&gt;</span> {</span>
<span id="cb2-268">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> maxBubblesPerRow <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-269">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Math</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ceil</span>(segCompanies<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">length</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> maxBubblesPerRow)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-270">  }<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-271">  </span>
<span id="cb2-272">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Calculate total height for each segment</span></span>
<span id="cb2-273">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> segmentHeights <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> segments<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map</span>(seg <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=&gt;</span> {</span>
<span id="cb2-274">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> segCompanies <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> grouped<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get</span>(seg) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">||</span> []<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-275">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> rowsNeeded <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">getRowsNeeded</span>(segCompanies)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-276">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> rowHeaderHeight <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> rowsNeeded <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> bubbleRowHeight<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-277">  })<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-278">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> height <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> headerHeight <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> d3<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(segmentHeights) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-279">  </span>
<span id="cb2-280">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> colorScale <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> d3<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scaleOrdinal</span>()<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">domain</span>(segments)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">range</span>(colors)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-281">  </span>
<span id="cb2-282">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> svg <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> d3<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">create</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"svg"</span>)</span>
<span id="cb2-283">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"viewBox"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> [<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> width<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> height])</span>
<span id="cb2-284">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"style"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"max-width: 100%; height: auto; font-family: 'Inter', system-ui, sans-serif;"</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-285">  </span>
<span id="cb2-286">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Background</span></span>
<span id="cb2-287">  svg<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">append</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rect"</span>)</span>
<span id="cb2-288">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"width"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> width)</span>
<span id="cb2-289">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"height"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> height)</span>
<span id="cb2-290">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"fill"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#f3f3f3"</span>)</span>
<span id="cb2-291">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rx"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-292">  </span>
<span id="cb2-293">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Title</span></span>
<span id="cb2-294">  svg<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">append</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>)</span>
<span id="cb2-295">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> width <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span>
<span id="cb2-296">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"y"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">28</span>)</span>
<span id="cb2-297">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text-anchor"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"middle"</span>)</span>
<span id="cb2-298">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"fill"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#0062ec"</span>)</span>
<span id="cb2-299">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"font-size"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">18</span>)</span>
<span id="cb2-300">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"font-weight"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">700</span>)</span>
<span id="cb2-301">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">text</span>(currentCat<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-302">  </span>
<span id="cb2-303">  svg<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">append</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>)</span>
<span id="cb2-304">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> width <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span>
<span id="cb2-305">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"y"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">48</span>)</span>
<span id="cb2-306">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text-anchor"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"middle"</span>)</span>
<span id="cb2-307">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"fill"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#0062ec"</span>)</span>
<span id="cb2-308">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"font-size"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">13</span>)</span>
<span id="cb2-309">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">text</span>(currentCat<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-310">  </span>
<span id="cb2-311">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Size scale</span></span>
<span id="cb2-312">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> sizeScale <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> d3<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scaleSqrt</span>()</span>
<span id="cb2-313">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">domain</span>([<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> d3<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(companies<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> d <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=&gt;</span> d<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">marketCap</span>)])</span>
<span id="cb2-314">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">range</span>([<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">32</span>])<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-315">  </span>
<span id="cb2-316">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Tooltip (create once)</span></span>
<span id="cb2-317">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> tooltip <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> svg<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">append</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"g"</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">style</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"display"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">style</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pointer-events"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-318">  tooltip<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">append</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rect"</span>)</span>
<span id="cb2-319">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"fill"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#1e293b"</span>)</span>
<span id="cb2-320">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rx"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span>
<span id="cb2-321">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"stroke"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#475569"</span>)</span>
<span id="cb2-322">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"stroke-width"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-323">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> tooltipText <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> tooltip<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">append</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>)</span>
<span id="cb2-324">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"fill"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>)</span>
<span id="cb2-325">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"font-size"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">11</span>)</span>
<span id="cb2-326">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text-anchor"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"middle"</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-327">  </span>
<span id="cb2-328">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Draw each segment as a ROW (stacked vertically)</span></span>
<span id="cb2-329">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">let</span> cumulativeY <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> headerHeight<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-330">  </span>
<span id="cb2-331">  segments<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">forEach</span>((seg<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> rowIdx) <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=&gt;</span> {</span>
<span id="cb2-332">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> rowY <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> cumulativeY<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-333">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> segCompanies <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> grouped<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get</span>(seg) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">||</span> []<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-334">    segCompanies<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sort</span>((a<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> b) <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=&gt;</span> b<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">marketCap</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> a<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">marketCap</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-335">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> currentSegmentHeight <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> segmentHeights[rowIdx]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-336">    </span>
<span id="cb2-337">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Row background</span></span>
<span id="cb2-338">    svg<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">append</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rect"</span>)</span>
<span id="cb2-339">      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>)</span>
<span id="cb2-340">      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"y"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> rowY <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span>
<span id="cb2-341">      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"width"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> width <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>)</span>
<span id="cb2-342">      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"height"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> currentSegmentHeight <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)</span>
<span id="cb2-343">      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"fill"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colorScale</span>(seg))</span>
<span id="cb2-344">      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"opacity"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.06</span>)</span>
<span id="cb2-345">      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rx"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-346">    </span>
<span id="cb2-347">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Segment header (centered at top of row)</span></span>
<span id="cb2-348">    svg<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">append</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>)</span>
<span id="cb2-349">      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> width <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span>
<span id="cb2-350">      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"y"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> rowY <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">25</span>)</span>
<span id="cb2-351">      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text-anchor"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"middle"</span>)</span>
<span id="cb2-352">      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"fill"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colorScale</span>(seg))</span>
<span id="cb2-353">      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"font-size"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">14</span>)</span>
<span id="cb2-354">      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"font-weight"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">600</span>)</span>
<span id="cb2-355">      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">text</span>(seg)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-356">    </span>
<span id="cb2-357">    svg<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">append</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>)</span>
<span id="cb2-358">      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> width <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span>
<span id="cb2-359">      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"y"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> rowY <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">42</span>)</span>
<span id="cb2-360">      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text-anchor"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"middle"</span>)</span>
<span id="cb2-361">      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"fill"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#64748b"</span>)</span>
<span id="cb2-362">      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"font-size"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)</span>
<span id="cb2-363">      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">text</span>(currentCat<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">descriptions</span>[seg])<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-364">    </span>
<span id="cb2-365">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Bubbles - wrap to multiple rows if needed</span></span>
<span id="cb2-366">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> maxBubblesPerRow <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-367">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> bubbleAreaWidth <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> width <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">60</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-368">    </span>
<span id="cb2-369">    segCompanies<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">forEach</span>((company<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> i) <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=&gt;</span> {</span>
<span id="cb2-370">      <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> bubbleRowIndex <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Math</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">floor</span>(i <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> maxBubblesPerRow)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-371">      <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> indexInRow <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> i <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%</span> maxBubblesPerRow<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-372">      <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> companiesInThisRow <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Math</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">min</span>(maxBubblesPerRow<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> segCompanies<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">length</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> bubbleRowIndex <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> maxBubblesPerRow)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-373">      </span>
<span id="cb2-374">      <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> r <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sizeScale</span>(company<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">marketCap</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-375">      <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> bubbleY <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> rowY <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> rowHeaderHeight <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> bubbleRowIndex <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> bubbleRowHeight <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">35</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-376">      <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> spacing <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> bubbleAreaWidth <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> (companiesInThisRow <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-377">      <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> spacing <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> (indexInRow <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-378">      </span>
<span id="cb2-379">      <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> g <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> svg<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">append</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"g"</span>)</span>
<span id="cb2-380">        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"transform"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">`translate(</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">${</span>x<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">, </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">${</span>bubbleY<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">)`</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-381">      </span>
<span id="cb2-382">      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Bubble</span></span>
<span id="cb2-383">      g<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">append</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"circle"</span>)</span>
<span id="cb2-384">        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"r"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> r)</span>
<span id="cb2-385">        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"fill"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colorScale</span>(seg))</span>
<span id="cb2-386">        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"opacity"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.85</span>)</span>
<span id="cb2-387">        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"stroke"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colorScale</span>(seg))</span>
<span id="cb2-388">        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"stroke-width"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.5</span>)</span>
<span id="cb2-389">        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">style</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cursor"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pointer"</span>)</span>
<span id="cb2-390">        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">on</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mouseenter"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">event</span>) {</span>
<span id="cb2-391">          d3<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">this</span>)</span>
<span id="cb2-392">            <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">transition</span>()<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">duration</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">150</span>)</span>
<span id="cb2-393">            <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"opacity"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb2-394">            <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"stroke-width"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span>
<span id="cb2-395">            <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"r"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> r <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.1</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-396">          </span>
<span id="cb2-397">          tooltip<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">style</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"display"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">null</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-398">          tooltipText<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">text</span>(<span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">`</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">${</span>company<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;"> â€¢ $</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">${</span>company<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">marketCap</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">B`</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-399">          <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> bbox <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> tooltipText<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">node</span>()<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">getBBox</span>()<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-400">          tooltip<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rect"</span>)</span>
<span id="cb2-401">            <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> bbox<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>)</span>
<span id="cb2-402">            <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"y"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> bbox<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>)</span>
<span id="cb2-403">            <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"width"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> bbox<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">width</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>)</span>
<span id="cb2-404">            <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"height"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> bbox<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">height</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-405">          tooltip<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"transform"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">`translate(</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">${</span>x<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">, </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">${</span>bubbleY <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> r <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">)`</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-406">        })</span>
<span id="cb2-407">        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">on</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mouseleave"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>() {</span>
<span id="cb2-408">          d3<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">this</span>)</span>
<span id="cb2-409">            <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">transition</span>()<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">duration</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">150</span>)</span>
<span id="cb2-410">            <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"opacity"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.85</span>)</span>
<span id="cb2-411">            <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"stroke-width"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.5</span>)</span>
<span id="cb2-412">            <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"r"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> r)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-413">          tooltip<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">style</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"display"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-414">        })<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-415">      </span>
<span id="cb2-416">      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Company name inside bubble (only if big enough)</span></span>
<span id="cb2-417">      <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (r <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">14</span>) {</span>
<span id="cb2-418">        g<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">append</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>)</span>
<span id="cb2-419">          <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text-anchor"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"middle"</span>)</span>
<span id="cb2-420">          <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dy"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0.35em"</span>)</span>
<span id="cb2-421">          <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"fill"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>)</span>
<span id="cb2-422">          <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"font-size"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Math</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">min</span>(r <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.45</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>))</span>
<span id="cb2-423">          <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"font-weight"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">500</span>)</span>
<span id="cb2-424">          <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">style</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pointer-events"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>)</span>
<span id="cb2-425">          <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">text</span>(company<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">length</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">?</span> company<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">slice</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".."</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> company<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-426">      }</span>
<span id="cb2-427">    })<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-428">    </span>
<span id="cb2-429">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Update cumulative Y for next segment</span></span>
<span id="cb2-430">    cumulativeY <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+=</span> currentSegmentHeight<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-431">  })<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-432">  </span>
<span id="cb2-433">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Legend at bottom</span></span>
<span id="cb2-434">  svg<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">append</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>)</span>
<span id="cb2-435">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>)</span>
<span id="cb2-436">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"y"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> height <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)</span>
<span id="cb2-437">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"fill"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#64748b"</span>)</span>
<span id="cb2-438">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"font-size"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)</span>
<span id="cb2-439">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">text</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"KÃ­ch thÆ°á»›c bubble = Market Cap (tá»· USD)"</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-440">  </span>
<span id="cb2-441">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> svg<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">node</span>()<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-442">}</span></code></pre></div></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-2" data-nodetype="declaration">

</div>
</div>
</div>
</section>
<section id="mÃ´-hÃ¬nh-bÃ¡n-hÃ ng-vÃ -tiáº¿p-cáº­n-thá»‹-trÆ°á»ng" class="level2">
<h2 class="anchored" data-anchor-id="mÃ´-hÃ¬nh-bÃ¡n-hÃ ng-vÃ -tiáº¿p-cáº­n-thá»‹-trÆ°á»ng">1. MÃ´ HÃ¬nh BÃ¡n HÃ ng vÃ  Tiáº¿p Cáº­n Thá»‹ TrÆ°á»ng</h2>
<p><em>(Sales and Go-to-Market Model)</em></p>
<p>Äá»‹nh nghÄ©a: CÃ¡ch báº¡n bÃ¡n hÃ ng vÃ  tiáº¿p cáº­n khÃ¡ch hÃ ng. MÃ´ hÃ¬nh nÃ y thÆ°á»ng Ä‘Æ°á»£c quy Ä‘á»‹nh bá»Ÿi GiÃ¡ trá»‹ há»£p Ä‘á»“ng hÃ ng nÄƒm (ACV).</p>
<blockquote class="blockquote">
<p><strong>Nguá»“n tham kháº£o vÃ  TÃ i liá»‡u chuyÃªn sÃ¢u:</strong></p>
<ul>
<li><a href="https://www.zoominfo.com/solutions/sales"><strong>ZoomInfo</strong></a>: Ná»n táº£ng dá»¯ liá»‡u B2B vÃ  trÃ­ tuá»‡ doanh nghiá»‡p (GTM Intelligence) hÃ ng Ä‘áº§u tháº¿ giá»›i. ÄÃ¢y lÃ  â€œtiÃªu chuáº©n vÃ ngâ€ vá» dá»¯ liá»‡u khÃ¡ch hÃ ng mÃ  cÃ¡c Ä‘á»™i ngÅ© Sales/Marketing táº¡i cÃ¡c táº­p Ä‘oÃ n lá»›n (Enterprise) sá»­ dá»¥ng Ä‘á»ƒ xÃ¢y dá»±ng chiáº¿n lÆ°á»£c tiáº¿p cáº­n thá»‹ trÆ°á»ng.</li>
<li><a href="https://stripe.com/guides/atlas/business-of-saas"><strong>Stripe Atlas - Business of SaaS</strong></a>: ChÆ°Æ¡ng trÃ¬nh khá»Ÿi nghiá»‡p cá»§a Stripe - ná»n táº£ng thanh toÃ¡n lá»›n nháº¥t cho kinh táº¿ Internet. TÃ i liá»‡u tá»« Stripe Atlas Ä‘Æ°á»£c tá»•ng há»£p tá»« dá»¯ liá»‡u thá»±c táº¿ cá»§a hÃ ng triá»‡u startup vÃ  lÃ  â€œsÃ¡ch gá»‘i Ä‘áº§u giÆ°á»ngâ€ cho cÃ¡c founder khi báº¯t Ä‘áº§u xÃ¢y dá»±ng mÃ´ hÃ¬nh tÃ i chÃ­nh.</li>
<li><a href="https://www.hubifi.com/blog/b2b-saas-business-model"><strong>HubiFi - B2B SaaS Guide</strong></a>: ÄÆ¡n vá»‹ chuyÃªn cung cáº¥p giáº£i phÃ¡p CFO áº£o vÃ  tá»± Ä‘á»™ng hÃ³a tÃ i chÃ­nh cho cÃ¡c cÃ´ng ty SaaS. CÃ¡c bÃ i viáº¿t cá»§a HubiFi Ä‘i sÃ¢u vÃ o chi tiáº¿t ká»¹ thuáº­t váº­n hÃ nh, cÃ¡c chá»‰ sá»‘ tÃ i chÃ­nh (metrics) vÃ  cáº¥u trÃºc lá»£i nhuáº­n cá»¥ thá»ƒ cho mÃ´ hÃ¬nh B2B.</li>
</ul>
</blockquote>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Loáº¡i mÃ´ hÃ¬nh</th>
<th style="text-align: left;">Benchmark ACV (GiÃ¡ trá»‹ HÄ/nÄƒm)</th>
<th style="text-align: left;">Äáº·c Ä‘iá»ƒm Váº­n hÃ nh</th>
<th style="text-align: left;">VÃ­ dá»¥ Äiá»ƒn hÃ¬nh</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Self-Service</strong><br>(Tá»± phá»¥c vá»¥)</td>
<td style="text-align: left;"><strong>Tháº¿ giá»›i:</strong> &lt; $1,000<br><strong>Viá»‡t Nam:</strong> &lt; 2 triá»‡u VNÄ</td>
<td style="text-align: left;">Ãt tÆ°Æ¡ng tÃ¡c, tá»± Ä‘á»™ng hÃ³a hoÃ n toÃ n (Product-led). KhÃ¡ch hÃ ng tá»± Ä‘Äƒng kÃ½, dÃ¹ng thá»­ vÃ  thanh toÃ¡n qua cá»•ng online.</td>
<td style="text-align: left;"><strong>QT:</strong> Canva, Notion, Zoom (Pro)<br><strong>VN:</strong> Skindex AI, LadiPage (Starter), Elsa Speak</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Transactional</strong><br>(Giao dá»‹ch)</td>
<td style="text-align: left;"><strong>Tháº¿ giá»›i:</strong> $1k - $100k<br><strong>Viá»‡t Nam:</strong> 2tr - 200 triá»‡u VNÄ</td>
<td style="text-align: left;">Äá»™i ngÅ© sales ná»™i bá»™ (Inside Sales/Telesales), quy trÃ¬nh bÃ¡n hÃ ng ngáº¯n (2 tuáº§n - 2 thÃ¡ng), há»£p Ä‘á»“ng chuáº©n hÃ³a.</td>
<td style="text-align: left;"><strong>QT:</strong> HubSpot (Pro), Zendesk<br><strong>VN:</strong> KiotViet, Base.vn, MISA AMIS</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Enterprise</strong><br>(Doanh nghiá»‡p lá»›n)</td>
<td style="text-align: left;"><strong>Tháº¿ giá»›i:</strong> &gt; $100,000<br><strong>Viá»‡t Nam:</strong> &gt; 200 triá»‡u VNÄ</td>
<td style="text-align: left;">TÆ°Æ¡ng tÃ¡c cao (High-touch), Ä‘á»™i ngÅ© Field Sales gáº·p trá»±c tiáº¿p. Chu ká»³ dÃ i (6-12 thÃ¡ng), Ä‘áº¥u tháº§u, tÃ¹y chá»‰nh sÃ¢u.</td>
<td style="text-align: left;"><strong>QT:</strong> Salesforce, Workday, SAP<br><strong>VN:</strong> FPT Smart Cloud, Viettel Solutions, Base (Enterprise)</td>
</tr>
</tbody>
</table>
</section>
<section id="chiáº¿n-lÆ°á»£c-tÄƒng-trÆ°á»Ÿng-vÃ -thu-hÃºt-khÃ¡ch-hÃ ng" class="level2">
<h2 class="anchored" data-anchor-id="chiáº¿n-lÆ°á»£c-tÄƒng-trÆ°á»Ÿng-vÃ -thu-hÃºt-khÃ¡ch-hÃ ng">2. Chiáº¿n LÆ°á»£c TÄƒng TrÆ°á»Ÿng vÃ  Thu HÃºt KhÃ¡ch HÃ ng</h2>
<p><em>(Growth Strategy and Acquisition Motion)</em></p>
<p>Äá»™ng lá»±c tÄƒng trÆ°á»Ÿng chÃ­nh vÃ  chiáº¿n lÆ°á»£c thu hÃºt khÃ¡ch hÃ ng.</p>
<blockquote class="blockquote">
<p><strong>Nguá»“n tham kháº£o vÃ  TÃ i liá»‡u chuyÃªn sÃ¢u:</strong></p>
<ul>
<li><a href="https://productled.com/blog/product-led-growth-definition"><strong>ProductLed</strong></a>: Cá»™ng Ä‘á»“ng vÃ  tá»• chá»©c Ä‘Ã o táº¡o lá»›n nháº¥t tháº¿ giá»›i chuyÃªn vá» Product-Led Growth. Wes Bush (nhÃ  sÃ¡ng láº­p) lÃ  tÃ¡c giáº£ cuá»‘n sÃ¡ch â€œProduct-Led Growthâ€ - cuá»‘n sÃ¡ch giÃ¡o khoa nháº­p mÃ´n cho báº¥t ká»³ ai muá»‘n chuyá»ƒn Ä‘á»•i tá»« Sales-led sang Product-led.</li>
<li><a href="https://www.paddle.com/resources/product-led-growth"><strong>Paddle (ProfitWell)</strong></a>: Ná»n táº£ng háº¡ táº§ng thanh toÃ¡n cho SaaS. Sau khi mua láº¡i ProfitWell, Paddle sá»Ÿ há»¯u kho dá»¯ liá»‡u khá»•ng lá»“ vá» chá»‰ sá»‘ tÃ i chÃ­nh cá»§a hÆ¡n 30.000 cÃ´ng ty SaaS, giÃºp cÃ¡c bÃ i phÃ¢n tÃ­ch cá»§a há» luÃ´n dá»±a trÃªn sá»‘ liá»‡u thá»±c táº¿ (data-backed) thay vÃ¬ lÃ½ thuyáº¿t suÃ´ng.</li>
<li><a href="https://openviewpartners.com/blog"><strong>OpenView Partners</strong></a>: Quá»¹ Ä‘áº§u tÆ° máº¡o hiá»ƒm (VC) Ä‘Æ°á»£c coi lÃ  â€œcha Ä‘áº»â€ Ä‘Ã£ khai sinh vÃ  phá»• biáº¿n thuáº­t ngá»¯ â€œProduct-Led Growthâ€ ra thá»‹ trÆ°á»ng. CÃ¡c bÃ¡o cÃ¡o â€œSaaS Benchmarksâ€ hÃ ng nÄƒm cá»§a OpenView lÃ  thÆ°á»›c Ä‘o chuáº©n má»±c (industry standard) Ä‘á»ƒ cÃ¡c startup Ä‘á»‹nh vá»‹ tá»‘c Ä‘á»™ tÄƒng trÆ°á»Ÿng cá»§a mÃ¬nh so vá»›i thá»‹ trÆ°á»ng.</li>
</ul>
</blockquote>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Chiáº¿n lÆ°á»£c</th>
<th style="text-align: left;">Äá»™ng lá»±c chÃ­nh</th>
<th style="text-align: left;">Äáº·c Ä‘iá»ƒm</th>
<th style="text-align: left;">VÃ­ dá»¥ Ä‘iá»ƒn hÃ¬nh</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Product-Led Growth</strong><br>(PLG)</td>
<td style="text-align: left;">Sáº£n pháº©m</td>
<td style="text-align: left;">MÃ´ hÃ¬nh Freemium/DÃ¹ng thá»­, vÃ²ng láº·p lan truyá»n (viral loops), onboarding tá»± phá»¥c vá»¥.</td>
<td style="text-align: left;">Slack, Zoom, Figma, Dropbox</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Sales-Led Growth</strong><br>(SLG)</td>
<td style="text-align: left;">Äá»™i ngÅ© BÃ¡n hÃ ng</td>
<td style="text-align: left;">YÃªu cáº§u Demo trÆ°á»›c khi dÃ¹ng, cÃ¡c thÆ°Æ¡ng vá»¥ doanh nghiá»‡p phá»©c táº¡p, chu ká»³ dÃ i.</td>
<td style="text-align: left;">Salesforce, Oracle, SAP, Workday</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Marketing-Led Growth</strong><br>(MLG)</td>
<td style="text-align: left;">Chiáº¿n dá»‹ch Marketing</td>
<td style="text-align: left;">Content marketing, SEO, táº­p trung vÃ o viá»‡c táº¡o Lead (Inbound) Ä‘á»ƒ chuyá»ƒn cho Sales.</td>
<td style="text-align: left;">HubSpot (ban Ä‘áº§u), Mailchimp, SEMrush</td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Hybrid Motion (Káº¿t há»£p)
</div>
</div>
<div class="callout-body-container callout-body">
<p>Xu hÆ°á»›ng hiá»‡n nay lÃ  Product-led cho thu hÃºt khÃ¡ch hÃ ng vÃ  Sales-led cho má»Ÿ rá»™ng (tiáº¿p cáº­n Ä‘a kÃªnh). VÃ­ dá»¥: Atlassian, Datadog, Notion.</p>
</div>
</div>
</section>
<section id="mÃ´-hÃ¬nh-Ä‘á»‹nh-giÃ¡-vÃ -doanh-thu" class="level2">
<h2 class="anchored" data-anchor-id="mÃ´-hÃ¬nh-Ä‘á»‹nh-giÃ¡-vÃ -doanh-thu">3. MÃ´ HÃ¬nh Äá»‹nh GiÃ¡ vÃ  Doanh Thu</h2>
<p><em>(Pricing and Revenue Model)</em></p>
<p>CÃ¡ch báº¡n tÃ­nh phÃ­ khÃ¡ch hÃ ng cho pháº§n má»m.</p>
<blockquote class="blockquote">
<p><strong>Nguá»“n tham kháº£o vÃ  TÃ i liá»‡u chuyÃªn sÃ¢u:</strong></p>
<ul>
<li><strong><a href="https://openviewpartners.com/usage-based-pricing/">OpenView - Usage-Based Pricing</a></strong>: Quá»¹ Ä‘áº§u tÆ° máº¡o hiá»ƒm (VC) Ä‘Ã£ Ä‘á»‹nh hÃ¬nh vÃ  phá»• cáº­p khÃ¡i niá»‡m â€œProduct-Led Growthâ€. OpenView lÃ  tÃ¡c giáº£ cá»§a cuá»‘n â€œUsage-Based Pricing Playbookâ€ - tÃ i liá»‡u kinh Ä‘iá»ƒn Ä‘Æ°á»£c coi lÃ  sÃ¡ch giÃ¡o khoa cho cÃ¡c cÃ´ng ty SaaS hiá»‡n Ä‘áº¡i muá»‘n chuyá»ƒn dá»‹ch sang mÃ´ hÃ¬nh Ä‘á»‹nh giÃ¡ theo má»©c tiÃªu thá»¥ (Pay-as-you-go).<br>
</li>
<li><strong><a href="https://www.codica.com/blog/saas-business-model/">Codica - SaaS Business Model</a></strong>: ÄÆ¡n vá»‹ tÆ° váº¥n vÃ  phÃ¡t triá»ƒn pháº§n má»m chuyÃªn sÃ¢u cho cÃ¡c Startup. CÃ¡c tÃ i liá»‡u cá»§a Codica cung cáº¥p gÃ³c nhÃ¬n thá»±c chiáº¿n (builderâ€™s perspective), giÃºp phÃ¢n tÃ­ch Æ°u/nhÆ°á»£c Ä‘iá»ƒm ká»¹ thuáº­t cá»§a tá»«ng mÃ´ hÃ¬nh doanh thu vÃ  cÃ¡ch lá»±a chá»n chiáº¿n lÆ°á»£c giÃ¡ phÃ¹ há»£p ngay tá»« giai Ä‘oáº¡n xÃ¢y dá»±ng sáº£n pháº©m.<br>
</li>
<li><strong><a href="https://learn.g2.com/product-led-saas-pricing">G2 - SaaS Pricing Strategy</a></strong>: SÃ n thÆ°Æ¡ng máº¡i vÃ  Ä‘Ã¡nh giÃ¡ pháº§n má»m lá»›n nháº¥t tháº¿ giá»›i. Dá»¯ liá»‡u cá»§a G2 pháº£n Ã¡nh â€œtiáº¿ng nÃ³i thá»‹ trÆ°á»ngâ€ dá»±a trÃªn hÃ ng triá»‡u Ä‘Ã¡nh giÃ¡ tá»« ngÆ°á»i dÃ¹ng tháº­t, giÃºp Data Analyst náº¯m báº¯t Ä‘Æ°á»£c cÃ¡c xu hÆ°á»›ng Ä‘á»‹nh giÃ¡ Ä‘ang thá»‹nh hÃ nh vÃ  Ä‘Æ°á»£c khÃ¡ch hÃ ng cháº¥p nháº­n rá»™ng rÃ£i nháº¥t.</li>
</ul>
</blockquote>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">MÃ´ hÃ¬nh</th>
<th style="text-align: left;">Äáº·c Ä‘iá»ƒm</th>
<th style="text-align: left;">VÃ­ dá»¥ Ä‘iá»ƒn hÃ¬nh</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Freemium</strong></td>
<td style="text-align: left;">GÃ³i miá»…n phÃ­ giá»›i háº¡n, tráº£ phÃ­ cho tÃ­nh nÄƒng cao cáº¥p.</td>
<td style="text-align: left;">Spotify, Slack</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Per-User</strong></td>
<td style="text-align: left;">TÃ­nh phÃ­ theo Ä‘áº§u ngÆ°á»i/gháº¿.</td>
<td style="text-align: left;">Zoom, Microsoft 365</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Usage-Based</strong></td>
<td style="text-align: left;">Tráº£ tiá»n theo má»©c sá»­ dá»¥ng (API calls, dung lÆ°á»£ng).</td>
<td style="text-align: left;">AWS, Twilio</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Tiered Pricing</strong></td>
<td style="text-align: left;">CÃ¡c gÃ³i theo cáº¥p Ä‘á»™ (Tá»‘t / Tá»‘t hÆ¡n / Tá»‘t nháº¥t).</td>
<td style="text-align: left;">Mailchimp, Shopify</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Flat-Rate</strong></td>
<td style="text-align: left;">Má»™t má»©c giÃ¡ cá»‘ Ä‘á»‹nh trá»n gÃ³i.</td>
<td style="text-align: left;">Basecamp</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Transactional</strong></td>
<td style="text-align: left;">PhÃ­ trÃªn má»—i giao dá»‹ch.</td>
<td style="text-align: left;">PayPal, Stripe</td>
</tr>
</tbody>
</table>
</section>
<section id="Ä‘á»‹nh-hÆ°á»›ng-thá»‹-trÆ°á»ng-vÃ -tiáº¿p-cáº­n-ngÃ nh" class="level2">
<h2 class="anchored" data-anchor-id="Ä‘á»‹nh-hÆ°á»›ng-thá»‹-trÆ°á»ng-vÃ -tiáº¿p-cáº­n-ngÃ nh">4. Äá»‹nh HÆ°á»›ng Thá»‹ TrÆ°á»ng vÃ  Tiáº¿p Cáº­n NgÃ nh</h2>
<p><em>(Market Focus and Industry Approach)</em></p>
<blockquote class="blockquote">
<p><strong>Nguá»“n tham kháº£o vÃ  TÃ i liá»‡u chuyÃªn sÃ¢u:</strong></p>
<ul>
<li><strong><a href="https://flgpartners.com/saas-industry-centric-business-models-horizontal-vertical/">FLG Partners - Horizontal vs Vertical SaaS</a></strong>: Má»™t trong nhá»¯ng cÃ´ng ty tÆ° váº¥n GiÃ¡m Ä‘á»‘c TÃ i chÃ­nh (CFO) hÃ ng Ä‘áº§u táº¡i Thung lÅ©ng Silicon, chuyÃªn há»— trá»£ cÃ¡c startup trong giai Ä‘oáº¡n IPO vÃ  M&amp;A. GÃ³c nhÃ¬n cá»§a FLG Partners Ä‘áº·c biá»‡t giÃ¡ trá»‹ vÃ¬ há» khÃ´ng chá»‰ phÃ¢n loáº¡i mÃ´ hÃ¬nh, mÃ  cÃ²n chá»‰ ra sá»± khÃ¡c biá»‡t cá»‘t yáº¿u trong cáº¥u trÃºc tÃ i chÃ­nh, chi phÃ­ bÃ¡n hÃ ng (CAC) vÃ  tiá»m nÄƒng lá»£i nhuáº­n giá»¯a SaaS Chiá»u ngang (Horizontal) vÃ  SaaS Chiá»u dá»c (Vertical).</li>
</ul>
</blockquote>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Loáº¡i hÃ¬nh</th>
<th style="text-align: left;">Äáº·c Ä‘iá»ƒm</th>
<th style="text-align: left;">VÃ­ dá»¥ Ä‘iá»ƒn hÃ¬nh</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Horizontal SaaS</strong><br>(SaaS ngang)</td>
<td style="text-align: left;">Phá»¥c vá»¥ nhiá»u ngÃ nh vá»›i giáº£i phÃ¡p Ä‘a má»¥c Ä‘Ã­ch.</td>
<td style="text-align: left;">Salesforce, Slack, Zoom, Google Workspace</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Vertical SaaS</strong><br>(SaaS dá»c)</td>
<td style="text-align: left;">Giáº£i phÃ¡p chuyÃªn biá»‡t cho ngÃ nh cá»¥ thá»ƒ.</td>
<td style="text-align: left;">Veeva (dÆ°á»£c pháº©m), Toast (nhÃ  hÃ ng), Procore (xÃ¢y dá»±ng)</td>
</tr>
</tbody>
</table>
</section>
<section id="phÃ¢n-loáº¡i-khÃ¡c" class="level2">
<h2 class="anchored" data-anchor-id="phÃ¢n-loáº¡i-khÃ¡c">PhÃ¢n loáº¡i khÃ¡c</h2>
<p>NgoÃ i nhá»¯ng cÃ¡ch phÃ¢n loáº¡i nÃ y, cÃ³ thá»ƒ phÃ¢n loáº¡i theo nhá»¯ng cÃ¡ch khÃ¡c nhÆ° sau (tuy nhiÃªn, nhá»¯ng cÃ¡ch nÃ y thá»±c táº¿ lÃ  chia nhá» hÆ¡n tá»« nhá»¯ng cÃ¡ch trÃªn, nÃªn vá» pháº§n phÃ¢n tÃ­ch metrics chÃºng ta sáº½ khÃ´ng sá»­ dá»¥ng)</p>
<section id="phÃ¢n-khÃºc-khÃ¡ch-hÃ ng-má»¥c-tiÃªu" class="level3">
<h3 class="anchored" data-anchor-id="phÃ¢n-khÃºc-khÃ¡ch-hÃ ng-má»¥c-tiÃªu">1. PhÃ¢n KhÃºc KhÃ¡ch HÃ ng Má»¥c TiÃªu</h3>
<p><em>(Target Customer Segment)</em></p>
<ul>
<li><strong>B2C (Consumer):</strong> CÃ¡ nhÃ¢n. GiÃ¡ tháº¥p, sá»‘ lÆ°á»£ng lá»›n. (Netflix, Canva).</li>
<li><strong>B2B SMB (Small Biz):</strong> 1-100 nhÃ¢n viÃªn. (QuickBooks, Mailchimp).</li>
<li><strong>B2B Mid-Market:</strong> 100-1,000 nhÃ¢n viÃªn. (HubSpot, Zendesk).</li>
<li><strong>B2B Enterprise:</strong> &gt;1,000 nhÃ¢n viÃªn. (Salesforce, Oracle).</li>
</ul>
</section>
<section id="giÃ¡-trá»‹-cá»‘t-lÃµi-vÃ -danh-má»¥c-giáº£i-phÃ¡p" class="level3">
<h3 class="anchored" data-anchor-id="giÃ¡-trá»‹-cá»‘t-lÃµi-vÃ -danh-má»¥c-giáº£i-phÃ¡p">2. GiÃ¡ Trá»‹ Cá»‘t LÃµi vÃ  Danh Má»¥c Giáº£i PhÃ¡p</h3>
<p><em>(Value Proposition and Solution Category)</em></p>
<p>Chá»©c nÄƒng chÃ­nh vÃ  giáº£i phÃ¡p mÃ  pháº§n má»m cung cáº¥p.</p>
<ul>
<li><strong>Productivity &amp; Collaboration:</strong> Quáº£n lÃ½ cÃ´ng viá»‡c, giao tiáº¿p (Slack, Notion).</li>
<li><strong>CRM &amp; Sales:</strong> Quáº£n lÃ½ quan há»‡ khÃ¡ch hÃ ng (Salesforce, HubSpot).</li>
<li><strong>Marketing Automation:</strong> Email, Lead Gen (Mailchimp, Marketo).</li>
<li><strong>HR &amp; Talent:</strong> Tuyá»ƒn dá»¥ng, báº£ng lÆ°Æ¡ng (Workday, BambooHR).</li>
<li><strong>Finance &amp; Accounting:</strong> Káº¿ toÃ¡n, hÃ³a Ä‘Æ¡n (QuickBooks, Stripe).</li>
<li><strong>Dev Tools:</strong> Háº¡ táº§ng, APIs (AWS, GitHub).</li>
<li><strong>E-commerce:</strong> BÃ¡n hÃ ng trá»±c tuyáº¿n (Shopify, WooCommerce).</li>
<li><strong>Design Tools:</strong> Thiáº¿t káº¿, sÃ¡ng táº¡o (Figma, Canva).</li>
<li><strong>Data Analytics:</strong> BI, kho dá»¯ liá»‡u (Tableau, Snowflake).</li>
<li><strong>Customer Support:</strong> Help desk (Zendesk, Intercom).</li>
</ul>
<hr>
</section>
</section>
<section id="nhá»¯ng-Ä‘iá»ƒm-quan-trá»ng-cáº§n-nhá»›" class="level2">
<h2 class="anchored" data-anchor-id="nhá»¯ng-Ä‘iá»ƒm-quan-trá»ng-cáº§n-nhá»›">ğŸ’¡ Nhá»¯ng Äiá»ƒm Quan Trá»ng Cáº§n Nhá»›</h2>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><strong>Tiáº¿p cáº­n káº¿t há»£p lÃ  xu hÆ°á»›ng:</strong> Háº§u háº¿t cÃ¡c cÃ´ng ty SaaS thÃ nh cÃ´ng sá»­ dá»¥ng phÆ°Æ¡ng phÃ¡p káº¿t há»£p (vÃ­ dá»¥: PLG Ä‘á»ƒ thu hÃºt, Sales-Led Ä‘á»ƒ má»Ÿ rá»™ng).</li>
<li><strong>Kinh táº¿ Ä‘Æ¡n vá»‹ (Unit Economics):</strong> CÃ¡ch báº¡n phÃ¢n loáº¡i cÃ´ng ty quyáº¿t Ä‘á»‹nh cáº¥u trÃºc chi phÃ­ (CAC) vÃ  giÃ¡ trá»‹ vÃ²ng Ä‘á»i (LTV).</li>
<li><strong>Sá»± tiáº¿n hÃ³a:</strong> CÃ¡c cÃ´ng ty thÆ°á»ng báº¯t Ä‘áº§u vá»›i Self-Service vÃ  chuyá»ƒn dáº§n sang Enterprise khi trÆ°á»Ÿng thÃ nh.</li>
<li><strong>Sá»± phÃ¹ há»£p cá»§a mÃ´ hÃ¬nh Ä‘á»‹nh giÃ¡:</strong> Pháº£i dá»±a trÃªn â€œValue Metricâ€ - cÃ¡ch mÃ  khÃ¡ch hÃ ng nháº­n Ä‘Æ°á»£c giÃ¡ trá»‹ thá»±c sá»± tá»« sáº£n pháº©m.</li>
</ol>
</div>
</div>
<hr>
</section>
<section id="next-step" class="level2">
<h2 class="anchored" data-anchor-id="next-step">Next step</h2>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Báº¡n xÃ¡c Ä‘á»‹nh cÃ´ng ty cá»§a mÃ¬nh Ä‘ang cÃ³ mÃ´ hÃ¬nh nhÆ° tháº¿ nÃ o vÃ  tá»« Ä‘Ã³ tÃ¬m ra frameword phÃ¢n tÃ­ch phÃ¹ há»£p trong pháº§n 2.</p>
</div>
</div>


</section>

 ]]></description>
  <category>SaaS</category>
  <category>Business Model</category>
  <category>Strategy</category>
  <category>Startup</category>
  <guid>https://pakota159.github.io/posts/saas-metrics-1/</guid>
  <pubDate>Fri, 09 Jan 2026 17:00:00 GMT</pubDate>
  <media:content url="https://pakota159.github.io/img/saas-metrics/saas-framework.png" medium="image" type="image/png"/>
</item>
<item>
  <title>(Háº§u nhÆ°) Táº¥t cáº£ nhá»¯ng thá»© báº¡n cáº§n biáº¿t vá» A/B Testing</title>
  <dc:creator>Cuong Pham</dc:creator>
  <link>https://pakota159.github.io/posts/ab-testing/</link>
  <description><![CDATA[ 




<section id="Ä‘á»‘i-tÆ°á»£ng-vÃ -giá»›i-háº¡n-bÃ i-viáº¿t" class="level2">
<h2 class="anchored" data-anchor-id="Ä‘á»‘i-tÆ°á»£ng-vÃ -giá»›i-háº¡n-bÃ i-viáº¿t">Äá»‘i tÆ°á»£ng vÃ  giá»›i háº¡n bÃ i viáº¿t</h2>
<p>Nhá» cÃ¡c gÃ³p Ã½ tá»« bÃ i viáº¿t trÆ°á»›c, trong bÃ i nÃ y mÃ¬nh muá»‘n Ä‘á» cáº­p Ä‘áº¿n Ä‘á»‘i tÆ°á»£ng vÃ  giá»›i háº¡n ná»™i dung cá»§a bÃ i viáº¿t nÃ y:</p>
<ul>
<li>BÃ i viáº¿t chá»§ yáº¿u dÃ nh cho nhá»¯ng ngÆ°á»i Ä‘Ã£ cÃ³ kiáº¿n thá»©c cÆ¡ báº£n vá» xÃ¡c suáº¥t thá»‘ng kÃª, vÃ­ dá»¥ kiáº¿n thá»©c vá» ká»³ vá»ng, phÆ°Æ¡ng sai, Ä‘á»™ lá»‡ch chuáº©n, biáº¿n xÃ¡c suáº¥t ngáº«u nhiÃªn, phÃ¢n phá»‘i máº­t Ä‘á»™ xÃ¡c suáº¥t, Ä‘á»‹nh lÃ½ giá»›i háº¡n trung tÃ¢m, â€¦</li>
<li>Táº­p trung vÃ o á»©ng dá»¥ng A/B Testing trong UI/UX. Máº·c dÃ¹ A/B Testing cÃ³ thá»ƒ Ä‘Æ°á»£c dÃ¹ng cho nhá»¯ng máº£ng khÃ¡c, nhÆ°ng á»Ÿ Ä‘Ã¢y mÃ¬nh chá»‰ vÃ­ dá»¥ trong UI/UX, cÃ¡c báº¡n cÃ³ thá»ƒ tá»± suy ra phÆ°Æ¡ng phÃ¡p trong nhá»¯ng lÄ©nh vá»±c khÃ¡c.</li>
<li>Ná»™i dung Ä‘Æ°á»£c viáº¿t dá»±a trÃªn <em>kiáº¿n thá»©c vÃ  kinh nghiá»‡m cá»§a báº£n thÃ¢n mÃ¬nh</em>, nÃªn <em>cÃ³ thá»ƒ Ä‘Ãºng hoáº·c sai</em> vÃ  <em>chá»‰ mang tÃ­nh tham kháº£o</em>. Náº¿u cÃ¡c báº¡n tháº¥y cÃ³ chá»— nÃ o mÃ¬nh viáº¿t chÆ°a há»£p lÃ½, khÃ´ng chÃ­nh xÃ¡c thÃ¬ hÃ£y bÃ¬nh luáº­n á»Ÿ cuá»‘i bÃ i nhÃ©. MÃ¬nh cáº£m Æ¡n.</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Khi báº¯t Ä‘áº§u viáº¿t bÃ i nÃ y, mÃ¬nh má»›i tÃ¬m hiá»ƒu láº¡i ká»¹ vá» nhá»¯ng yáº¿u tá»‘ toÃ¡n há»c phÃ­a sau.</p>
</div>
</div>
</section>
<section id="phÃ¢n-tÃ­ch-bÃ i-toÃ¡n" class="level2">
<h2 class="anchored" data-anchor-id="phÃ¢n-tÃ­ch-bÃ i-toÃ¡n">PhÃ¢n tÃ­ch bÃ i toÃ¡n</h2>
<p>Giáº£ sá»­, báº¡n Ä‘ang lÃ  cÃ´-founder (hoáº·c chÃº-founder) cá»§a 1 start-up nÃ o Ä‘Ã³. Sáº£n pháº©m cá»§a báº¡n tá»‘t nhÆ°ng báº¡n muá»‘n cáº£i thiá»‡n UI-UX cá»§a nÃ³ Ä‘á»ƒ nÃ³ cÃ³ thá»ƒ tá»‘t hÆ¡n.</p>
<p>Muá»‘n lÃ m cho sáº£n pháº©m tá»‘t hÆ¡n, thÃ¬ báº¡n pháº£i biáº¿t nÃ³ Ä‘ang <strong>khÃ´ng tá»‘t</strong> á»Ÿ chá»— nÃ o Ä‘Ã£.</p>
<p>Äá»ƒ cho cá»¥ thá»ƒ, mÃ¬nh sáº½ thá»­ phÃ¢n tÃ­ch 1 pháº§n UI/UX trang homepage cá»§a Lazada. CÃ¡c phÃ¢n tÃ­ch phÃ­a sau Ä‘á»u lÃ  <em>giáº£ thuyáº¿t</em> vÃ  <em>mang tÃ­nh minh hoáº¡</em> cho Ã½ tÆ°á»Ÿng.</p>
<section id="tá»«-dá»¯-liá»‡u-xÃ¡c-Ä‘á»‹nh-chá»‰-sá»‘-cáº§n-cáº£i-thiá»‡n-xÃ¡c-Ä‘á»‹nh-má»¥c-tiÃªu" class="level3">
<h3 class="anchored" data-anchor-id="tá»«-dá»¯-liá»‡u-xÃ¡c-Ä‘á»‹nh-chá»‰-sá»‘-cáº§n-cáº£i-thiá»‡n-xÃ¡c-Ä‘á»‹nh-má»¥c-tiÃªu">1. Tá»« dá»¯ liá»‡u xÃ¡c Ä‘á»‹nh chá»‰ sá»‘ cáº§n cáº£i thiá»‡n (xÃ¡c Ä‘á»‹nh má»¥c tiÃªu)</h3>
<p>Trong trang homepage cÃ³ ráº¥t nhiá»u pháº§n/section khÃ¡c nhau, vÃ  mÃ¬nh sáº½ thá»­ tÃ­nh toÃ¡n sá»‘ liá»‡u á»Ÿ section Ä‘áº§u tiÃªn â€” cÃ¡i <strong>banner á»Ÿ homepage</strong> nÃ y.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pakota159.github.io/img/abtesting/banner.png" class="img-fluid figure-img"></p>
<figcaption>Banner homepage Lazada</figcaption>
</figure>
</div>
<p>Giáº£ sá»­, báº¡n vÃ o trong data warehouse cá»§a cÃ´ng ty vÃ  query ra 2 thÃ´ng sá»‘ lÃ  <strong>lÆ°á»£t view banner</strong> vÃ  <strong>lÆ°á»£t click banner</strong>.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 12%">
<col style="width: 16%">
<col style="width: 17%">
<col style="width: 53%">
</colgroup>
<thead>
<tr class="header">
<th>section</th>
<th>view_count</th>
<th>click_count</th>
<th>click_rate (click_count / view_count)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>banner</td>
<td>150,000</td>
<td>750</td>
<td>0.5%</td>
</tr>
</tbody>
</table>
<p>Táº¥t nhiÃªn, sá»‘ kia mÃ¬nh bá»‹a ra nÃªn nÃ³ hÆ¡i cá»±c Ä‘oan 1 chÃºt. Ta biáº¿t <code>CTR cá»§a 1 banner quáº£ng cÃ¡o dáº¡ng slider lÃ  khoáº£ng 1%</code> (mÃ¬nh láº¥y sá»‘ tá»« 1 nghiÃªn cá»©u cá»§a Ä‘áº¡i há»c Notre Dame â€” <a href="https://erikrunyon.com/2013/07/carousel-interaction-stats/">Link táº¡i Ä‘Ã¢y</a>, sá»‘ nÃ y cÅ©ng chá»‰ mang tÃ­nh tham kháº£o vÃ¬ mÃ¬nh khÃ´ng biáº¿t sá»‘ phÃ¹ há»£p trong trÆ°á»ng há»£p nÃ y).</p>
<p>VÃ¬ váº­y, tá»· lá»‡ click <code>0.5%</code> á»Ÿ trÃªn lÃ  tháº¥p vÃ  do Ä‘Ã³ <strong>má»¥c tiÃªu lÃ  cáº§n tÃ¬m cÃ¡ch sá»­a banner Ä‘á»ƒ cáº£i thiá»‡n click rate cá»§a banner.</strong></p>
</section>
<section id="dá»±a-vÃ o-kinh-nghiá»‡m-cÃ¡-nhÃ¢n-hoáº·c-heuristic-evaluation-Ä‘á»ƒ-xÃ¡c-Ä‘á»‹nh-váº¥n-Ä‘á»" class="level3">
<h3 class="anchored" data-anchor-id="dá»±a-vÃ o-kinh-nghiá»‡m-cÃ¡-nhÃ¢n-hoáº·c-heuristic-evaluation-Ä‘á»ƒ-xÃ¡c-Ä‘á»‹nh-váº¥n-Ä‘á»">2. Dá»±a vÃ o kinh nghiá»‡m cÃ¡ nhÃ¢n hoáº·c Heuristic Evaluation Ä‘á»ƒ xÃ¡c Ä‘á»‹nh váº¥n Ä‘á»</h3>
<p>Giá» thÃ¬ ta cáº§n phÃ¢n tÃ­ch xem cÃ¡i banner Ä‘ang cÃ³ váº¥n Ä‘á» gÃ¬.</p>
<p>Theo mÃ¬nh thÃ¬ banner Ä‘Ã£ Ä‘Æ°á»£c:</p>
<ul>
<li>Thiáº¿t káº¿ Ä‘áº¹p</li>
<li>MÃ u sáº¯c hÃ i hoÃ </li>
<li>Ná»™i dung liÃªn quan Ä‘áº¿n dá»‹p trung thu sáº¯p tá»›i</li>
<li>Khuyáº¿n mÃ£i cÅ©ng rÃµ rÃ ng</li>
</ul>
<p>Tuy nhiÃªn cÃ³ 1 pháº§n mÃ  tá»› cáº£m tháº¥y hÆ¡i cÃ³ váº¥n Ä‘á» lÃ  nÃºt CTA (Call-to-Action) <code>Mua Ngay</code>.</p>
<p>Liá»‡u nÃºt CTA cÃ³ nÃªn Ä‘áº·t á»Ÿ pháº§n giá»¯a phÃ­a dÆ°á»›i (<code>bottom-center</code>) cá»§a banner sáº½ á»•n hÆ¡n; hay lÃ  ngay dÆ°á»›i dÃ²ng khuyáº¿n mÃ£i â€œSáº¯p sá»­a chÆ¡i trÄƒngâ€ (<code>bottom-left</code>) vÃ  chuyá»ƒn cÃ¡i hashtag sang bÃªn pháº£i â€” vÃ¬ mÃ¬nh cáº£m tháº¥y ngÆ°á»i dÃ¹ng sáº½ dá»… click vÃ o CTA hÆ¡n náº¿u nÃ³ á»Ÿ giá»¯a hoáº·c á»Ÿ ngay phÃ­a bÃªn trÃ¡i (do máº¯t ngÆ°á»i sáº½ Ä‘á»c tá»« trÃ¡i sang pháº£i); hoáº·c lÃ  cháº£ cáº§n cÃ¡i nÃºt nÃ y ná»¯a.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pakota159.github.io/img/abtesting/lazada.png" class="img-fluid figure-img"></p>
<figcaption>PhÃ¢n tÃ­ch vá»‹ trÃ­ CTA</figcaption>
</figure>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Sau táº¥t cáº£, Ä‘Ã³ chá»‰ lÃ  suy Ä‘oÃ¡n <strong>cáº£m tÃ­nh</strong> cá»§a mÃ¬nh, vÃ  mÃ¬nh cáº§n 1 cÄƒn cá»© Ä‘Ã¡ng tin cáº­y hÆ¡n Ä‘á»ƒ quyáº¿t Ä‘á»‹nh vá»‹ trÃ­ Ä‘áº·t CTA.</p>
</div>
</div>
</section>
<section id="thá»­-nghiá»‡m" class="level3">
<h3 class="anchored" data-anchor-id="thá»­-nghiá»‡m">3. Thá»­ nghiá»‡m</h3>
<p>NhÆ° váº­y, mÃ¬nh Ä‘Ã£ Ä‘Æ°a ra 1 sá»‘ <em>phÃ¡n Ä‘oÃ¡n</em> vÃ  giá» mÃ¬nh cáº§n thá»­ nghiá»‡m Ä‘á»ƒ xem phÃ¡n Ä‘oÃ¡n nÃ o chÃ­nh xÃ¡c. MÃ¬nh sáº½ thá»­ nghiá»‡m vá»›i 2 vá»‹ trÃ­ CTA lÃ  <code>bottom-left</code> vÃ  <code>bottom-right</code> (nhá»¯ng giáº£i phÃ¡p khÃ¡c cÅ©ng lÃ m tÆ°Æ¡ng tá»±).</p>
<p>MÃ¬nh chá»n máº«u ngÆ°á»i dÃ¹ng vá»›i sá»‘ lÆ°á»£ng 10,000 ngÆ°á»i dÃ¹ng cho má»—i vá»‹ trÃ­:</p>
<ul>
<li><strong>NhÃ³m A</strong>: 10,000 ngÆ°á»i dÃ¹ng ngáº«u nhiÃªn vÃ  banner homepage mÃ  nhá»¯ng ngÆ°á»i nÃ y nhÃ¬n tháº¥y sáº½ lÃ  CTA Ä‘áº·t á»Ÿ <code>bottom-right</code></li>
<li><strong>NhÃ³m B</strong>: 10,000 ngÆ°á»i ngáº«u nhiÃªn (táº¥t nhiÃªn khÃ¡c vá»›i 10,000 ngÆ°á»i nhÃ³m A) sáº½ nhÃ¬n tháº¥y CTA Ä‘áº·t á»Ÿ <code>bottom-left</code></li>
</ul>
<p>VÃ  ta cáº§n xÃ¡c Ä‘á»‹nh CTR cá»§a phÆ°Æ¡ng Ã¡n nÃ o tá»‘t hÆ¡n, hay lÃ  vá»‹ trÃ­ Ä‘áº·t nÃºt â€œMua Ngayâ€ hoÃ n toÃ n khÃ´ng áº£nh hÆ°á»Ÿng gÃ¬ Ä‘áº¿n CTR.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th>A (bottom-right)</th>
<th>B (bottom-left)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Number of users</td>
<td>10,000</td>
<td>10,000</td>
</tr>
<tr class="even">
<td>CTR (Click through rate)</td>
<td>??</td>
<td>??</td>
</tr>
</tbody>
</table>
</section>
<section id="thu-tháº­p-dá»¯-liá»‡u-vÃ -phÃ¢n-tÃ­ch" class="level3">
<h3 class="anchored" data-anchor-id="thu-tháº­p-dá»¯-liá»‡u-vÃ -phÃ¢n-tÃ­ch">4. Thu tháº­p dá»¯ liá»‡u vÃ  phÃ¢n tÃ­ch</h3>
<p>MÃ¬nh cháº¡y thÃ­ nghiá»‡m kia trong khoáº£ng 1 thÃ¡ng vÃ  thu tháº­p Ä‘Æ°á»£c dá»¯ liá»‡u.</p>
<p>Äá»ƒ vÃ­ dá»¥, thÃ¬ mÃ¬nh sáº½ dÃ¹ng R Ä‘á»ƒ fake sá»‘:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># nhÃ³m A cÃ³ 30 báº£n ghi, giÃ¡ trá»‹ mean lÃ  0.415 vÃ  sd lÃ  0.05, phÃ¢n phá»‘i chuáº©n</span></span>
<span id="cb1-2">a_group <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.415</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.05</span>)</span>
<span id="cb1-3"></span>
<span id="cb1-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># nhÃ³m B cÅ©ng cÃ³ 30 báº£n ghi, giÃ¡ trá»‹ mean lÃ  0.45 vÃ  sd lÃ  0.1, phÃ¢n phá»‘i chuáº©n</span></span>
<span id="cb1-5">b_group <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.45</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>)</span></code></pre></div></div>
<p>GiÃ¡ trá»‹ trong 2 vectors trÃªn cÃ³ thá»ƒ biá»ƒu diá»…n nhÆ° á»Ÿ báº£ng dÆ°á»›i:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Date</th>
<th>CTR from A (bottom-right)</th>
<th>CTR from B (bottom-left)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1/8/2020</td>
<td>0.493</td>
<td>0.262</td>
</tr>
<tr class="even">
<td>2/8/2020</td>
<td>0.428</td>
<td>0.408</td>
</tr>
<tr class="odd">
<td>3/8/2020</td>
<td>0.463</td>
<td>0.35</td>
</tr>
<tr class="even">
<td>â€¦</td>
<td>â€¦</td>
<td>â€¦</td>
</tr>
<tr class="odd">
<td>29/8/2020</td>
<td>0.452</td>
<td>0.326</td>
</tr>
<tr class="even">
<td>30/8/2020</td>
<td>0.389</td>
<td>0.458</td>
</tr>
</tbody>
</table>
<p>Äá»ƒ dá»… hÃ¬nh dung ra dá»¯ liá»‡u nÃ y nÃ³ nhÆ° tháº¿ nÃ o, chÃºng ta sáº½ <strong>visualize</strong> nÃ³:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">barplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cbind</span>(a_group, b_group), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">beside=</span><span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span></code></pre></div></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pakota159.github.io/img/abtesting/plot1.png" class="img-fluid figure-img"></p>
<figcaption>So sÃ¡nh CTR giá»¯a 2 nhÃ³m</figcaption>
</figure>
</div>
<p>CÃ³ thá»ƒ tháº¥y, ngay tá»« viá»‡c â€œtáº¡oâ€ dá»¯ liá»‡u vÃ  Ä‘á»“ thá»‹ thÃ¬ CTR cá»§a nhÃ³m A phÃ¢n tÃ¡n Ã­t hÆ¡n nhÃ³m B (sd nhá» hÆ¡n), nhÆ°ng giÃ¡ trá»‹ trung bÃ¬nh cÅ©ng nhá» hÆ¡n. CÃ¢u há»i lÃºc nÃ y lÃ  dá»±a vÃ o dá»¯ liá»‡u nhÆ° trÃªn thÃ¬ cÃ³ thá»ƒ káº¿t luáº­n <strong>CTR trung bÃ¬nh cá»§a nhÃ³m B tá»‘t hÆ¡n cá»§a A khÃ´ng</strong>.</p>
<p>BÃ i toÃ¡n Ä‘Æ°á»£c quy vá» cÃ¢u há»i <strong>hypothesis testing</strong> trong thá»‘ng kÃª:</p>
<p><strong>Welchâ€™s t-test Ä‘á»ƒ kiá»ƒm Ä‘á»‹nh 2 ká»³ vá»ng <img src="https://latex.codecogs.com/png.latex?%5Cmu_1">, <img src="https://latex.codecogs.com/png.latex?%5Cmu_2"></strong>, á»Ÿ Ä‘Ã¢y 2 máº«u t-test lÃ  <code>a_group</code> vÃ  <code>b_group</code> vÃ  giáº£ thuyáº¿t phÆ°Æ¡ng sai 2 máº«u nÃ y giá»‘ng nhau lÃ  há»£p lÃ½ vÃ¬â€¦</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>BÃ i viáº¿t Ä‘ang Ä‘Æ°á»£c cáº­p nháº­tâ€¦</p>
</div>
</div>
</section>
</section>
<section id="tÃ i-liá»‡u-tham-kháº£o" class="level2">
<h2 class="anchored" data-anchor-id="tÃ i-liá»‡u-tham-kháº£o">TÃ i liá»‡u tham kháº£o</h2>
<ol type="1">
<li><p>Má»™t bÃ i viáº¿t hay vá» Banner trÃªn website: <a href="https://medium.com/imagine-ux/do-you-really-need-carousel-banner-offers-running-on-your-homepage-19adf28d2a62">Do you really need carousel banner</a></p></li>
<li><p>KhoÃ¡ há»c cÆ¡ báº£n vá» xÃ¡c suáº¥t thá»‘ng kÃª hay nháº¥t mÃ¬nh tá»«ng Ä‘á»c: <a href="https://ocw.mit.edu/courses/mathematics/18-05-introduction-to-probability-and-statistics-spring-2014/">Introduction to Probability and Statistics - MIT</a></p></li>
<li><p>KhoÃ¡ há»c Statistical Reasoning cá»§a Johns Hopkins School: <a href="http://ocw.jhsph.edu/index.cfm/go/viewCourse/course/StatisticalReasoning1/coursePage/index/">Link here</a></p></li>
<li><p>A/B Testing from lecture of Data 8 course UC Berkeley: <a href="http://data8.org/materials-sp18/lec/lec19PDF.pdf">Lecture 19 - Data 8 course</a></p></li>
<li><p>Má»™t cÃ´ng cá»¥ thÃº vá»‹ cá»§a Evan Miller vá» A/B testing: <a href="https://www.evanmiller.org/ab-testing/t-test.html#!58.175/28.017074/8;33.71/11.841026/10@95">Simulation</a></p></li>
</ol>


</section>

 ]]></description>
  <category>data</category>
  <category>ab-testing</category>
  <category>statistics</category>
  <guid>https://pakota159.github.io/posts/ab-testing/</guid>
  <pubDate>Wed, 09 Sep 2020 17:00:00 GMT</pubDate>
  <media:content url="https://pakota159.github.io/img/abtesting/bg.jpeg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>CÃ¡c chá»‰ sá»‘ quan trá»ng trong E-commerce</title>
  <dc:creator>Cuong Pham</dc:creator>
  <link>https://pakota159.github.io/posts/ecom-metrics/</link>
  <description><![CDATA[ 




<p>Theo nhiá»u ngÆ°á»i Ä‘Ã¡nh giÃ¡, bÆ°á»›c Ä‘áº§u tiÃªn cÅ©ng lÃ  bÆ°á»›c quan trá»ng nháº¥t trong phÃ¢n tÃ­ch dá»¯ liá»‡u (data analysis) lÃ  <strong>Ä‘áº·t cÃ¢u há»i</strong>. ChÃºng ta cáº§n biáº¿t Ä‘iá»u gÃ¬, cáº§n Ä‘Ã¡nh giÃ¡ nhá»¯ng chá»‰ sá»‘ nÃ o Ä‘á»ƒ biáº¿t Ä‘Æ°á»£c nhá»¯ng Ä‘iá»u Ä‘Ã³. Chá»‰ khi biáº¿t Ä‘Æ°á»£c mÃ¬nh Ä‘ang giáº£i bÃ i toÃ¡n gÃ¬, vÃ  cáº§n phÃ¢n tÃ­ch chá»‰ sá»‘ gÃ¬ Ä‘á»ƒ tráº£ lá»i bÃ i toÃ¡n Ä‘Ã³ thÃ¬ ta má»›i cÃ³ thá»ƒ lÃ m nhá»¯ng bÆ°á»›c nhÆ° thu tháº­p, sÃ ng lá»c, phÃ¢n tÃ­ch dá»¯ liá»‡u Ä‘Æ°á»£c.</p>
<p>Tuy nhiÃªn, viá»‡c Ä‘áº·t cÃ¢u há»i nÃ y láº¡i phá»¥ thuá»™c vÃ o mÃ´ hÃ¬nh kinh doanh mÃ  báº¡n Ä‘ang lÃ m viá»‡c, vÃ¬ má»—i mÃ´ hÃ¬nh kinh doanh láº¡i yÃªu cáº§u nhá»¯ng chá»‰ sá»‘ khÃ¡c nhau. VÃ  sau khi tá»± mÃ¬nh tÃ¬m hiá»ƒu, cÅ©ng nhÆ° tráº£i qua 1 thá»i gian lÃ m viá»‡c trong lÄ©nh vá»±c nÃ y, mÃ¬nh tá»± tháº¥y chÆ°a cÃ³ 1 bÃ i viáº¿t tiáº¿ng viá»‡t nÃ o tÃ³m táº¯t vÃ  mÃ´ táº£ Ä‘Æ°á»£c nhá»¯ng chá»‰ sá»‘ mÃ  chÃºng ta quan tÃ¢m trong mÃ´ hÃ¬nh kinh doanh thÆ°Æ¡ng máº¡i Ä‘iá»‡n tá»­ (E-commerce).</p>
<p>VÃ¬ váº­y, mÃ¬nh quyáº¿t Ä‘á»‹nh viáº¿t bÃ i nÃ y nháº±m tá»•ng há»£p nhá»¯ng Ä‘iá»u mÃ¬nh biáº¿t, mÃ¬nh tÃ¬m hiá»ƒu tá»« trÆ°á»›c Ä‘áº¿n nay Ä‘á»ƒ pháº§n nÃ o tráº£ lá»i Ä‘Æ°á»£c cÃ¢u há»i: <strong>trong e-commerce, chÃºng ta cáº§n quan tÃ¢m nhá»¯ng chá»‰ sá»‘ nÃ o, vÃ  táº¡i sao?</strong></p>
<section id="thÆ°Æ¡ng-máº¡i-Ä‘iá»‡n-tá»­-lÃ -gÃ¬" class="level2">
<h2 class="anchored" data-anchor-id="thÆ°Æ¡ng-máº¡i-Ä‘iá»‡n-tá»­-lÃ -gÃ¬">ThÆ°Æ¡ng máº¡i Ä‘iá»‡n tá»­ lÃ  gÃ¬?</h2>
<p>HÃ¬nh thá»©c <strong>thÆ°Æ¡ng máº¡i Ä‘iá»‡n tá»­</strong> chá»§ yáº¿u trÃªn tháº¿ giá»›i vÃ  cáº£ á»Ÿ Viá»‡t Nam lÃ  kinh doanh, <strong>bÃ¡n hÃ ng trÃªn cÃ¡c ná»n táº£ng trá»±c tuyáº¿n</strong>. KhÃ¡ch hÃ ng <em>Ä‘áº¿n trang web</em> cá»§a báº¡n, <em>tÃ¬m kiáº¿m sáº£n pháº©m</em>, vÃ  <em>Ä‘áº·t mua</em>.</p>
<p>Má»™t sá»‘ ná»n táº£ng thÆ°Æ¡ng máº¡i Ä‘iá»‡n tá»­ phá»• biáº¿n táº¡i Viá»‡t Nam cÃ³ thá»ƒ ká»ƒ Ä‘áº¿n: Shopee, Tiki, Lazada, Tháº¿ Giá»›i Di Äá»™ng, Sendo, FPT Shop, â€¦</p>
<p>Äiá»ƒm chung cá»§a cÃ¡c trang trÃªn Ä‘Ã³ lÃ  chÃºng Ä‘á»u lÃ  cÃ¡c ná»n táº£ng B2C (tá»« doanh nghiá»‡p Ä‘áº¿n cÃ¡ nhÃ¢n) vÃ  cÃ³ thá»ƒ Ä‘Æ°á»£c phÃ¢n ra lÃ m 2 dáº¡ng:</p>
<ul>
<li><strong>Marketplace</strong>: nhá»¯ng ná»n táº£ng Ä‘Ã³ng vai trÃ² lÃ  trung gian, khÃ´ng cÃ³ kho hÃ ng nhÆ° Shopee, Tiki, Lazada, â€¦</li>
<li><strong>Inventory</strong>: nhá»¯ng ná»n táº£ng cÃ³ kho hÃ ng, cÃ³ sáº£n pháº©m cá»§a chÃ­nh há» nhÆ° Tháº¿ Giá»›i Di Äá»™ng, FPT Shop, â€¦</li>
</ul>
<p>2 dáº¡ng nÃ y chá»§ yáº¿u chá»‰ khÃ¡c nhau vá» cÃ¡ch thá»©c lÆ°u trá»¯ hÃ ng hoÃ¡ cÃ²n vá» cÆ¡ cháº¿ bÃ¡n hÃ ng trÃªn web/app cá»§a há» khÃ´ng cÃ³ sá»± khÃ¡c biá»‡t Ä‘Ã¡ng ká»ƒ, vÃ¬ váº­y, dÃ¹ mÃ´ hÃ¬nh kinh doanh cá»§a báº¡n cÃ³ lÃ  dáº¡ng nÃ o trong 2 dáº¡ng trÃªn thÃ¬ cÅ©ng cÃ³ thá»ƒ sá»­ dá»¥ng nhá»¯ng chá»‰ sá»‘ dÆ°á»›i Ä‘Ã¢y.</p>
</section>
<section id="tá»•ng-quan" class="level2">
<h2 class="anchored" data-anchor-id="tá»•ng-quan">Tá»•ng quan</h2>
<p>Theo mÃ¬nh, cÃ³ 4 nhÃ³m chá»‰ sá»‘ mÃ  báº¡n cáº§n quan tÃ¢m Ä‘á»ƒ Ä‘Ã¡nh giÃ¡ Ä‘Æ°á»£c ná»n táº£ng ecommerce cÃ³ Ä‘ang hoáº¡t Ä‘á»™ng á»•n khÃ´ng:</p>
<ol type="1">
<li><p><strong>Retention</strong>: viá»‡c tÃ¡i sá»­ dá»¥ng dá»‹ch vá»¥, web, app, â€¦ cá»§a ngÆ°á»i dÃ¹ng. Retention cÃ³ thá»ƒ lÃ  <code>Repurchase Rate</code> - tá»· lá»‡ láº·p láº¡i hÃ nh vi mua hÃ ng cá»§a ngÆ°á»i dÃ¹ng, hoáº·c <code>Churn Rate</code> - tá»· lá»‡ ngÆ°á»i dÃ¹ng rá»i bá» ná»n táº£ng cá»§a báº¡n. Äiá»ƒm chung cá»§a cÃ¡c chá»‰ sá»‘ vá» Retention lÃ  báº¡n sáº½ theo dÃµi 1 nhÃ³m ngÆ°á»i dÃ¹ng xÃ¡c Ä‘á»‹nh (1 cohort) vÃ  Ä‘Ã¡nh giÃ¡ xem nhÃ³m ngÆ°á»i nÃ y tiáº¿p tá»¥c sá»­ dá»¥ng hay rá»i bá» ná»n táº£ng cá»§a báº¡n nhÆ° tháº¿ nÃ o trong 1 khoáº£ng thá»i gian nháº¥t Ä‘á»‹nh.</p></li>
<li><p><strong>Conversion</strong>: tá»· lá»‡ chuyá»ƒn Ä‘á»•i. ÄÃ¢y lÃ  nhá»¯ng chá»‰ sá»‘ liÃªn quan Ä‘áº¿n kháº£ nÄƒng chuyá»ƒn Ä‘á»•i khÃ¡ch hÃ ng tá»« bÆ°á»›c A Ä‘áº¿n bÆ°á»›c B trong luá»“ng ngÆ°á»i dÃ¹ng cá»§a báº¡n. NÃ³ cÃ³ thá»ƒ lÃ  tá»· lá»‡ chuyá»ƒn Ä‘á»•i cá»§a cÃ¡c kÃªnh marketing, hoáº·c cá»§a tá»«ng bÆ°á»›c trong luá»“ng cá»§a web/app.</p></li>
<li><p><strong>Cost</strong>: chi phÃ­. Chi phÃ­ á»Ÿ Ä‘Ã¢y cÃ³ thá»ƒ lÃ  chi phÃ­ Ä‘á»ƒ tÃ¬m kiáº¿m 1 khÃ¡ch hÃ ng (<code>CAC - Customer acquisition cost</code>) hoáº·c chi phÃ­ trÃªn tá»«ng Ä‘Æ¡n hÃ ng (Cost per Order). Vá» cÆ¡ báº£n, nÃ³ lÃ  chi phÃ­ mÃ  báº¡n pháº£i bá» ra trÃªn 1 Ä‘Æ¡n vá»‹, báº¡n cáº§n biáº¿t thÃ´ng sá»‘ nÃ y Ä‘á»ƒ so sÃ¡nh nÃ³ vá»›i giÃ¡ trá»‹ báº¡n mang láº¡i, vÃ  tá»« Ä‘Ã³ Ä‘Ã¡nh giÃ¡ Ä‘Æ°á»£c mÃ´ hÃ¬nh cá»§a báº¡n Ä‘ang hoáº¡t Ä‘á»™ng cÃ³ mang láº¡i lá»£i nhuáº­n hay khÃ´ng.</p></li>
<li><p><strong>Revenue</strong>: doanh thu. CÃ³ chi phÃ­ thÃ¬ táº¥t nhiÃªn pháº£i quan tÃ¢m Ä‘áº¿n doanh thu. Revenue á»Ÿ Ä‘Ã¢y cÅ©ng tÃ­nh trÃªn 1 Ä‘Æ¡n vá»‹, cÃ³ thá»ƒ lÃ  <code>Customer Lifetime Value - CLV</code> cho ta biáº¿t 1 khÃ¡ch hÃ ng sáº½ mang láº¡i bao nhiÃªu doanh thu trong suá»‘t vÃ²ng Ä‘á»i sá»­ dá»¥ng. Hoáº·c cÃ³ thá»ƒ tÃ­nh Average order value, giÃ¡ trá»‹ Ä‘Æ¡n hÃ ng trung bÃ¬nh Ä‘á»ƒ biáº¿t trung bÃ¬nh 1 Ä‘Æ¡n hÃ ng, báº¡n sáº½ cÃ³ doanh thu bao nhiÃªu.</p></li>
</ol>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Trong má»—i nhÃ³m chá»‰ sá»‘ trÃªn, mÃ¬nh sáº½ chá»‰ láº¥y ra 1 chá»‰ sá»‘ mÃ  mÃ¬nh cáº£m tháº¥y quan trá»ng vÃ  cáº§n thiáº¿t nháº¥t, tuá»³ trÆ°á»ng há»£p mÃ´ hÃ¬nh kinh doanh cá»§a báº¡n, chá»‰ sá»‘ báº¡n quan tÃ¢m cÃ³ thá»ƒ sáº½ khÃ¡c.</p>
</div>
</div>
</section>
<section id="repurchase-rate-rr" class="level2">
<h2 class="anchored" data-anchor-id="repurchase-rate-rr">Repurchase Rate (RR)</h2>
<p>Äá»‘i vá»›i Retention, mÃ¬nh quyáº¿t Ä‘á»‹nh chá»n Repurchase Rate lÃ  chá»‰ sá»‘ chÃ­nh vÃ¬ hÃ nh vi mua hÃ ng lÃ  hÃ nh vi quan trá»ng nháº¥t cá»§a ná»n táº£ng vÃ  chá»‰ sá»‘ nÃ y cÅ©ng giÃºp ta xÃ¡c Ä‘á»‹nh tá»· lá»‡ khÃ¡ch hÃ ng cÅ©, má»›i vÃ  tá»« Ä‘Ã³ há»— trá»£ viá»‡c Ä‘Æ°a ra chiáº¿n lÆ°á»£c.</p>
<p>Ná»n táº£ng cá»§a báº¡n cÃ³ thá»ƒ chÃº trá»ng vÃ o:</p>
<ul>
<li><strong>Acquisition</strong>: tÃ¬m kiáº¿m khÃ¡ch hÃ ng má»›i</li>
<li><strong>Loyalty</strong>: táº­p trung vÃ o khÃ¡ch hÃ ng cÅ©</li>
<li><strong>Hybrid</strong>: Ä‘á»“ng thá»i lÃ m cáº£ 2 viá»‡c trÃªn</li>
</ul>
<p>Theo nhÃ¬n nháº­n chá»§ quan cá»§a mÃ¬nh, háº§u háº¿t cÃ¡c start-up trong lÄ©nh vá»±c nÃ y sáº½ khá»Ÿi Ä‘áº§u báº±ng <strong>Acquisition</strong> â€” há» cá»‘ gáº¯ng kÃ©o cÃ ng nhiá»u khÃ¡ch hÃ ng má»›i cÃ ng tá»‘t. Sau Ä‘Ã³, khi Ä‘Ã£ cÃ³ 1 sá»‘ lÆ°á»£ng khÃ¡ch hÃ ng trung thÃ nh nháº¥t Ä‘á»‹nh, sáº½ lÃ  tráº¡ng thÃ¡i <strong>Hybrid</strong>, vá»«a chÄƒm sÃ³c khÃ¡ch hÃ ng cÅ©, vá»«a duy trÃ¬ cÃ¡c chÆ°Æ¡ng trÃ¬nh thu hÃºt khÃ¡ch má»›i (nhÆ° nhá»¯ng chÆ°Æ¡ng trÃ¬nh khuyáº¿n mÃ£i cho ngÆ°á»i dÃ¹ng má»›i trÃªn Shopee, Tiki, Lazada, â€¦). Cuá»‘i cÃ¹ng, khi ná»n táº£ng cá»§a báº¡n trá»Ÿ nÃªn khá»•ng lá»“ nhÆ° Amazon, báº¡n sáº½ táº­p trung cho chÆ°Æ¡ng trÃ¬nh <strong>Loyalty</strong>.</p>
<section id="vÃ­-dá»¥-tÃ­nh-rr" class="level3">
<h3 class="anchored" data-anchor-id="vÃ­-dá»¥-tÃ­nh-rr">VÃ­ dá»¥ tÃ­nh RR</h3>
<p>Trong database cá»§a báº¡n cÃ³ 1 báº£ng thá»‘ng kÃª Ä‘Æ¡n hÃ ng nhÆ° sau:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 21%">
<col style="width: 17%">
<col style="width: 23%">
<col style="width: 14%">
</colgroup>
<thead>
<tr class="header">
<th>order_id</th>
<th>username</th>
<th>order_completed_at</th>
<th>first_order_at</th>
<th>30_days_since_first</th>
<th>is_30day_RR</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>71</td>
<td>Cuong</td>
<td>2020-07-06 10:23:54</td>
<td>July 2020</td>
<td><strong>2020-08-05</strong></td>
<td>false</td>
</tr>
<tr class="even">
<td>72</td>
<td>Long</td>
<td>2020-07-08 11:24:35</td>
<td>July 2020</td>
<td><strong>2020-08-07</strong></td>
<td>false</td>
</tr>
<tr class="odd">
<td>73</td>
<td>Hoang</td>
<td>2020-07-27 11:25:35</td>
<td>July 2020</td>
<td><strong>2020-08-26</strong></td>
<td>false</td>
</tr>
<tr class="even">
<td>101</td>
<td>Cuong</td>
<td>2020-08-02 10:23:54</td>
<td>July 2020</td>
<td>2020-08-05</td>
<td><code>true</code></td>
</tr>
<tr class="odd">
<td>102</td>
<td>Hoang</td>
<td>2020-08-25 11:22:35</td>
<td>July 2020</td>
<td>2020-08-26</td>
<td><code>true</code></td>
</tr>
<tr class="even">
<td>103</td>
<td>Cuong</td>
<td>2020-09-09 04:20:54</td>
<td>July 2020</td>
<td>2020-08-05</td>
<td>false</td>
</tr>
<tr class="odd">
<td>104</td>
<td>Long</td>
<td>2020-09-09 14:22:35</td>
<td>July 2020</td>
<td>2020-08-07</td>
<td>false</td>
</tr>
</tbody>
</table>
<p>Báº£ng trÃªn Ä‘Ã£ Ä‘Æ°á»£c xá»­ lÃ½ Ä‘á»ƒ cho chÃºng ta cÃ³ thá»ƒ xÃ¡c Ä‘á»‹nh Ä‘Æ°á»£c <strong>cohort</strong> â€” 1 táº­p khÃ¡ch hÃ ng cÃ³ chung 1 hÃ nh vi xÃ¡c Ä‘á»‹nh. á» Ä‘Ã¢y lÃ  nhá»¯ng <strong>khÃ¡ch hÃ ng cÃ³ Ä‘Æ¡n hÃ ng Ä‘áº§u tiÃªn vÃ o thÃ¡ng 7 nÄƒm 2020</strong>. NÃ³i cÃ¡ch khÃ¡c, Ä‘Ã³ lÃ  nhá»¯ng <em>khÃ¡ch hÃ ng má»›i</em> mÃ  chÃºng ta kiáº¿m Ä‘Æ°á»£c <em>trong thÃ¡ng 7</em>, vÃ  ghi nháº­n táº¥t cáº£ cÃ¡c Ä‘Æ¡n hÃ ng thÃ nh cÃ´ng cá»§a há» tá»« lÃºc báº¯t Ä‘áº§u (thÃ¡ng 7) cho Ä‘áº¿n hiá»‡n táº¡i.</p>
<p>Trong sá»‘ nhá»¯ng khÃ¡ch hÃ ng nÃ y (3 ngÆ°á»i), chá»‰ cÃ³ 2 ngÆ°á»i thá»±c hiá»‡n 1 Ä‘Æ¡n hÃ ng khÃ¡c trong vÃ²ng 30 ngÃ y ká»ƒ tá»« ngÃ y Ä‘áº§u tiÃªn mua hÃ ng. Äá»ƒ xÃ¡c Ä‘á»‹nh Ä‘iá»u Ä‘Ã³, chá»‰ cáº§n so sÃ¡nh <code>order_completed_at</code> vá»›i <code>30_days_since_first</code>, náº¿u nhá» hÆ¡n thÃ¬ Ä‘Ã³ lÃ  1 Ä‘Æ¡n hÃ ng Ä‘Æ°á»£c thá»±c hiá»‡n trong vÃ²ng 30 ngÃ y tá»« ngÃ y Ä‘áº§u tiÃªn mua.</p>
<p>NhÆ° váº­y, ta cÃ³ thá»ƒ nÃ³i <strong>30-day repurchase rate</strong> hay <strong>30 days RR</strong> lÃ :</p>
<p><img src="https://latex.codecogs.com/png.latex?%5Ctext%7B30%20days%20RR%7D%20=%20%5Cfrac%7B2%7D%7B3%7D%20=%2066.6%5C%25"></p>
<p>TÆ°Æ¡ng tá»±, ta cÃ³ thá»ƒ tÃ­nh <strong>15, 30, 90 days RR</strong> â€” <strong>tá»· lá»‡ khÃ¡ch hÃ ng mua láº¡i trong 15, 30 hay 90 ngÃ y</strong>, tuá»³ vÃ o tá»«ng trÆ°á»ng há»£p kinh doanh cá»¥ thá»ƒ cá»§a báº¡n.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>RR lÃ  1 tá»· lá»‡ phá»¥ thuá»™c vÃ o 2 khoáº£ng thá»i gian, nhÆ° trÆ°á»ng há»£p trÃªn lÃ  30 days RR cá»§a <em>thÃ¡ng 7</em>. Náº¿u báº¡n tÃ­nh cho cÃ¡c thÃ¡ng khÃ¡c, hoáº·c <em>cohort</em> cá»§a 1 khoáº£ng thá»i gian khÃ¡c (tuáº§n, quÃ½, nÄƒm, â€¦) thÃ¬ káº¿t quáº£ sáº½ ra khÃ¡c.</p>
</div>
</div>
<p>Tá»· lá»‡ nÃ y cho chÃºng ta biáº¿t tá»· lá»‡ khÃ¡ch hÃ ng váº«n cÃ²n <em>trung thÃ nh</em> vá»›i sáº£n pháº©m cá»§a mÃ¬nh:</p>
<ul>
<li><strong>TrÃªn 30%</strong>: ná»n táº£ng Ä‘ang á»Ÿ tráº¡ng thÃ¡i <strong>Loyalty</strong></li>
<li><strong>15% Ä‘áº¿n 30%</strong>: tráº¡ng thÃ¡i <strong>Hybrid</strong></li>
<li><strong>DÆ°á»›i 15%</strong>: tráº¡ng thÃ¡i <strong>Acquisition</strong></li>
</ul>
</section>
</section>
<section id="conversion-rate-cr" class="level2">
<h2 class="anchored" data-anchor-id="conversion-rate-cr">Conversion Rate (CR)</h2>
<p>Tá»· lá»‡ chuyá»ƒn Ä‘á»•i Conversion Rate lÃ  1 chá»‰ sá»‘ Ä‘Æ¡n giáº£n nhÆ°ng Ä‘Æ°á»£c sá»­ dá»¥ng ráº¥t Ä‘a dáº¡ng. Vá» cÆ¡ báº£n, báº¡n cÃ³ thá»ƒ tÃ­nh tá»· lá»‡ chuyá»ƒn Ä‘á»•i khÃ¡ch hÃ ng tá»« bÆ°á»›c A Ä‘áº¿n bÆ°á»›c B, vá»›i bÆ°á»›c A vÃ  B cÃ³ thá»ƒ lÃ  báº¥t cá»© bÆ°á»›c nÃ o trong luá»“ng ngÆ°á»i dÃ¹ng (<strong>user flow</strong>) cá»§a báº¡n.</p>
<p>VÃ­ dá»¥ khÃ¡ch hÃ ng má»Ÿ app cá»§a báº¡n lÃªn (A), tÃ¬m kiáº¿m sáº£n pháº©m, thÃªm vÃ o giá» hÃ ng (B). NhÆ° váº­y ta cÃ³ thá»ƒ tÃ­nh trong 100 khÃ¡ch hÃ ng má»Ÿ app, cÃ³ bao nhiÃªu ngÆ°á»i sáº½ Ä‘i Ä‘áº¿n bÆ°á»›c thÃªm vÃ o giá» hÃ ng.</p>
<p><img src="https://latex.codecogs.com/png.latex?%5Ctext%7BCR%20t%E1%BB%AB%20A%20%C4%91%E1%BA%BFn%20B%7D%20=%20%5Cfrac%7B%5Ctext%7Bs%E1%BB%91%20ng%C6%B0%E1%BB%9Di%20%E1%BB%9F%20b%C6%B0%E1%BB%9Bc%20B%7D%7D%7B%5Ctext%7Bs%E1%BB%91%20ng%C6%B0%E1%BB%9Di%20%E1%BB%9F%20b%C6%B0%E1%BB%9Bc%20A%7D%7D"></p>
<p>Äá»ƒ biáº¿t Ä‘Æ°á»£c báº¡n cáº§n tÃ­nh <strong>CR</strong> cho bÆ°á»›c A nÃ o, B nÃ o, báº¡n cáº§n xÃ¡c Ä‘á»‹nh rÃµ <code>user flow</code> cá»§a mÃ¬nh.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Náº¿u mÃ´ hÃ¬nh cá»§a báº¡n táº­p trung vÃ o <strong>acquisition</strong>, cÃ³ thá»ƒ báº¡n sáº½ cháº¥p nháº­n 1 má»©c CR <em>tháº¥p hÆ¡n</em> 1 mÃ´ hÃ¬nh táº­p trung vÃ o <strong>loyalty</strong>.</li>
<li>Vá»›i acquisition, báº¡n tháº­m chÃ­ sáº½ táº­p trung vÃ o CR cá»§a cÃ¡c kÃªnh marketing hÆ¡n lÃ  CR cá»§a luá»“ng ngÆ°á»i dÃ¹ng sá»­ dá»¥ng trÃªn web/app cá»§a báº¡n.</li>
</ul>
</div>
</div>
</section>
<section id="customer-acquisition-cost-cac" class="level2">
<h2 class="anchored" data-anchor-id="customer-acquisition-cost-cac">Customer Acquisition Cost (CAC)</h2>
<p><strong>CAC</strong> Ä‘Æ°á»£c tÃ­nh báº±ng viá»‡c láº¥y chi phÃ­ bá» ra chia cho sá»‘ lÆ°á»£ng khÃ¡ch hÃ ng má»›i thu vá» Ä‘Æ°á»£c trong 1 khoáº£ng thá»i gian.</p>
<p><img src="https://latex.codecogs.com/png.latex?%5Ctext%7BCAC%7D%20=%20%5Cfrac%7B%5Ctext%7BT%E1%BB%95ng%20chi%20ph%C3%AD%20(marketing,%20sale,%20v%E1%BA%ADn%20h%C3%A0nh,%20...)%7D%7D%7B%5Ctext%7BS%E1%BB%91%20ng%C6%B0%E1%BB%9Di%20d%C3%B9ng%20m%E1%BB%9Bi%7D%7D"></p>
<p>Táº¥t nhiÃªn, CAC Ä‘á»‘i vá»›i tá»«ng doanh nghiá»‡p, mÃ´ hÃ¬nh khÃ¡c nhau sáº½ cÃ³ nhá»¯ng tiÃªu chuáº©n khÃ¡c nhau. Náº¿u mÃ´ hÃ¬nh acquisition, thÃ¬ CAC cÃ³ thá»ƒ sáº½ cao vÃ¬ báº¡n táº­p trung vÃ o viá»‡c tÃ¬m kiáº¿m khÃ¡ch hÃ ng má»›i, cÃ²n náº¿u loyalty, thÃ¬ CAC Ä‘Æ°á»£c ká»³ vá»ng sáº½ tháº¥p hÆ¡n.</p>
</section>
<section id="lifetime-value-clv-hoáº·c-ltv" class="level2">
<h2 class="anchored" data-anchor-id="lifetime-value-clv-hoáº·c-ltv">Lifetime Value (CLV hoáº·c LTV)</h2>
<p><strong>LTV</strong> lÃ  doanh thu mÃ  1 khÃ¡ch hÃ ng táº¡o ra trong vÃ²ng Ä‘á»i cá»§a khÃ¡ch hÃ ng.</p>
<section id="vÃ²ng-Ä‘á»i-khÃ¡ch-hÃ ng-lifespan" class="level3">
<h3 class="anchored" data-anchor-id="vÃ²ng-Ä‘á»i-khÃ¡ch-hÃ ng-lifespan">VÃ²ng Ä‘á»i khÃ¡ch hÃ ng (Lifespan)</h3>
<p>VÃ²ng Ä‘á»i khÃ¡ch hÃ ng lÃ  thá»i gian trung bÃ¬nh cá»§a 1 khÃ¡ch hÃ ng tá»« lÃºc mua hÃ ng láº§n Ä‘áº§u Ä‘áº¿n khi khÃ´ng cÃ²n mua ná»¯a.</p>
<p><img src="https://latex.codecogs.com/png.latex?%5Ctext%7BLifespan%7D%20=%20%5Cfrac%7B%5Ctext%7BT%E1%BB%95ng%20th%E1%BB%9Di%20gian%20t%E1%BB%AB%20l%C3%BAc%20mua%20%C4%91%E1%BA%BFn%20khi%20kh%C3%B4ng%20mua%20n%E1%BB%AFa%7D%7D%7B%5Ctext%7BS%E1%BB%91%20l%C6%B0%E1%BB%A3ng%20kh%C3%A1ch%20h%C3%A0ng%7D%7D"></p>
<p>Táº¥t nhiÃªn, viá»‡c thá»‘ng kÃª thá»i gian tá»« lÃºc mua hÃ ng Ä‘áº¿n lÃºc khÃ´ng cÃ²n mua ná»¯a cá»§a 1 khÃ¡ch hÃ ng cÃ³ thá»ƒ lÃ  1 viá»‡c ráº¥t khÃ³ khÄƒn, cÃ³ khi thá»i gian nÃ y lÃ  vÃ i nÄƒm thÃ¬ báº¡n khÃ´ng thá»ƒ chá» vÃ i nÄƒm Ä‘á»ƒ tÃ­nh nÃ³ Ä‘Æ°á»£c.</p>
<p>CÃ³ 1 cÃ¡ch Ä‘á»ƒ Æ°á»›c lÆ°á»£ng giÃ¡ trá»‹ nÃ y lÃ  dá»±a vÃ o <strong>Churn Rate</strong>.</p>
</section>
<section id="churn-rate" class="level3">
<h3 class="anchored" data-anchor-id="churn-rate">Churn Rate</h3>
<p><strong>Churn Rate</strong> lÃ  tá»· lá»‡ ngÆ°á»i khÃ´ng tiáº¿p tá»¥c mua hÃ ng trÃªn ná»n táº£ng cá»§a báº¡n ná»¯a (thá»±c táº¿ Churn cÃ³ thá»ƒ tÃ­nh cho báº¥t ká»³ hÃ nh Ä‘á»™ng nÃ o, nhÆ°ng á»Ÿ Ä‘Ã¢y ta xÃ©t hÃ nh Ä‘á»™ng mua hÃ ng).</p>
<p><img src="https://latex.codecogs.com/png.latex?%5Ctext%7BChurn%20Rate%7D%20=%201%20-%20%5Cfrac%7B%5Ctext%7Bt%E1%BB%95ng%20s%E1%BB%91%20ng%C6%B0%E1%BB%9Di%20mua%20h%C3%A0ng%20th%C3%A1ng%20tr%C6%B0%E1%BB%9Bc%20v%C3%A0%20th%C3%A1ng%20n%C3%A0y%7D%7D%7B%5Ctext%7Bt%E1%BB%95ng%20s%E1%BB%91%20ng%C6%B0%E1%BB%9Di%20mua%20h%C3%A0ng%20th%C3%A1ng%20tr%C6%B0%E1%BB%9Bc%7D%7D"></p>
<p><strong>VÃ­ dá»¥</strong>: CÃ³ 100 ngÆ°á»i mua hÃ ng vÃ o thÃ¡ng 7, trong sá»‘ 100 ngÆ°á»i nÃ y, cÃ³ 25 ngÆ°á»i Ä‘áº¿n thÃ¡ng 8 váº«n mua tiáº¿p, thÃ¬ <strong>Churn Rate = 75%</strong>. Ta cÃ³ thá»ƒ nÃ³i lÃ  cÃ³ 75% ngÆ°á»i dÃ¹ng Ä‘Ã£ khÃ´ng tiáº¿p tá»¥c mua hÃ ng vÃ o thÃ¡ng tiáº¿p theo.</p>
<p>Tá»« Ä‘Ã¢y cÃ³ thá»ƒ Æ°á»›c lÆ°á»£ng:</p>
<p><img src="https://latex.codecogs.com/png.latex?%5Ctext%7BAverage%20Lifespan%7D%20=%20%5Cfrac%7B1%7D%7B%5Ctext%7BChurn%20Rate%7D%7D"></p>
<p>Náº¿u churn rate tÃ­nh theo thÃ¡ng, thÃ¬ AL cÅ©ng sáº½ tÃ­nh theo thÃ¡ng. NhÆ° trÃªn thÃ¬ monthly churn rate lÃ  75%, váº­y AL lÃ  <img src="https://latex.codecogs.com/png.latex?%5Cfrac%7B100%7D%7B75%7D%20=%201.3"> thÃ¡ng.</p>
</section>
<section id="tÃ­nh-ltv" class="level3">
<h3 class="anchored" data-anchor-id="tÃ­nh-ltv">TÃ­nh LTV</h3>
<p>Sau khi tÃ­nh Ä‘Æ°á»£c thá»i gian trung bÃ¬nh 1 khÃ¡ch hÃ ng sá»­ dá»¥ng ná»n táº£ng, ta tÃ­nh giÃ¡ trá»‹ trung bÃ¬nh mÃ  1 khÃ¡ch hÃ ng mang láº¡i cho chÃºng ta.</p>
<p><img src="https://latex.codecogs.com/png.latex?%5Ctext%7BGi%C3%A1%20tr%E1%BB%8B%20trung%20b%C3%ACnh%20c%E1%BB%A7a%20%C4%91%C6%A1n%20h%C3%A0ng%20(AOV)%7D%20=%20%5Cfrac%7B%5Ctext%7BT%E1%BB%95ng%20doanh%20thu%7D%7D%7B%5Ctext%7BT%E1%BB%95ng%20s%E1%BB%91%20%C4%91%C6%A1n%20h%C3%A0ng%7D%7D"></p>
<p>Sau Ä‘Ã³, tÃ­nh sá»‘ Ä‘Æ¡n hÃ ng trung bÃ¬nh cá»§a 1 khÃ¡ch:</p>
<p><img src="https://latex.codecogs.com/png.latex?%5Ctext%7BS%E1%BB%91%20%C4%91%C6%A1n%20h%C3%A0ng%20trung%20b%C3%ACnh%20c%E1%BB%A7a%201%20kh%C3%A1ch%7D%20=%20%5Cfrac%7B%5Ctext%7BT%E1%BB%95ng%20s%E1%BB%91%20%C4%91%C6%A1n%7D%7D%7B%5Ctext%7BT%E1%BB%95ng%20s%E1%BB%91%20kh%C3%A1ch%7D%7D"></p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>LÆ°u Ã½ lÃ  doanh thu vÃ  sá»‘ Ä‘Æ¡n trÃªn tÃ­nh trong cÃ¹ng Ä‘Æ¡n vá»‹ thá»i gian vá»›i churn rate vÃ  AL á»Ÿ trÃªn (tÃ­nh theo thÃ¡ng).</p>
</div>
</div>
<p><img src="https://latex.codecogs.com/png.latex?%5Ctext%7BGi%C3%A1%20tr%E1%BB%8B%20mang%20l%E1%BA%A1i%20trung%20b%C3%ACnh%20c%E1%BB%A7a%201%20kh%C3%A1ch%20h%C3%A0ng%7D%20=%20%5Ctext%7BAOV%7D%20%5Ctimes%20%5Ctext%7BS%E1%BB%91%20%C4%91%C6%A1n%20h%C3%A0ng%20trung%20b%C3%ACnh%20c%E1%BB%A7a%201%20kh%C3%A1ch%7D"></p>
<p>Cuá»‘i cÃ¹ng, ta nhÃ¢n giÃ¡ trá»‹ trÃªn vá»›i lifespan Ä‘á»ƒ ra LTV:</p>
<p><img src="https://latex.codecogs.com/png.latex?%5Ctext%7BLTV%7D%20=%20%5Ctext%7BGi%C3%A1%20tr%E1%BB%8B%20mang%20l%E1%BA%A1i%20trung%20b%C3%ACnh%20c%E1%BB%A7a%201%20kh%C3%A1ch%20h%C3%A0ng%7D%20%5Ctimes%20%5Ctext%7BV%C3%B2ng%20%C4%91%E1%BB%9Di%20trung%20b%C3%ACnh%7D"></p>
</section>
</section>
<section id="roi-return-on-investment" class="level2">
<h2 class="anchored" data-anchor-id="roi-return-on-investment">ROI (Return on Investment)</h2>
<p>NhÆ° váº­y, ta Ä‘Ã£ tÃ­nh Ä‘Æ°á»£c chi phÃ­ Ä‘á»ƒ cÃ³ Ä‘Æ°á»£c 1 khÃ¡ch hÃ ng (CAC) vÃ  giÃ¡ trá»‹ trung bÃ¬nh 1 khÃ¡ch hÃ ng mang láº¡i (LTV). Dá»… tháº¥y, ta muá»‘n <strong>LTV cÃ ng cao cÃ ng tá»‘t</strong> cÃ²n <strong>CAC thÃ¬ ngÆ°á»£c láº¡i</strong>.</p>
<p>Tá»· lá»‡ <strong>LTV/CAC</strong> cÅ©ng lÃ  1 chá»‰ sá»‘ quan trá»ng Ä‘á»ƒ Ä‘Ã¡nh giÃ¡ kháº£ nÄƒng táº¡o ra doanh thu cá»§a 1 ná»n táº£ng ecommerce, Ä‘Ã³ lÃ  <strong>ROI</strong>:</p>
<p><img src="https://latex.codecogs.com/png.latex?%5Ctext%7BROI%20(Return%20on%20Investment)%7D%20=%20%5Cfrac%7B%5Ctext%7BLTV%7D%7D%7B%5Ctext%7BCAC%7D%7D%20-%201"></p>
</section>
<section id="káº¿t-luáº­n" class="level2">
<h2 class="anchored" data-anchor-id="káº¿t-luáº­n">Káº¿t luáº­n</h2>
<p>NhÆ° váº­y, mÃ¬nh Ä‘Ã£ Ä‘i qua cÃ¡c chá»‰ sá»‘ mÃ  mÃ¬nh nghÄ© lÃ  quan trá»ng khi lÃ m phÃ¢n tÃ­ch dá»¯ liá»‡u cho 1 ná»n táº£ng Ecommerce. VÃ¬ lÃ  nhá»¯ng hiá»ƒu biáº¿t cá»§a báº£n thÃ¢n cÃ²n háº¡n cháº¿ nÃªn khÃ³ trÃ¡nh khá»i nhá»¯ng sai sÃ³t. Mong ngÆ°á»i Ä‘á»c cÃ³ thá»ƒ Ä‘Ã³ng gÃ³p thÃªm Ä‘á»ƒ bÃ i viáº¿t cÃ³ thá»ƒ Ä‘Æ°á»£c hoÃ n thiá»‡n hÆ¡n.</p>
</section>
<section id="tÃ i-liá»‡u-tham-kháº£o" class="level2">
<h2 class="anchored" data-anchor-id="tÃ i-liá»‡u-tham-kháº£o">TÃ i liá»‡u tham kháº£o</h2>
<ol type="1">
<li>Lean Analytics Book</li>
<li><a href="https://medium.com/@jspanom/how-to-deep-dive-in-your-product-funnel-performance-with-ga-and-data-studio-step-by-step-guide-328d1bbb4dd4">How to deep dive in your product funnel performance with GA and Data Studio</a></li>
<li><a href="https://medium.com/better-marketing/the-marketers-guide-to-customer-acquisition-costs-bf465b5903b0/">The Marketerâ€™s Guide to Customer Acquisition Costs</a></li>
<li><a href="https://medium.com/better-marketing/the-marketers-guide-to-customer-lifetime-value-7f0eb5991098/">The Marketerâ€™s Guide to Customer Lifetime Value</a></li>
<li><a href="https://blog.hubspot.com/service/how-to-calculate-customer-lifetime-value">How to Calculate Customer Lifetime Value</a></li>
</ol>


</section>

 ]]></description>
  <category>metrics</category>
  <category>data</category>
  <category>ecommerce</category>
  <guid>https://pakota159.github.io/posts/ecom-metrics/</guid>
  <pubDate>Tue, 08 Sep 2020 17:00:00 GMT</pubDate>
  <media:content url="https://pakota159.github.io/img/ecommerce/bg.png" medium="image" type="image/png" height="76" width="144"/>
</item>
<item>
  <title>Introduction to Cohort Analysis</title>
  <dc:creator>Cuong Pham</dc:creator>
  <link>https://pakota159.github.io/posts/cohort-analysis/</link>
  <description><![CDATA[ 




<p>The first data analysis technique I have ever learned is <em>Cohort analysis</em>. So what is it and what is it used for?</p>
<p>Imagine you have a fantastic mobile app and itâ€™s your start-up product. You do marketing, invite people to use your app, but after a while you realise the number of active users is decreasing.</p>
<p>How can that happen when you regularly promote and acquire new users to your app?</p>
<p>To answer that question, we need to know:</p>
<ol type="1">
<li><strong>When</strong> do people start to leave your app since the first day they installed it?</li>
<li><strong>Where</strong> do users drop the app â€” which stage of your user flow is wrong?</li>
</ol>
<p>Cohort analysis is created to answer those questions. So letâ€™s dig deeper into this concept and how to implement it in your application.</p>
<section id="what-is-a-cohort" class="level2">
<h2 class="anchored" data-anchor-id="what-is-a-cohort">What is a Cohort?</h2>
<p>A <strong>cohort</strong> is a group of people who share a common characteristic or experience within a defined period.</p>
<p>For example:</p>
<ul>
<li>People who are born in the same year are a <em>birth cohort</em></li>
<li>Students who graduated in the same year are a <em>graduated cohort</em></li>
<li>People who sign up for the first time in an app on the same day are a <em>sign-up cohort</em></li>
</ul>
<p><strong>Cohort analysis</strong> is a study that focuses on the activities of a particular cohort.</p>
<p>For example, we can do cohort analysis to find how users behave after signing up.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pakota159.github.io/img/cohort/acquisition.png" class="img-fluid figure-img"></p>
<figcaption>User Acquisition Cohort</figcaption>
</figure>
</div>
</section>
<section id="reading-the-cohort-chart" class="level2">
<h2 class="anchored" data-anchor-id="reading-the-cohort-chart">Reading the Cohort Chart</h2>
<p><strong>Explanation</strong>:</p>
<ul>
<li><p>The users are grouped by <strong>first date signed up</strong>. This means there were <strong>1,098 new users</strong> who signed up for the app on <strong>Jan 25</strong>. Similarly, on Jan 26, there were another <strong>1,358 new users</strong> who signed up.</p></li>
<li><p>The triangle heat map shows us how those user groups behave. In the first row, the group of 1,098 users who registered on Jan 25 stopped using the app the next day (Jan 26) dramatically â€” dropping by <strong>66.1%</strong> and remaining at only 33.9%. The following day, it got worse when only 23.5% of those 1,098 users were still using the app.</p></li>
</ul>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Important</span>Key Insight
</div>
</div>
<div class="callout-body-container callout-body">
<p>Thanks to the heat map, we can see that after the first day of registration, most groups of users are leaving the app. This answers the question of <strong>when</strong> our customers leave our platform.</p>
<p>The next question is: how do we investigate that first day of using the app to define <strong>why</strong> they stop using it?</p>
</div>
</div>


</section>

 ]]></description>
  <category>sql</category>
  <category>data</category>
  <category>analytics</category>
  <guid>https://pakota159.github.io/posts/cohort-analysis/</guid>
  <pubDate>Sun, 16 Aug 2020 17:00:00 GMT</pubDate>
  <media:content url="https://pakota159.github.io/img/cohort/bg.png" medium="image" type="image/png" height="76" width="144"/>
</item>
<item>
  <title>Understanding Database Indexes</title>
  <dc:creator>Cuong Pham</dc:creator>
  <link>https://pakota159.github.io/posts/index-and-query/</link>
  <description><![CDATA[ 




<p>Well, most developers or people who work with data know that â€œIndex makes query fastâ€ and they also understand why. But for people who donâ€™t really know about indexing, I would like to write this post to introduce them to it.</p>
<p>Furthermore, I also give some notes from my experience and what I have read about SQL optimization. I hope this will be helpful for those who work in the field of data and computer science.</p>
<section id="tree-data-structure" class="level2">
<h2 class="anchored" data-anchor-id="tree-data-structure">Tree Data Structure</h2>
<p><strong>Tree</strong> is a data structure created to improve the efficiency of searching stuff at the cost of low performance of writing/updating.</p>
<p>Imagine we have a list like <code>[2, 4, 7, 6, 11]</code></p>
<p>We want to find <code>number 6</code>. Normally weâ€™ll search one by one from left to right of the list: <code>2 -&gt; 4 -&gt; 7 -&gt; 6</code>. We found it, but if the list has thousands of items, it would take a lot of time to do the <code>search</code> operation like that.</p>
<p>Alternatively, we can use a binary search tree data structure to improve the speed. We basically arrange the order of the items in the list with the rule:</p>
<ul>
<li>Each item is stored in a node</li>
<li>Each node (item) may have left and right child with the condition: <code>left child &lt; item &lt; right child</code></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pakota159.github.io/img/sql/img1.png" class="img-fluid figure-img"></p>
<figcaption>Binary Search Tree</figcaption>
</figure>
</div>
<p>With that logic, we donâ€™t have to go through all items to find the number we want.</p>
<p>Start from root (top item). If we want number 6, we compare it with the root node. <code>6 &lt; 7</code> so we go to the left branch (because smaller items are always stored to the left of the parent item). We get <code>number 4</code> and because <code>6 &gt; 4</code> we go to the right of 4.</p>
<p>The time to search/find an item only depends on the <strong>height</strong> of the tree, which is the longest path from root node to any leaf node (other items) in the tree. The bigger the height, the slower the speed to find the item we want.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pakota159.github.io/img/sql/img2.png" class="img-fluid figure-img"></p>
<figcaption>Tree Height</figcaption>
</figure>
</div>
</section>
<section id="balanced-binary-tree" class="level2">
<h2 class="anchored" data-anchor-id="balanced-binary-tree">Balanced Binary Tree</h2>
<p>A Balanced Binary Tree is simply a Binary search tree as stated above, but the <strong>height</strong> is balanced. This means that for any node of the tree, the left branch height and the right branch height is the same or almost the same (differ no more than 1).</p>
<p><strong>Example</strong>: With the tree in the image below, if we check the node <code>4</code>:</p>
<ul>
<li>Left branch has a height of 1 (contains number 2)</li>
<li>Right branch has a height of 1 (contains number 6)</li>
</ul>
<p>If we check the node <code>7</code>:</p>
<ul>
<li>Left branch has a height of 2</li>
<li>Right branch has a height of 1</li>
<li>Difference: <code>2 - 1 = 1</code></li>
</ul>
<p>The binary tree below is a balanced binary tree.</p>
<p>This kind of tree is used to optimize the speed of searching, because it optimizes the height of the tree (which is the factor that affects the speed of searching).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pakota159.github.io/img/sql/img1.png" class="img-fluid figure-img"></p>
<figcaption>Balanced Binary Tree</figcaption>
</figure>
</div>
</section>
<section id="b-tree" class="level2">
<h2 class="anchored" data-anchor-id="b-tree">B-tree</h2>
<p>B-tree is a kind of upgraded Balanced Binary Tree. You can now have multiple items stored in one node (instead of 1 item per node), and each node can have more than 2 children.</p>
<p>As shown in the structure below, we can see each node can have a bulk of data on the left or right. The left bulk contains values which are smaller than the value of the parent node. The right bulk contains values which are bigger than the parent.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pakota159.github.io/img/sql/img3.png" class="img-fluid figure-img"></p>
<figcaption>B-tree Structure</figcaption>
</figure>
</div>
</section>
<section id="the-index-in-database" class="level2">
<h2 class="anchored" data-anchor-id="the-index-in-database">The Index in Database</h2>
<p>Imagine your table will be stored in database like this:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>ID</th>
<th>author_name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>001</td>
<td>Gilles van den Hoven</td>
</tr>
<tr class="even">
<td>002</td>
<td>Michael Geary</td>
</tr>
<tr class="odd">
<td>003</td>
<td>Stefan Petre</td>
</tr>
<tr class="even">
<td>004</td>
<td>Yehuda Katz</td>
</tr>
<tr class="odd">
<td>005</td>
<td>Corey Jewett</td>
</tr>
<tr class="even">
<td>006</td>
<td>Klaus Hartl</td>
</tr>
<tr class="odd">
<td>007</td>
<td>Franck Marcia</td>
</tr>
<tr class="even">
<td>008</td>
<td>JÃ¶rn Zaefferer</td>
</tr>
<tr class="odd">
<td>009</td>
<td>Paul Bakaus</td>
</tr>
<tr class="even">
<td>010</td>
<td>Brandon Aaron</td>
</tr>
</tbody>
</table>
<p><em>(Authors above are people who contributed to the jQuery library)</em></p>
<p>We want to search the name of the author fast, so we need to add a new table â€” an <strong>index table</strong> â€” which contains the data of column <strong>author_name</strong> and organizes that data into a B-tree data structure so the search can be optimized.</p>
<p>The <strong>index of author_name</strong> can be simply expressed like below:</p>
<p>At the root node of the Tree, we store a list of a few <strong>author_name</strong> values, for example: <strong>[Corey Jewett, Michael Geary, Paul Bakaus]</strong>, all <code>sorted by A-Z order</code>.</p>
<p>Then for each value, we create a child node which contains other names that satisfy the rule of B-tree: <code>left node contains all values smaller than parent, right node contains bigger values</code>. In this case, <em>smaller</em> means it comes before in the alphabet.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pakota159.github.io/img/sql/img4.png" class="img-fluid figure-img"></p>
<figcaption>Index B-tree Structure</figcaption>
</figure>
</div>
<p>When we search for a name like <code>Yehuda Katz</code>, we start from the root. Y is <em>bigger</em> than <em>P</em> in <em>Paul Bakaus</em> so we look up the right node of <em>Paul Bakaus</em>.</p>
<p>In the child node, we do the same thing until we reach the lowest child node. In this lowest node, we do <em>binary search</em> to search the value. The number of values stored in each node is small, so binary search will do the search really fast.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Why We Use B-tree
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>We can store data in each node instead of only 1 in a balanced tree, therefore reducing the <em>height</em> of the tree and improving the speed of the search.</li>
<li>Values in each node are sorted in a particular order, therefore we can look up faster. The number of values in each node is small enough so binary search can be quick too.</li>
</ul>
</div>
</div>
</section>
<section id="example-index-performance" class="level2">
<h2 class="anchored" data-anchor-id="example-index-performance">Example: Index Performance</h2>
<p>I will demonstrate the difference between no-index and indexed query performance. The data I use is <em>1.5 million records of sales</em>, and I use PostgreSQL database to store those records.</p>
<section id="without-index" class="level3">
<h3 class="anchored" data-anchor-id="without-index">Without Index</h3>
<p>Before adding an index to the column <code>Item Type</code>, I try the query below, and it returns <code>125,022 records</code> with a speed of <strong>2.244 seconds</strong>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pakota159.github.io/img/sql/img5.png" class="img-fluid figure-img"></p>
<figcaption>Query without index</figcaption>
</figure>
</div>
</section>
<section id="with-index" class="level3">
<h3 class="anchored" data-anchor-id="with-index">With Index</h3>
<p>Now, we will add an index to the <code>Item Type</code> column:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb1-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">CREATE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">INDEX</span> item_type_index <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">ON</span> sale_records (<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">"Item Type"</span>);</span></code></pre></div></div>
<p>That command will run for a while to create a new table which is an <code>index table</code> containing the data of column <code>Item Type</code> with the principle of B-tree as we mentioned earlier.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pakota159.github.io/img/sql/img6.png" class="img-fluid figure-img"></p>
<figcaption>Query with index</figcaption>
</figure>
</div>
<p>As we can see, the speed is much better now. The index helps us identify the word <em>Beverages</em> faster, hence we can search for it better.</p>
</section>
</section>
<section id="rules-for-sql-optimization" class="level2">
<h2 class="anchored" data-anchor-id="rules-for-sql-optimization">Rules for SQL Optimization</h2>
<p>Thanks to understanding the underlying principle of indexes, we can now note down some rules for better queries in the future.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The notes below will be updated regularly.</p>
</div>
</div>
<section id="avoid-like-with-leading-wildcards" class="level3">
<h3 class="anchored" data-anchor-id="avoid-like-with-leading-wildcards">1. Avoid LIKE with Leading Wildcards</h3>
<p>Avoid <strong>LIKE</strong> expressions with leading wildcards (e.g., <code>'%TERM'</code>).</p>
<p>Because the index uses the first letter and sorts by A-Z order, we should avoid LIKE expressions without the first letter specified. The index table will be useless in this case.</p>
</section>
<section id="multi-column-index-rules" class="level3">
<h3 class="anchored" data-anchor-id="multi-column-index-rules">2. Multi-Column Index Rules</h3>
<p>If we create an index for multiple columns, then the <em>WHERE</em> condition applied for only one of those columns will not use the index.</p>
<p>For example, if we make an index for <code>user_id</code> and <code>company</code>, then searching for <code>user_id = 1000</code> alone will not use the index. The index is only valid for the combination of <code>user_id</code> and <code>company</code>. We have to search for <code>user_id = 1000 AND company = 'GOOGLE'</code> to use the index.</p>
</section>
<section id="case-insensitive-indexes" class="level3">
<h3 class="anchored" data-anchor-id="case-insensitive-indexes">3. Case-Insensitive Indexes</h3>
<p>If we want to search with Case-Insensitive matching (meaning CUONG and Cuong return the same result), then we should create an index with case-insensitivity:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb2-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">CREATE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">INDEX</span> user_index <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">ON</span> users (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">UPPER</span>(first_name));</span></code></pre></div></div>
<p>This creates an index with uppercase of <em>first_name</em> column values. Then we execute the query:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb3-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">SELECT</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">FROM</span> users <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">WHERE</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">UPPER</span>(first_name) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'CUONG'</span>;</span></code></pre></div></div>
</section>
<section id="function-based-index-considerations" class="level3">
<h3 class="anchored" data-anchor-id="function-based-index-considerations">4. Function-Based Index Considerations</h3>
<p>If you want to query data like â€œhow many days from the latest day each user bought a productâ€, you might write something like <code>TRUNC(DAYS_BETWEEN(SYSDATE, buy_date))</code>.</p>
<p>However, this value cannot be indexed because it changes daily. (Index can be updated with INSERT, UPDATE, DELETE commands, but canâ€™t automatically update daily or when executing SELECT commands).</p>
<p><strong>Solution</strong>: Index <code>buy_date</code> instead. If we want to query all users that have 30 days from now to their latest purchase, we calculate that date (<code>that_date = today - 30 days</code>), then query with condition <code>that_date = buy_date</code>.</p>
</section>
<section id="datetime-range-conditions" class="level3">
<h3 class="anchored" data-anchor-id="datetime-range-conditions">5. DateTime Range Conditions</h3>
<p>When writing conditions for datetime ranges, explicitly declare the start and end of the time range.</p>
<p>Instead of:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb4-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">WHERE</span> date_time <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'2020-10-10'</span></span></code></pre></div></div>
<p>Write:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb5-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">WHERE</span> date_time <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'2020-10-09'</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">AND</span> date_time <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'2020-10-10'</span></span></code></pre></div></div>
</section>
</section>
<section id="further-reading" class="level2">
<h2 class="anchored" data-anchor-id="further-reading">Further Reading</h2>
<ol type="1">
<li><a href="https://use-the-index-luke.com/">Use The Index, Luke</a> â€” An excellent resource for understanding SQL indexing in depth.</li>
</ol>


</section>

 ]]></description>
  <category>sql</category>
  <category>data</category>
  <category>index</category>
  <guid>https://pakota159.github.io/posts/index-and-query/</guid>
  <pubDate>Mon, 10 Aug 2020 17:00:00 GMT</pubDate>
  <media:content url="https://pakota159.github.io/img/sql/bg.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Understanding SQL through Relational Algebra</title>
  <dc:creator>Cuong Pham</dc:creator>
  <link>https://pakota159.github.io/posts/sql-relational-db/</link>
  <description><![CDATA[ 




<p>When studying SQL, a lot of us start with some statements like <em>Select</em>, <em>FROM</em>, <em>WHERE</em>, but it turns out SQL is more than just that. The principle of the query language is based on relational algebra, and when I learned about it, I found it way more interesting to understand SQL and how queries work.</p>
<p>So letâ€™s discover some of the relational algebra and find out if it makes you learn deeper about SQL.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This article is for people who have basic knowledge of SQL and querying databases. If you donâ€™t have it, you may need to read about basic SQL first.</p>
</div>
</div>
<section id="the-relational-model" class="level2">
<h2 class="anchored" data-anchor-id="the-relational-model">The Relational Model</h2>
<p>Itâ€™s used by all major database systems. Itâ€™s a concept used to build the world of relational databases.</p>
<p>In this model:</p>
<blockquote class="blockquote">
<p><strong>Database = set of named relations (or tables)</strong></p>
</blockquote>
<p>Each relation has a set of named <strong>attributes</strong> (or <strong>columns</strong>).</p>
<p>For example, we have a relation <strong>Student</strong> as below:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>ID</th>
<th>Name</th>
<th>Class</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>â€¦</td>
<td>â€¦</td>
<td>â€¦</td>
</tr>
</tbody>
</table>
<p>The table <strong>Student</strong> has 3 <em>attributes</em>: id, name, and class.</p>
<p>Each <strong>tuple</strong> (or <strong>row</strong>) has a value for each <em>attribute</em>:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>ID</th>
<th>Name</th>
<th>Class</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>001</td>
<td>Cuong</td>
<td>A1</td>
</tr>
<tr class="even">
<td>002</td>
<td>Phong</td>
<td>A2</td>
</tr>
</tbody>
</table>
</section>
<section id="key-concepts" class="level2">
<h2 class="anchored" data-anchor-id="key-concepts">Key Concepts</h2>
<p><strong>Schema</strong> (of database) is the structural description of relations in database.</p>
<p><strong>Instance</strong> (of database) is the actual contents at a given point in time. It means the <em>entire data stored in database</em> at a particular moment of time.</p>
<p><strong>NULL</strong> is a special value for â€˜unknownâ€™ or â€˜undefinedâ€™.</p>
<p><strong>Key</strong> is an attribute whose value is unique in each tuple (row). Sometimes, this unique key can be the combination of multiple attributes.</p>
</section>
<section id="creating-tables-in-sql" class="level2">
<h2 class="anchored" data-anchor-id="creating-tables-in-sql">Creating Tables in SQL</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb1-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">CREATE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">TABLE</span> table_name(</span>
<span id="cb1-2">    column1 datatype,</span>
<span id="cb1-3">    column2 datatype,</span>
<span id="cb1-4">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">..</span>.</span>
<span id="cb1-5">);</span></code></pre></div></div>
<p>Some common datatypes (depends on type of DBMS):</p>
<ul>
<li><code>CHAR(size)</code> â€” size 0-255</li>
<li><code>VARCHAR(size)</code> â€” size 0-255</li>
<li><code>INT()</code></li>
<li><code>BIGINT()</code></li>
<li><code>FLOAT()</code></li>
<li><code>DOUBLE()</code></li>
</ul>
<p>For the <em>Student</em> relation, we can write:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb2-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">CREATE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">TABLE</span> Student (</span>
<span id="cb2-2">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">id</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">integer</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">PRIMARY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">KEY</span>,</span>
<span id="cb2-3">    name <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">varchar</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">255</span>),</span>
<span id="cb2-4">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">class</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">varchar</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">255</span>)</span>
<span id="cb2-5">);</span></code></pre></div></div>
</section>
<section id="steps-in-creating-and-using-a-relational-database" class="level2">
<h2 class="anchored" data-anchor-id="steps-in-creating-and-using-a-relational-database">Steps in Creating and Using a Relational Database</h2>
<ol type="1">
<li><strong>Design Schema</strong>: create using DDL (Data Definition Language)</li>
<li><strong>Load initial data</strong> (if any)</li>
<li><strong>Execute queries and modifications</strong> using DML (Data Manipulation Language)</li>
</ol>
<p><em>Queries will return relations.</em></p>
</section>
<section id="query-languages" class="level2">
<h2 class="anchored" data-anchor-id="query-languages">Query Languages</h2>
<ul>
<li><strong>Relational Algebra</strong>: formal language</li>
<li><strong>SQL</strong>: implemented Relational Algebra</li>
</ul>
</section>
<section id="relational-algebra" class="level2">
<h2 class="anchored" data-anchor-id="relational-algebra">Relational Algebra</h2>
<p>Queries on a set of relations produce a relation as a result.</p>
<p>Imagine we have a booking system, with <strong>User</strong> who selects <strong>Product</strong> and then makes a <strong>Booking</strong>.</p>
<p>The <em>Schema</em> of each relation will be something like below (<em>a very simple version</em>):</p>
<ul>
<li><em>User</em>: <code>user_id</code> (PK), <code>username</code>, <code>age</code>, <code>city</code></li>
<li><em>Product</em>: <code>product_id</code> (PK), <code>product_name</code>, <code>price</code></li>
<li><em>Booking</em>: <code>booking_id</code> (PK), <code>user_id</code>, <code>product_id</code>, <code>status</code></li>
</ul>
<section id="select-operator-sigma" class="level3">
<h3 class="anchored" data-anchor-id="select-operator-sigma">Select Operator (<img src="https://latex.codecogs.com/png.latex?%5Csigma">)</h3>
<p><strong>Select</strong> operator picks certain rows.</p>
<p>We want users with <em>age &gt; 20</em>, then the formation will be:</p>
<p><img src="https://latex.codecogs.com/png.latex?%5Csigma_%7Bage%20%3E%2020%7D%20User"></p>
<p>The operator above will return a relation that contains all rows where the value of age is larger than 20.</p>
<p>If we want to select with multiple conditions, like <code>age &gt; 20</code> and <code>city = 'Hanoi'</code>, we use caret (âˆ§):</p>
<p><img src="https://latex.codecogs.com/png.latex?%5Csigma_%7Bage%20%3E%2020%20%5Cwedge%20city%20=%20'Hanoi'%7D%20User"></p>
</section>
<section id="project-operator-pi" class="level3">
<h3 class="anchored" data-anchor-id="project-operator-pi">Project Operator (<img src="https://latex.codecogs.com/png.latex?%5CPi">)</h3>
<p><strong>Project</strong> operator picks certain columns.</p>
<p>We only want the columns (attributes) <em>username</em> and <em>age</em>:</p>
<p><img src="https://latex.codecogs.com/png.latex?%5CPi_%7Busername,%20age%7D%20User"></p>
<p>Now, we can combine the 2 operators above. If we want users with <em>age &gt; 20</em> and only return columns <em>username, age</em>:</p>
<p><img src="https://latex.codecogs.com/png.latex?%5CPi_%7Busername,%20age%7D(%5Csigma_%7Bage%20%3E%2020%7D%20User)"></p>
</section>
<section id="cross-product" class="level3">
<h3 class="anchored" data-anchor-id="cross-product">Cross-Product</h3>
<p><strong>Cross-product</strong> combines 2 relations.</p>
<p>Imagine we have <em>User</em> and <em>Product</em> tables:</p>
<p><em>User</em></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>user_id</th>
<th>username</th>
<th>age</th>
<th>city</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>cuong</td>
<td>20</td>
<td>Hanoi</td>
</tr>
<tr class="even">
<td>2</td>
<td>phong</td>
<td>25</td>
<td>HCM</td>
</tr>
</tbody>
</table>
<p><em>Product</em></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>product_id</th>
<th>product_name</th>
<th>price</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>mac</td>
<td>2000</td>
</tr>
<tr class="even">
<td>2</td>
<td>iphone</td>
<td>1000</td>
</tr>
</tbody>
</table>
<p>Then <img src="https://latex.codecogs.com/png.latex?User%20%5Ctimes%20Product"> will return a new relation which has 4 rows (2 Ã— 2 rows), and 7 columns (4 + 3 attributes):</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>user_id</th>
<th>username</th>
<th>age</th>
<th>city</th>
<th>product_id</th>
<th>product_name</th>
<th>price</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>cuong</td>
<td>20</td>
<td>Hanoi</td>
<td>1</td>
<td>mac</td>
<td>2000</td>
</tr>
<tr class="even">
<td>2</td>
<td>phong</td>
<td>25</td>
<td>HCM</td>
<td>1</td>
<td>mac</td>
<td>2000</td>
</tr>
<tr class="odd">
<td>1</td>
<td>cuong</td>
<td>20</td>
<td>Hanoi</td>
<td>2</td>
<td>iphone</td>
<td>1000</td>
</tr>
<tr class="even">
<td>2</td>
<td>phong</td>
<td>25</td>
<td>HCM</td>
<td>2</td>
<td>iphone</td>
<td>1000</td>
</tr>
</tbody>
</table>
<p>Basically, each row of the User table will match with all rows of the Product table, and vice versa.</p>
</section>
<section id="natural-join" class="level3">
<h3 class="anchored" data-anchor-id="natural-join">Natural Join</h3>
<p>Now if users decide to select and buy some products, we will have bookings.</p>
<p><em>Booking</em></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>id</th>
<th>product_id</th>
<th>user_id</th>
<th>status</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>1</td>
<td>1</td>
<td>Done</td>
</tr>
<tr class="even">
<td>2</td>
<td>2</td>
<td>2</td>
<td>Processing</td>
</tr>
<tr class="odd">
<td>3</td>
<td>2</td>
<td>1</td>
<td>Done</td>
</tr>
</tbody>
</table>
<p>If we do <strong>Natural Join</strong> between <code>Booking</code> and <code>User</code>, like <img src="https://latex.codecogs.com/png.latex?Booking%20%5Cbowtie%20User">, we will merge the same-name column (<code>user_id</code> here) and remove rows that have different values of the same attribute, keeping rows where <code>user_id</code> values are the same.</p>
<p>First, we do cross product normally:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>id</th>
<th>product_id</th>
<th>user_id</th>
<th>status</th>
<th>user_id</th>
<th>username</th>
<th>age</th>
<th>city</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>1</td>
<td><strong>1</strong></td>
<td>Done</td>
<td><strong>1</strong></td>
<td>cuong</td>
<td>20</td>
<td>Hanoi</td>
</tr>
<tr class="even">
<td>2</td>
<td>2</td>
<td>2</td>
<td>Processing</td>
<td>1</td>
<td>cuong</td>
<td>20</td>
<td>Hanoi</td>
</tr>
<tr class="odd">
<td>3</td>
<td>2</td>
<td><strong>1</strong></td>
<td>Done</td>
<td><strong>1</strong></td>
<td>cuong</td>
<td>20</td>
<td>Hanoi</td>
</tr>
<tr class="even">
<td>1</td>
<td>1</td>
<td>1</td>
<td>Done</td>
<td>2</td>
<td>phong</td>
<td>25</td>
<td>HCM</td>
</tr>
<tr class="odd">
<td>2</td>
<td>2</td>
<td><strong>2</strong></td>
<td>Processing</td>
<td><strong>2</strong></td>
<td>phong</td>
<td>25</td>
<td>HCM</td>
</tr>
<tr class="even">
<td>3</td>
<td>2</td>
<td>1</td>
<td>Done</td>
<td>2</td>
<td>phong</td>
<td>25</td>
<td>HCM</td>
</tr>
</tbody>
</table>
<p>We have 3 bookings and 2 users, thatâ€™s why we have 6 rows. But <code>user_id</code> from Booking and <code>user_id</code> from User actually reflect the same thing (identify User), so we merge these 2 columns.</p>
<p>We keep rows that have the same <code>user_id</code> (bold), because thatâ€™s the actual <strong>match</strong> between 2 tables. We want to know which bookings <strong>user_id 1</strong> made, and we identify that by matching the <code>user_id</code> between 2 tables.</p>
<p>Final table (column <strong>user_id</strong> is merged):</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>id</th>
<th>product_id</th>
<th>user_id</th>
<th>status</th>
<th>username</th>
<th>age</th>
<th>city</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>1</td>
<td><strong>1</strong></td>
<td>Done</td>
<td>cuong</td>
<td>20</td>
<td>Hanoi</td>
</tr>
<tr class="even">
<td>3</td>
<td>2</td>
<td><strong>1</strong></td>
<td>Done</td>
<td>cuong</td>
<td>20</td>
<td>Hanoi</td>
</tr>
<tr class="odd">
<td>2</td>
<td>2</td>
<td><strong>2</strong></td>
<td>Processing</td>
<td>phong</td>
<td>25</td>
<td>HCM</td>
</tr>
</tbody>
</table>
<p>After natural join, we can apply Select and Project to get the values we want:</p>
<p><img src="https://latex.codecogs.com/png.latex?%5CPi_%7Bid,%20product%5C_id,%20username%7D(%5Csigma_%7Bstatus%20=%20'Done'%7D%20(Booking%20%5Cbowtie%20User))"></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>id</th>
<th>product_id</th>
<th>status</th>
<th>username</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>1</td>
<td>Done</td>
<td>cuong</td>
</tr>
<tr class="even">
<td>3</td>
<td>2</td>
<td>Done</td>
<td>cuong</td>
</tr>
</tbody>
</table>
</section>
<section id="theta-join" class="level3">
<h3 class="anchored" data-anchor-id="theta-join">Theta Join</h3>
<p><strong>Theta join</strong> is cross-product with a condition.</p>
<p>Imagine we have an age table which defines the min age for users of each city:</p>
<p><em>Age table</em></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>city</th>
<th>min_age</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Hanoi</td>
<td>20</td>
</tr>
<tr class="even">
<td>HCM</td>
<td>35</td>
</tr>
</tbody>
</table>
<p>If we want to find users from Hanoi that satisfy the condition <code>age &gt;= min_age</code>, we will have to do cross-product:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>user_id</th>
<th>username</th>
<th>age</th>
<th>city</th>
<th>city</th>
<th>min_age</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>cuong</td>
<td>20</td>
<td>Hanoi</td>
<td>Hanoi</td>
<td>20</td>
</tr>
<tr class="even">
<td>2</td>
<td>phong</td>
<td>25</td>
<td>HCM</td>
<td>Hanoi</td>
<td>20</td>
</tr>
<tr class="odd">
<td>1</td>
<td>cuong</td>
<td>20</td>
<td>Hanoi</td>
<td>HCM</td>
<td>35</td>
</tr>
<tr class="even">
<td>2</td>
<td>phong</td>
<td>25</td>
<td>HCM</td>
<td>HCM</td>
<td>35</td>
</tr>
</tbody>
</table>
<p>If we want the city and age to match the condition, we have to eliminate tuples that donâ€™t have the same city, and where <code>age &lt; min_age</code>:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>user_id</th>
<th>username</th>
<th>age</th>
<th>city</th>
<th>city</th>
<th>min_age</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>cuong</td>
<td>20</td>
<td>Hanoi</td>
<td>Hanoi</td>
<td>20</td>
</tr>
</tbody>
</table>
</section>
<section id="union-operator" class="level3">
<h3 class="anchored" data-anchor-id="union-operator">Union Operator</h3>
<p>Two tables with the same columns (attributes):</p>
<p><em>Car</em></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>id</th>
<th>name</th>
<th>brand</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>civic</td>
<td>honda</td>
</tr>
<tr class="even">
<td>2</td>
<td>glc</td>
<td>mercedes</td>
</tr>
</tbody>
</table>
<p><em>Bike</em></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>id</th>
<th>name</th>
<th>brand</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>air blade</td>
<td>honda</td>
</tr>
<tr class="even">
<td>2</td>
<td>glc</td>
<td>mercedes</td>
</tr>
</tbody>
</table>
<p>The union of 2 tables will be:</p>
<p><img src="https://latex.codecogs.com/png.latex?Car%20%5Ccup%20Bike"></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>id</th>
<th>name</th>
<th>brand</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>civic</td>
<td>honda</td>
</tr>
<tr class="even">
<td>2</td>
<td>glc</td>
<td>mercedes</td>
</tr>
<tr class="odd">
<td>1</td>
<td>air blade</td>
<td>honda</td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The primary key (<code>id</code>) seems like itâ€™s duplicated in the union table. Thatâ€™s because the key is now a combination of (<code>id</code>, <code>name</code>, <code>brand</code>).</p>
</div>
</div>
</section>
<section id="intersection" class="level3">
<h3 class="anchored" data-anchor-id="intersection">Intersection</h3>
<p>Returns tuples which are identical in both tables:</p>
<p><img src="https://latex.codecogs.com/png.latex?Car%20%5Ccap%20Bike"></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>id</th>
<th>name</th>
<th>brand</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>2</td>
<td>glc</td>
<td>mercedes</td>
</tr>
</tbody>
</table>
</section>
<section id="difference" class="level3">
<h3 class="anchored" data-anchor-id="difference">Difference</h3>
<p>Returns tuples which are in the first table but not in the second:</p>
<p><img src="https://latex.codecogs.com/png.latex?Car%20-%20Bike"></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>id</th>
<th>name</th>
<th>brand</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>civic</td>
<td>honda</td>
</tr>
</tbody>
</table>
</section>
<section id="rename-operator" class="level3">
<h3 class="anchored" data-anchor-id="rename-operator">Rename Operator</h3>
<p>If we want to do those 3 operators but the names of attributes are different, we can rename them:</p>
<p><img src="https://latex.codecogs.com/png.latex?%5Crho_%7Bid,%20name,%20brand%20%5Crightarrow%20id,%20name,%20new%5C_brand%7D(Car)"></p>
</section>
</section>
<section id="sql" class="level2">
<h2 class="anchored" data-anchor-id="sql">SQL</h2>
<p><strong>SQL</strong> is based on relational algebra â€” you can say itâ€™s implemented relational algebra in most database systems.</p>
<p><strong>DDL</strong> (Data Definition Language): commands used to create tables, drop tables.</p>
<p><strong>DML</strong> (Data Manipulation Language): commands used to select, insert, delete, update tables.</p>
<section id="basic-select-statement" class="level3">
<h3 class="anchored" data-anchor-id="basic-select-statement">Basic SELECT Statement</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb3-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">SELECT</span> A1, A2, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">..</span>., An</span>
<span id="cb3-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">FROM</span> R1, R2, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">..</span>., Rn</span>
<span id="cb3-3"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">WHERE</span> condition</span></code></pre></div></div>
<p>The order is:</p>
<ol type="1">
<li><strong>FROM</strong> â€” identifies the relations</li>
<li><strong>WHERE</strong> â€” validates rows that satisfy the condition</li>
<li><strong>SELECT</strong> â€” projects columns we want</li>
</ol>
<p>In the language of Relational Algebra:</p>
<p><img src="https://latex.codecogs.com/png.latex?%5CPi_%7BA1,%20A2,%20...,%20An%7D%20(%5Csigma_%7Bcondition%7D(R1%20%5Ctimes%20R2%20%5Ctimes%20...%20%5Ctimes%20Rn))"></p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>The <strong>FROM</strong> statement means we do cross-product if we add multiple relations.</p>
</div>
</div>
</section>
<section id="subqueries" class="level3">
<h3 class="anchored" data-anchor-id="subqueries">Subqueries</h3>
<p>A <strong>subquery</strong> is a SQL query nested inside a larger query.</p>
<p>A subquery may occur in:</p>
<ul>
<li><code>SELECT</code> clause</li>
<li><code>FROM</code> clause</li>
<li><code>WHERE</code> clause</li>
</ul>
<p>Example: if a subquery is in the WHERE clause, we want the condition in WHERE to become a SQL query itself:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb4-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">SELECT</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span></span>
<span id="cb4-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">FROM</span> Users</span>
<span id="cb4-3"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">WHERE</span> user_id <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">IN</span> (</span>
<span id="cb4-4">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">SELECT</span> user_id</span>
<span id="cb4-5">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">FROM</span> Booking</span>
<span id="cb4-6">)</span></code></pre></div></div>
<p>In the example above, we execute a query before executing the WHERE clause. We get the column <code>user_id</code> from the Booking table, then use those <code>user_id</code> values as a condition for the bigger query.</p>


</section>
</section>

 ]]></description>
  <category>sql</category>
  <category>data</category>
  <guid>https://pakota159.github.io/posts/sql-relational-db/</guid>
  <pubDate>Sat, 08 Aug 2020 17:00:00 GMT</pubDate>
  <media:content url="https://pakota159.github.io/img/sql/bg.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>CS 61B Berkeley - Java and Data Structures Review</title>
  <dc:creator>Cuong Pham</dc:creator>
  <link>https://pakota159.github.io/posts/review-cs-61b/</link>
  <description><![CDATA[ 




<p>The most common way to execute a Java program is to run it through a sequence of two programs. The first is the Java compiler, or <code>javac</code>. The second is the Java interpreter, or <code>java</code>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pakota159.github.io/img/review/java1.png" class="img-fluid figure-img"></p>
<figcaption>Java compilation process</figcaption>
</figure>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">javac</span> HelloWorld.java</span>
<span id="cb1-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">java</span> HelloWorld</span></code></pre></div></div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb2-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">public</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">class</span> HelloWorld <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb2-2">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">public</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">static</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">void</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">main</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">String</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[]</span> args<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb2-3">        <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">System</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">out</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">println</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Hello world!"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">);</span></span>
<span id="cb2-4">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb2-5"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span></code></pre></div></div>
<p>Variables in Java are strictly defined with a specific type. You canâ€™t change the type of variable after defining it.</p>
<ul>
<li><code>System.out.println</code> prints to screen (like stdout), with <code>\n</code> at the end of line</li>
<li><code>System.out.print</code> same as above but without <code>\n</code></li>
</ul>
<p>Conditional statements are similar to JavaScript.</p>
<section id="data-types" class="level2">
<h2 class="anchored" data-anchor-id="data-types">Data Types</h2>
<section id="primitive-types" class="level3">
<h3 class="anchored" data-anchor-id="primitive-types">Primitive Types</h3>
<p>There are 8 primitive types in Java:</p>
<ol type="1">
<li><code>byte</code></li>
<li><code>short</code></li>
<li><code>int</code></li>
<li><code>long</code></li>
<li><code>float</code></li>
<li><code>double</code> â€” stores approximations of real numbers</li>
<li><code>boolean</code></li>
<li><code>char</code></li>
</ol>
</section>
<section id="reference-type" class="level3">
<h3 class="anchored" data-anchor-id="reference-type">Reference Type</h3>
<ol start="9" type="1">
<li>References to Objects</li>
</ol>
<p>When you declare a variable of a certain type in Java:</p>
<ul>
<li>Your computer sets aside exactly enough bits to hold a thing of that type. Example: Declaring an <code>int</code> sets aside a â€œboxâ€ of 32 bits.</li>
<li>Java creates an internal table that maps each variable name to a location.</li>
<li>Java does NOT write anything into the reserved boxes â€” for safety, Java will not let you access a variable that is uninitialized.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pakota159.github.io/img/review/java2.png" class="img-fluid figure-img"></p>
<figcaption>Variable declaration in memory</figcaption>
</figure>
</div>
</section>
</section>
<section id="the-golden-rule-of-equals-groe" class="level2">
<h2 class="anchored" data-anchor-id="the-golden-rule-of-equals-groe">The Golden Rule of Equals (GRoE)</h2>
<p>Given variables <code>y</code> and <code>x</code>:</p>
<blockquote class="blockquote">
<p><strong>y = x</strong> copies all the bits from x into y.</p>
</blockquote>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pakota159.github.io/img/review/java3.png" class="img-fluid figure-img"></p>
<figcaption>GRoE example 1</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pakota159.github.io/img/review/java4.png" class="img-fluid figure-img"></p>
<figcaption>GRoE example 2</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pakota159.github.io/img/review/java5.png" class="img-fluid figure-img"></p>
<figcaption>GRoE example 3</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pakota159.github.io/img/review/java6.png" class="img-fluid figure-img"></p>
<figcaption>GRoE example 4</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pakota159.github.io/img/review/java7.png" class="img-fluid figure-img"></p>
<figcaption>GRoE example 5</figcaption>
</figure>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Use the <code>private</code> keyword to prevent code in other classes from using members (or constructors) of a class.</p>
</div>
</div>
</section>
<section id="functions" class="level2">
<h2 class="anchored" data-anchor-id="functions">Functions</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb3-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">public</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">static</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">int</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">int</span> x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">int</span> y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb3-2">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb3-3">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb3-4">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb3-5">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb3-6"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span></code></pre></div></div>
<p>Same as in C, we declare functions with name, type of output, and parameters.</p>
</section>
<section id="arrays" class="level2">
<h2 class="anchored" data-anchor-id="arrays">Arrays</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb4-1"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">int</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[]</span> numbers <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">new</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">int</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">];</span></span>
<span id="cb4-2">numbers<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb4-3">numbers<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb4-4">numbers<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb4-5"></span>
<span id="cb4-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Or this way</span></span>
<span id="cb4-7"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">int</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[]</span> numbers <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">new</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">int</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[]{</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">};</span></span></code></pre></div></div>
<p>We create a new instance of class <code>int</code> named <code>numbers</code> which is an array of 3 integers. You can get the length of an array by using <code>.length</code>.</p>
<section id="for-loop" class="level3">
<h3 class="anchored" data-anchor-id="for-loop">For Loop</h3>
<p><code>for</code> loop syntax is similar to JavaScript. <code>break</code> and <code>continue</code> work similarly as well:</p>
<ul>
<li><code>continue</code> â€” skips the rest of the current iteration and jumps to the next increment condition</li>
<li><code>break</code> â€” terminates the innermost loop</li>
</ul>
</section>
<section id="enhanced-for-loop" class="level3">
<h3 class="anchored" data-anchor-id="enhanced-for-loop">Enhanced For Loop</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb5-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">String</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[]</span> arr <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"y"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">};</span></span>
<span id="cb5-2"></span>
<span id="cb5-3"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">String</span> element <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> arr<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb5-4">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">System</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">out</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">println</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>element<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">);</span></span>
<span id="cb5-5"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span></code></pre></div></div>
<p>This is similar to <code>for in</code> in Python.</p>
</section>
</section>
<section id="object-oriented-programming" class="level2">
<h2 class="anchored" data-anchor-id="object-oriented-programming">Object-Oriented Programming</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb6-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// This class can be run directly because it has main() method</span></span>
<span id="cb6-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Similar idea as C</span></span>
<span id="cb6-3"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">public</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">class</span> Otoke <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb6-4">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">public</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">static</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">void</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">main</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">String</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[]</span> args<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb6-5"></span>
<span id="cb6-6">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb6-7"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb6-8"></span>
<span id="cb6-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// This class can't be run directly because there is no main method</span></span>
<span id="cb6-10"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">class</span> Dog <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb6-11">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// weight is an Instance variable</span></span>
<span id="cb6-12">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">public</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">int</span> weight<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb6-13">    </span>
<span id="cb6-14">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Static method or variable can only be accessed by Class, not instance</span></span>
<span id="cb6-15">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">public</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">static</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">String</span> TYPE <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"animal"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb6-16"></span>
<span id="cb6-17">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Constructor: (similar to a method, but not a method)</span></span>
<span id="cb6-18">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Determines how to instantiate the class</span></span>
<span id="cb6-19">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">public</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Dog</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">int</span> initWeight<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb6-20">        weight <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> initWeight<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb6-21">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb6-22"></span>
<span id="cb6-23">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Non-static method, a.k.a. Instance Method</span></span>
<span id="cb6-24">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// If the method needs to use "instance variables", </span></span>
<span id="cb6-25">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// the method must be non-static</span></span>
<span id="cb6-26">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">public</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">void</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">doubleWeight</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">()</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb6-27">        <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">System</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">out</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">println</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>weight <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">);</span></span>
<span id="cb6-28">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb6-29"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb6-30"></span>
<span id="cb6-31"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">public</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">class</span> Main <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb6-32">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">public</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">static</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">void</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">main</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">String</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[]</span> args<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb6-33">        Dog smallDog<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span>              <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Declaration of a Dog variable</span></span>
<span id="cb6-34">        <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">new</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Dog</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">);</span>               <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Instantiation of the Dog class</span></span>
<span id="cb6-35">        smallDog <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">new</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Dog</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">);</span>     <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Instantiation and Assignment</span></span>
<span id="cb6-36">        Dog hugeDog <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">new</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Dog</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">150</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">);</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Declaration, Instantiation and Assignment</span></span>
<span id="cb6-37">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb6-38"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span></code></pre></div></div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Important</span>Static vs Instance Methods
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>Static methods</strong> are invoked using the class name: <code>Dog.makeNoise();</code></li>
<li><strong>Instance methods</strong> are invoked using an instance name: <code>maya.makeNoise();</code></li>
<li><strong>Static methods canâ€™t access instance variables</strong>, because there is no â€œmeâ€</li>
</ul>
</div>
</div>
<section id="command-line-arguments" class="level3">
<h3 class="anchored" data-anchor-id="command-line-arguments">Command Line Arguments</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb7-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">public</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">static</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">void</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">main</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">String</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[]</span> args<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb7-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// args is an array of command line arguments</span></span>
<span id="cb7-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// access item in array by args[index]</span></span>
<span id="cb7-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// args[0] means first argument after filename</span></span></code></pre></div></div>
</section>
</section>
<section id="nested-classes" class="level2">
<h2 class="anchored" data-anchor-id="nested-classes">Nested Classes</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb8-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">public</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">class</span> SLList <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb8-2">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">public</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">class</span> IntNode <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Define a class inside another</span></span>
<span id="cb8-3">        <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">public</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">int</span> item<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb8-4">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb8-5">    </span>
<span id="cb8-6">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">private</span> IntNode stuff<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Use that to declare a new variable</span></span>
<span id="cb8-7"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span></code></pre></div></div>
<p>Nested Classes are useful when a class doesnâ€™t stand on its own and is obviously subordinate to another class.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>When to use nested classes
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>Make the nested class private</strong> if other classes should never use the nested class</li>
<li><strong>Declare it static</strong> if the nested class never uses any instance variables or methods of the outer class</li>
<li>Static classes cannot access outer classâ€™s instance variables or methods</li>
<li>Results in a minor savings of memory</li>
</ul>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pakota159.github.io/img/review/java8.png" class="img-fluid figure-img"></p>
<figcaption>Nested class diagram</figcaption>
</figure>
</div>
</section>
<section id="caching" class="level2">
<h2 class="anchored" data-anchor-id="caching">Caching</h2>
<p><strong>Caching idea</strong>: putting aside data to speed up retrieval.</p>
<p>Every time we add a new node to SLList, we increment the <code>size</code> variable (which is an instance variable). When removing a node, we decrement it.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pakota159.github.io/img/review/java9.png" class="img-fluid figure-img"></p>
<figcaption>Caching in SLList</figcaption>
</figure>
</div>
</section>
<section id="sllist---singly-linked-list" class="level2">
<h2 class="anchored" data-anchor-id="sllist---singly-linked-list">SLList - Singly Linked List</h2>
<p>Suppose we have a naked linked list (simply a node):</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb9-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">public</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">class</span> IntNode <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb9-2">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">public</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">int</span> item<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span>       <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Item is the integer part of each node</span></span>
<span id="cb9-3">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">public</span> IntNode next<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span>   <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// next is a "pointer"/reference to the next IntNode </span></span>
<span id="cb9-4"></span>
<span id="cb9-5">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">public</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">IntNode</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">int</span> i<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> IntNode n<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Initiation of the node</span></span>
<span id="cb9-6">        item <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> i<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb9-7">        next <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> n<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb9-8">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb9-9"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span></code></pre></div></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pakota159.github.io/img/review/java10.png" class="img-fluid figure-img"></p>
<figcaption>IntNode structure</figcaption>
</figure>
</div>
<p>For better handling with lists, we can wrap the node above inside a Singly Linked List:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb10-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">public</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">class</span> SLList <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb10-2">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">private</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">static</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">class</span> IntNode <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb10-3">        <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">private</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">int</span> item<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb10-4">        <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">private</span> IntNode next<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb10-5"></span>
<span id="cb10-6">        <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">private</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">IntNode</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">int</span> i<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> IntNode n<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb10-7">            item <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> i<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb10-8">            next <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> n<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb10-9">        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb10-10">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb10-11"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span></code></pre></div></div>


</section>

 ]]></description>
  <category>review</category>
  <category>cs</category>
  <category>java</category>
  <guid>https://pakota159.github.io/posts/review-cs-61b/</guid>
  <pubDate>Tue, 05 May 2020 17:00:00 GMT</pubDate>
  <media:content url="https://pakota159.github.io/img/note/sky.png" medium="image" type="image/png" height="66" width="144"/>
</item>
<item>
  <title>How to self-study Computer Science and Data Science</title>
  <dc:creator>Cuong Pham</dc:creator>
  <link>https://pakota159.github.io/posts/cs-learning-guide/</link>
  <description><![CDATA[ 




<p>Today, a friend asked me how to study computer science well â€” a popular question that many others wonder too. Thus, I decided to write an <strong>all-in-one note</strong> to explain in detail about learning computer science and data science as well. Iâ€™m not excellent in computer science at all, and this note is only sharing some experiences I have.</p>
<section id="before-you-start" class="level2">
<h2 class="anchored" data-anchor-id="before-you-start">Before you start</h2>
<p>Knowing where you are is important. You need to understand how much CS knowledge you have. This journey is long and exhausted but I can ensure itâ€™ll be fun as well, if you really like those stuff.</p>
<p>Prepare some things:</p>
<ul>
<li>A notebook and a pen to note and <strong>visualize</strong> important things while you learn such as how HTTP requests are sent and received, how CPU and RAM works, and so on. Visualization always helps you understand things faster and easier.</li>
</ul>
<p>Here are some examples of things I drew when learning about CPU and RAM:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pakota159.github.io/img/note/note1.jpeg" class="img-fluid figure-img"></p>
<figcaption>CPU and RAM notes</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pakota159.github.io/img/note/note2.jpeg" class="img-fluid figure-img"></p>
<figcaption>More visualization notes</figcaption>
</figure>
</div>
<ul>
<li><p>A laptop/computer with Linux/OSX operation system. Yup, you can use Windows if you like, but I prefer Linux to learn programming.</p></li>
<li><p>A lot of time</p></li>
<li><p>And last but not least, a superior unbreakable <strong>persistent mind</strong></p></li>
</ul>
<p>There are 3 parts of this note:</p>
<ol type="1">
<li>Learning <strong>Maths</strong></li>
<li>Learning <strong>Computer Science</strong></li>
<li>Learning <strong>Data Science</strong></li>
</ol>
<p>Maths is basic stuff that support everything else, so I put it into an independent part.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>All 3 parts will only contain <em>materials</em> which I <em>personally</em> like and find them useful the most.</p>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Bold courses</strong> are must-taken or you should be familiar with the outcomes of those courses (so you donâ€™t have to re-take it). Other courses are useful and good to learn.</p>
</div>
</div>
</section>
<section id="learning-path" class="level2">
<h2 class="anchored" data-anchor-id="learning-path">Learning Path</h2>
<p>For those who want to learn programming applied in non-CS areas (like business, finance, health care, â€¦), this is the learning path I think able to help you learn effectively:</p>
<ol type="1">
<li>Read 2 starter books</li>
<li>Do maths courses <strong>Math_01</strong> â†’ <strong>Math_02</strong> â†’ <strong>Math_03</strong> or make sure you understand all the concepts in each course</li>
<li>Do core courses in Computer Science: <strong>1</strong> â†’ <strong>2</strong> â†’ <strong>3</strong> â†’ <strong>8</strong> (in course 8 only need Lecture 1 to 8)</li>
<li>Learn Python: <strong>Py_2</strong> â†’ <strong>Py_5</strong> (do all projects)</li>
<li>Learn DS and Algorithm: <strong>Al_01</strong> â†’ <strong>Al_02</strong> â†’ <strong>Al_05</strong></li>
<li>Do real projects</li>
</ol>
<section id="recommended-certifications" class="level3">
<h3 class="anchored" data-anchor-id="recommended-certifications">Recommended Certifications</h3>
<p>To get some certifications, some courses below are recommended:</p>
<ol type="1">
<li><p><strong>Algorithms</strong>: <a href="https://www.coursera.org/specializations/algorithms">Stanford Course on Coursera</a> - Intermediate Level. You should learn basic algorithms before taking this one (Al_01 is a good start).</p></li>
<li><p><strong>C Programming</strong>: <a href="https://www.edx.org/professional-certificate/dartmouth-imtx-c-programming-with-linux">Dartmouth Course on edX</a> - Intermediate Level. Read the book <strong>C_1</strong> before taking this course. Self-paced, <strong>$308</strong> fee.</p></li>
<li><p><strong>C++ Programming</strong>: Series of 3 courses from Microsoft</p>
<ul>
<li><a href="https://www.edx.org/course/introduction-to-c-5">Intro C++</a></li>
<li><a href="https://www.edx.org/course/intermediate-c-3">Intermediate C++</a></li>
<li><a href="https://www.edx.org/course/advanced-c-3">Advanced C++</a></li>
</ul></li>
<li><p><strong>Python</strong>: <a href="https://www.coursera.org/specializations/data-science-python">Python for Data Science</a> - University of Michigan series</p></li>
</ol>
</section>
</section>
<section id="mathematics" class="level2">
<h2 class="anchored" data-anchor-id="mathematics">Mathematics</h2>
<p>The courses below should be taken in order.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>No.</th>
<th>Course</th>
<th>What you expected to learn</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Math_01</strong></td>
<td><a href="https://ocw.mit.edu/courses/mathematics/18-01sc-single-variable-calculus-fall-2010/"><strong>Single Variable Calculus</strong></a></td>
<td>Limit, Derivatives, Chain Rules, Approximation, Mean Value Theorem, Riemann Sums, The Fundamental Theorem of Calculus, Integrals and Application, Lâ€™Hospitalâ€™s Rule, Infinite Series, Taylorâ€™s Series</td>
</tr>
<tr class="even">
<td><strong>Math_02</strong></td>
<td><a href="https://ocw.mit.edu/courses/mathematics/18-02sc-multivariable-calculus-fall-2010/"><strong>Multivariable Calculus</strong></a></td>
<td>Vectors and operators on vectors, Determinants and Matrices (Basics), Partial Derivatives, Second Derivative Test, Total Differentials and Chain Rule, Gradient, Lagrange Multipliers, Double Integrals, Vector Fields, Curl, Greenâ€™s Theorem, Triple Integrals, Flux, Stokesâ€™ Theorem</td>
</tr>
<tr class="odd">
<td><strong>Math_03</strong></td>
<td><a href="https://math.berkeley.edu/~apaulin/54_002(Spring2018).html"><strong>Math 54 Linear Algebra and Differential Equations</strong></a></td>
<td>Vector Spaces and Linear transformations, subspaces, kernels, range, eigenvalues and eigenvectors, The Gram-Schmidt Process, Least-Squares Problems, Linear Systems of Differential Equations, Fourier Series</td>
</tr>
<tr class="even">
<td>Math_04</td>
<td><a href="https://math.berkeley.edu/~williams/55.html">Math 55 - Discrete Mathematics</a></td>
<td>Propositional logic and equivalences, Sets and set operations, Functions, sequences, cardinality, Solving congruences, Mathematical induction, recursive, Counting, Permutations and combinations, Graphs and graph models, Graph isomorphism</td>
</tr>
</tbody>
</table>
</section>
<section id="computer-science" class="level2">
<h2 class="anchored" data-anchor-id="computer-science">Computer Science</h2>
<section id="before-studying-courses" class="level3">
<h3 class="anchored" data-anchor-id="before-studying-courses">Before studying courses</h3>
<p>You need to read a few books to understand the big pictures of computer science. Read these books in order:</p>
<section id="code-the-hidden-language-of-computer-hardware-and-software" class="level4">
<h4 class="anchored" data-anchor-id="code-the-hidden-language-of-computer-hardware-and-software">1. Code: The Hidden Language of Computer Hardware and Software</h4>
<p>A great book that provides you the first sense of computer science â€” what is binary, how machine understand something like binary and more. I like how the authors represent the physics mechanism of computers, so if you are not so good at physics, this book is even better for you. This book is only 400 pages long, easy to read, therefore I highly recommend it as your first read when starting to learn CS.</p>
</section>
<section id="structure-and-interpretation-of-computer-programs-sicp" class="level4">
<h4 class="anchored" data-anchor-id="structure-and-interpretation-of-computer-programs-sicp">2. Structure and Interpretation of Computer Programs (SICP)</h4>
<p>A legendary book. SICP is the kind of book that is recommended from everywhere in the CS world. It covers a lot of programming aspects from functional programming, abstraction, instruction processor to compilers. This might be quite hard for complete beginners and because this book uses the Scheme programming language, itâ€™s pretty hard to read as well.</p>
</section>
</section>
<section id="core-courses" class="level3">
<h3 class="anchored" data-anchor-id="core-courses">Core Courses</h3>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>There are many things not covered in this path yet (after completing CS61 series). If you want to discover other courses about security, networks, machine learning, look for them on the Internet or search in this <a href="https://hkn.eecs.berkeley.edu/courseguides">awesome guide</a>.</p>
</div>
</div>
<section id="cs50" class="level4">
<h4 class="anchored" data-anchor-id="cs50">1. CS50â€™s Introduction to Computer Science - Harvard</h4>
<p><strong>Link</strong>: <a href="https://www.edx.org/course/cs50s-introduction-computer-science-harvardx-cs50x">edX Course</a></p>
<p>Arguably the best intro course for CS Iâ€™ve ever learnt.</p>
<p><strong>What you can learn:</strong></p>
<ul>
<li>Basic understanding of computer science and programming</li>
<li>Basic algorithms and problem-solving thinking</li>
<li>Concepts like abstraction, data structures, encapsulation, web development</li>
<li>Languages: Python, C, SQL, Javascript</li>
</ul>
</section>
<section id="cs61a" class="level4">
<h4 class="anchored" data-anchor-id="cs61a">2. CS 61A Structure and Interpretation of Computer Programs - Berkeley</h4>
<p><strong>Link</strong>: <a href="https://inst.eecs.berkeley.edu/~cs61a/sp15/">Course Website</a></p>
<p>A truly great course which makes me extremely eager to learn everything from Berkeley. However, to really enjoy it as well as get useful knowledge, you need to put a quite large amount of effort â€” definitely commit to do all the homeworks, assignments, and take all the exams. Might take you few months to actually get things done.</p>
<p><strong>What you can learn:</strong></p>
<ul>
<li>Python and its implementation</li>
<li>Higher-Order Functions, Recursion, Environment diagrams</li>
<li>Data Abstraction</li>
<li>Scheme, Exceptions, Iterators, Streams, SQL</li>
</ul>
</section>
<section id="cs61b" class="level4">
<h4 class="anchored" data-anchor-id="cs61b">3. CS 61B Data Structures - Berkeley</h4>
<p><strong>Videos</strong>: <a href="http://www.infocobuild.com/education/audio-video-courses/computer-science/cs61b-spring2015-berkeley.html">InfoCoBuild</a><br>
<strong>Course</strong>: <a href="http://datastructur.es/sp15/">datastructur.es</a></p>
<p>This one is quite hard for me because I donâ€™t like learning Java much. But I think itâ€™s useful if you want to learn data structures.</p>
<p><strong>What you can learn:</strong></p>
<ul>
<li>Basic Java</li>
<li>Data structures: Lists, Abstract Classes, Trees, BST, Graphs</li>
<li>Algorithms: Sorting and Algorithmic Bounds</li>
</ul>
</section>
<section id="cs70" class="level4">
<h4 class="anchored" data-anchor-id="cs70">4. CS 70 Discrete Mathematics and Probability Theory - Berkeley</h4>
<p><strong>Videos</strong>: <a href="http://www.infocobuild.com/education/audio-video-courses/computer-science/CS70-Spring2015-Berkeley/lecture-01.html">InfoCoBuild</a><br>
<strong>Course</strong>: <a href="https://inst.eecs.berkeley.edu/~cs70/sp15/">Course Website</a></p>
<p>Iâ€™ve not done this course yet. Discrete maths is cool and probability is interesting so Iâ€™ll finish this course soon.</p>
<p><strong>What you can learn:</strong></p>
<ul>
<li>Induction and Recursion</li>
<li>Graphs, Eulerian Tour</li>
<li>Modular Arithmetic</li>
<li>Polynomials, Secret Sharing, Erasure Codes</li>
<li>Probability: Counting, Sample Spaces, Events, Independence, Conditional Probability</li>
<li>Inference</li>
</ul>
</section>
<section id="cs61c" class="level4">
<h4 class="anchored" data-anchor-id="cs61c">5. CS 61C Great Ideas in Computer Architecture - Berkeley</h4>
<p><strong>Videos</strong>: <a href="http://www.infocobuild.com/education/audio-video-courses/computer-science/cs61c-spring2015-berkeley.html">InfoCoBuild</a><br>
<strong>Course</strong>: <a href="http://inst.eecs.berkeley.edu/~cs61c/sp15/">Course Website</a></p>
<p>My favorite one, because you will learn a lot about how machines work under the hood. Not digging too deep but quite good.</p>
<p><strong>What you can learn:</strong></p>
<ul>
<li>C programming</li>
<li>Assembly Language, MIPS Intro</li>
</ul>
</section>
<section id="cs162" class="level4">
<h4 class="anchored" data-anchor-id="cs162">6. CS 162 Operating Systems and Systems Programming - Berkeley</h4>
<p><strong>Videos</strong>: <a href="http://www.infocobuild.com/education/audio-video-courses/computer-science/cs162-spring2015-berkeley.html">InfoCoBuild</a><br>
<strong>Course</strong>: <a href="https://inst.eecs.berkeley.edu/~cs162/sp15/">Course Website</a></p>
<p>A very tough course that I havenâ€™t finished yet. More details about operating systems than CS61C.</p>
<p><strong>What you can learn:</strong></p>
<ul>
<li>Processes, Fork, I/O, Files</li>
<li>Thread, Scheduling, Address Translation, Caching</li>
<li>Performance, Storage Devices, Queueing theory</li>
<li>Distributed Systems, TCP/IP</li>
</ul>
</section>
<section id="cs164" class="level4">
<h4 class="anchored" data-anchor-id="cs164">7. CS164 Programming Languages and Compilers - Berkeley</h4>
<p><strong>Videos</strong>: <a href="http://www.infocobuild.com/education/audio-video-courses/computer-science/cs164-spring2012-berkeley.html">InfoCoBuild</a><br>
<strong>Course</strong>: <a href="https://sites.google.com/a/bodik.org/cs164/">Course Website</a></p>
<p>I have not learned this course, but knowing about programming languages and compilers is surely useful for being a software engineer.</p>
<p><strong>What you can learn:</strong></p>
<ul>
<li>Unit Calculator</li>
<li>Scoping and desugaring</li>
<li>Coroutines and Lazy Iterators</li>
<li>Regular expressions</li>
<li>CYK and Earley Parsers</li>
</ul>
</section>
<section id="cs169" class="level4">
<h4 class="anchored" data-anchor-id="cs169">8. CS169 Software Engineering - Berkeley</h4>
<p><strong>Videos</strong>: <a href="http://www.infocobuild.com/education/audio-video-courses/computer-science/cs169-spring2015-berkeley.html">InfoCoBuild</a><br>
<strong>Course</strong>: <a href="https://sites.google.com/site/ucbcs169fa15/lectures">Course Website</a></p>
<p>I have not learned this course, just read the syllabus and think itâ€™s practical and useful.</p>
<p><strong>What you can learn:</strong></p>
<ul>
<li>Unit Testing</li>
<li>Git</li>
<li>UML</li>
<li>Software processes</li>
<li>MVC, Web development</li>
</ul>
</section>
</section>
<section id="strengthen-your-knowledge" class="level3">
<h3 class="anchored" data-anchor-id="strengthen-your-knowledge">Strengthen your knowledge</h3>
<p>I consider the 8 courses above as core courses that you should take seriously. After that, you now have a good understanding of computer science and are ready to improve yourself even more.</p>
<p>The first thing I want to dig into is <strong>programming languages</strong>. Iâ€™m gonna cover a few most popular ones like C, C++, and Python.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>To practice coding, join some popular competitive coding sites like <a href="https://codeforces.com">Codeforces</a> and <a href="https://www.topcoder.com/">TopCoder</a>.</p>
</div>
</div>
<section id="programming-languages-resources" class="level4">
<h4 class="anchored" data-anchor-id="programming-languages-resources">Programming Languages Resources</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>No.</th>
<th>Language</th>
<th>Resource</th>
<th>Link</th>
<th>Description</th>
<th>Difficulty</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>C_1</td>
<td>C</td>
<td>The C Programming Language</td>
<td><a href="https://www.amazon.com/Programming-Language-2nd-Brian-Kernighan/dp/0131103628">Amazon</a></td>
<td>Most popular C book. Short and great for learning basic concepts</td>
<td>â˜…â˜…â˜†â˜†â˜†</td>
</tr>
<tr class="even">
<td>C_2</td>
<td>C</td>
<td>Practical Programming in C</td>
<td><a href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-087-practical-programming-in-c-january-iap-2010/assignments/">MIT OCW</a></td>
<td>MIT course with good practice problems and solutions</td>
<td>â˜…â˜…â˜…â˜†â˜†</td>
</tr>
<tr class="odd">
<td>C++_1</td>
<td>C++</td>
<td>Learn C++</td>
<td><a href="https://www.learncpp.com/">learncpp.com</a></td>
<td>Great and detailed tutorial about C++</td>
<td>â˜…â˜…â˜†â˜†â˜†</td>
</tr>
<tr class="even">
<td>C++_2</td>
<td>C++</td>
<td>Accelerated C++</td>
<td><a href="https://www.amazon.com/Accelerated-C-Practical-Programming-Example/dp/020170353X">Amazon</a></td>
<td>Practices and examples</td>
<td>â˜…â˜…â˜…â˜†â˜†</td>
</tr>
<tr class="odd">
<td>C++_3</td>
<td>C++</td>
<td>The C++ Programming Language</td>
<td><a href="https://www.amazon.com/C-Programming-Language-4th/dp/0321563840/">Amazon</a></td>
<td>Detailed book from author of C++ itself</td>
<td>â˜…â˜…â˜…â˜†â˜†</td>
</tr>
<tr class="even">
<td>Py_1</td>
<td>Python</td>
<td>Official Docs</td>
<td><a href="https://docs.python.org/3/tutorial/index.html">python.org</a></td>
<td>Where I started learning Python â€” detailed and up-to-date</td>
<td>â˜…â˜…â˜…â˜†â˜†</td>
</tr>
<tr class="odd">
<td>Py_2</td>
<td>Python</td>
<td>Learn Python the Hard Way</td>
<td><a href="https://learnpythonthehardway.org/python3/">Website</a></td>
<td>Simple intro to Python</td>
<td>â˜…â˜†â˜†â˜†â˜†</td>
</tr>
<tr class="even">
<td>Py_3</td>
<td>Python</td>
<td>Real Python</td>
<td><a href="https://realpython.com/">realpython.com</a></td>
<td>Detailed examples for practice</td>
<td>â˜…â˜…â˜†â˜†â˜†</td>
</tr>
<tr class="odd">
<td>Py_4</td>
<td>Python</td>
<td>Full Stack Python</td>
<td><a href="https://www.fullstackpython.com/">fullstackpython.com</a></td>
<td>Learn what you need to build Python apps</td>
<td>â˜…â˜…â˜…â˜…â˜†</td>
</tr>
<tr class="even">
<td>Py_5</td>
<td>Python</td>
<td>Automate the Boring Stuff</td>
<td><a href="https://automatetheboringstuff.com/">Website</a></td>
<td>Learn to build cool Python projects</td>
<td>â˜…â˜…â˜†â˜†â˜†</td>
</tr>
</tbody>
</table>
</section>
<section id="data-structures-and-algorithms" class="level4">
<h4 class="anchored" data-anchor-id="data-structures-and-algorithms">Data Structures and Algorithms</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>No.</th>
<th>Resource</th>
<th>Link</th>
<th>What you expected to learn</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Al_01</td>
<td>Introduction to Algorithms</td>
<td><a href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-006-introduction-to-algorithms-fall-2011/">MIT OCW</a></td>
<td>Basic algorithms from MIT</td>
</tr>
<tr class="even">
<td>Al_02</td>
<td>Design and Analysis of Algorithms</td>
<td><a href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-046j-design-and-analysis-of-algorithms-spring-2015/index.htm">MIT OCW</a></td>
<td>Part 2: divide and conquer, dynamic programming, complexity</td>
</tr>
<tr class="odd">
<td>Al_03</td>
<td>Advanced Algorithms</td>
<td><a href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-854j-advanced-algorithms-fall-2008/">MIT OCW</a></td>
<td>Part 3 with advanced algorithms</td>
</tr>
<tr class="even">
<td>Al_04</td>
<td>Data Structures and Algorithms</td>
<td><a href="https://www.youtube.com/playlist?list=PLE621E25B3BF8B9D1">YouTube Playlist</a></td>
<td>Richard Bucklandâ€™s course on basic data structures</td>
</tr>
<tr class="odd">
<td>Al_05</td>
<td>CS 186: Introduction to Database Systems</td>
<td><a href="http://www.infocobuild.com/education/audio-video-courses/computer-science/cs186-spring2015-berkeley.html">InfoCoBuild</a></td>
<td>Database management systems, SQL</td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="data-science" class="level2">
<h2 class="anchored" data-anchor-id="data-science">Data Science</h2>
<section id="probability-and-statistics" class="level3">
<h3 class="anchored" data-anchor-id="probability-and-statistics">Probability and Statistics</h3>
<section id="probability-and-statistics---stanford-online" class="level4">
<h4 class="anchored" data-anchor-id="probability-and-statistics---stanford-online">1. Probability and Statistics - Stanford Online</h4>
<p><strong>Link</strong>: <a href="https://lagunita.stanford.edu/courses/course-v1:OLI+ProbStat+Open_Jan2017/about">Stanford Lagunita</a></p>
<p>A solid foundation in probability and statistics from Stanford.</p>
</section>
<section id="probabilistic-systems-analysis-and-applied-probability---mit" class="level4">
<h4 class="anchored" data-anchor-id="probabilistic-systems-analysis-and-applied-probability---mit">2. Probabilistic Systems Analysis and Applied Probability - MIT</h4>
<p><strong>Link</strong>: <a href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-041sc-probabilistic-systems-analysis-and-applied-probability-fall-2013/">MIT OCW</a></p>
<p>This course and the Stanford one can be taken separately (you can choose one of them). But for me, I took both and studied at the same time. The MIT course is more engineering-focused while the Stanford course is more statistics-focused.</p>


</section>
</section>
</section>

 ]]></description>
  <category>cs</category>
  <category>learning</category>
  <category>data</category>
  <guid>https://pakota159.github.io/posts/cs-learning-guide/</guid>
  <pubDate>Wed, 14 Aug 2019 17:00:00 GMT</pubDate>
  <media:content url="https://pakota159.github.io/img/note/bg.png" medium="image" type="image/png" height="81" width="144"/>
</item>
<item>
  <title>Working with Spotify API to collect music data</title>
  <dc:creator>Cuong Pham</dc:creator>
  <link>https://pakota159.github.io/posts/using-spotify-api-to-retrieve-data/</link>
  <description><![CDATA[ 




<p>Recently, I am working on a personal project related to analysing music taste of people and it requires retrieving data from some music sources like Spotify. And fortunely, it provides some quite useful APIs that I would like to share here.</p>
<section id="disclaimer" class="level2">
<h2 class="anchored" data-anchor-id="disclaimer">Disclaimer</h2>
<p>This is only a part of my project, with some demo codes without unit testing, error handling and other parts for a completed project.</p>
</section>
<section id="what-i-want" class="level2">
<h2 class="anchored" data-anchor-id="what-i-want">What I want</h2>
<p>Basically, I need a list of <strong>Playlists</strong> from Spotify including meta data of each playlist like tracks from playlist.</p>
<p>So, technically speaking:</p>
<p>My input:</p>
<ul>
<li>User authentication token (Spotify APIs <em>doesnâ€™t requires</em> it, but I do want to use because it give me <em>higher rate limits</em>)</li>
</ul>
<p>And I expect an output like:</p>
<ul>
<li>JSON data with <strong>Playlist info</strong>, including <em>metadata</em> as tracks in each playlist.</li>
</ul>
<p>Okay, I pictured my goals and itâ€™s time to get things done.</p>
</section>
<section id="lets-start" class="level2">
<h2 class="anchored" data-anchor-id="lets-start">Letâ€™s start</h2>
<p>Simply enough, Iâ€™ll start with the <a href="https://developer.spotify.com/documentation/web-api/quick-start/">docs</a> from official page.</p>
<p>We need to <strong>create Spotify account</strong> first that can be done easily from <a href="https://www.spotify.com">https://www.spotify.com</a></p>
<p>Then you need to <strong>create developer account</strong> to use APIs <a href="https://developer.spotify.com/dashboard/login">https://developer.spotify.com/dashboard/login</a></p>
<p>And last but not least, create <strong>an app</strong> from the dashboard <a href="https://developer.spotify.com/dashboard/applications">https://developer.spotify.com/dashboard/applications</a> to get <em>client id</em> and <em>client secret</em></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pakota159.github.io/img/spotify/spotify1.png" class="img-fluid figure-img"></p>
<figcaption>Create Spotify App</figcaption>
</figure>
</div>
<p>Install Nodejs because weâ€™ll need a server-side application.</p>
<p>Clone the repo <a href="https://github.com/spotify/web-api-auth-examples">https://github.com/spotify/web-api-auth-examples</a> that contains the authentication example app which provides a interface to register Spotify user account to our Spotify app.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> clone https://github.com/spotify/web-api-auth-examples auth-app</span></code></pre></div></div>
<p>Then run npm to install required packages like express, request and querystring.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> auth-app</span>
<span id="cb2-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">npm</span> install</span></code></pre></div></div>
<p>After install, we will see a new folder <code>node_modules</code> that contains all the installed modules. Now go into the code of this auth-app:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> authorization_code</span></code></pre></div></div>
<p>There are 2 things inside, the <code>app.js</code> is the main code of the application, folder <code>public</code> contains a <code>html</code> file.</p>
<p>Inside <code>app.js</code> there are 3 things you should care about:</p>
<ul>
<li><code>client_id</code>: Client Id of your app. (After create a new app as above, in the dashboard)</li>
<li><code>client_secret</code>: Client Secret of your app.</li>
<li><code>redirect_uri</code>: the url we will redirect after authenticating successfully.</li>
</ul>
<p>The port of server is set to be <code>8888</code>, so I will set redirect_uri base on it:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb4-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">var</span> redirect_uri <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'http://localhost:8888/callback/'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span></code></pre></div></div>
<p>You also need to <strong>whitelist</strong> your redirect_uri in the settings of your app.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pakota159.github.io/img/spotify/spotify3.png" class="img-fluid figure-img"></p>
<figcaption>Whitelist redirect URI</figcaption>
</figure>
</div>
<p>Now go to <code>http://localhost:8888</code> and follow all steps to login and you should be redirect to this after successfully login.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pakota159.github.io/img/spotify/spotify2.png" class="img-fluid figure-img"></p>
<figcaption>Login success</figcaption>
</figure>
</div>
</section>
<section id="working-with-playlists" class="level2">
<h2 class="anchored" data-anchor-id="working-with-playlists">Working with playlists</h2>
<p>Now itâ€™s the fun part. How can I retrieve data of playlists I need?</p>
<p>After reading the <a href="https://developer.spotify.com/documentation/web-api/reference/playlists/">documents</a>, I have a brief understand about what I can do with this api.</p>
<p>There are 3 ways to get info about playlists:</p>
<ul>
<li>Using API <code>/v1/users/{user_id}/playlists</code> to acquire playlists of a specific <strong>user_id</strong></li>
<li>Using API <code>/v1/search</code> to search and return playlists with a specific <strong>query keyword</strong></li>
<li>Using API <code>/v1/browse/categories/{category_id}/playlists</code> to retrieve playlists from a specific <strong>category</strong></li>
</ul>
<p>I want to use the third method, because the playlists Iâ€™m interested in should be distinguished by <em>category</em> instead of user, or query keywords.</p>
<p>There are many categories in spotify, and each category contains many playlists, each playlist has many tracks too. But I donâ€™t want to get all playlists from each category, so I donâ€™t have to call too many apis.</p>
<p>The expected output is something like this â€” for each category, I retrieve 5 playlists, and for each playlist, I want all tracks with its name, singer, and other data:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb5-1"><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb5-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb5-3">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"category"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"A"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-4">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"playlists"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb5-5">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb5-6">        <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"name"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"First playlist"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-7">        <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"tracks"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb5-8">          <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb5-9">            <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"track_name"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Song 1"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-10">            <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"singer"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"B"</span></span>
<span id="cb5-11">          <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb5-12">        <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb5-13">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb5-14">    <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb5-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb5-16"><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">]</span></span></code></pre></div></div>
<p>To be able to <strong>manipulate data</strong> conveniently, I would like to save category, playlists, and tracks in database.</p>
<p>Iâ€™ll use <strong>mongodb</strong> because itâ€™s the most familiar database to me. You can use any of <a href="https://expressjs.com/en/guide/database-integration.html">these</a>.</p>
<p>First, copy the access token in the login page above and assign it to new variable in <code>app.js</code>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb6-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">var</span> acc_token <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'&lt;your access token&gt;'</span></span></code></pre></div></div>
<p>Then install mongoose package:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">npm</span> install mongoose</span></code></pre></div></div>
<p>Mongoose is a mongodb object modeling tool designed to work in an asynchronous environment or in this case, nodejs. Add mongoose:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb8-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">var</span> mongoose <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">require</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'mongoose'</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb8-2"></span>
<span id="cb8-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Connect mongoose to our database named spotify.</span></span>
<span id="cb8-4">mongoose<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">connect</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'mongodb://127.0.0.1/spotify'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">useNewUrlParser</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">true</span>})<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb8-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// useNewUrlParser to fix a DeprecationWarning</span></span>
<span id="cb8-6"></span>
<span id="cb8-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Declare schema</span></span>
<span id="cb8-8"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> Schema <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> mongoose<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Schema</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span></code></pre></div></div>
</section>
<section id="design-database" class="level2">
<h2 class="anchored" data-anchor-id="design-database">Design database</h2>
<p>We obviously care 3 objects here: category, playlist and track, but how to design our database to store and manipulate data effectively?</p>
<p>There are 2 ways to design our model.</p>
<p>The first one is store all 3 objects above into 1 Schema. I can call it <strong>Category_Detail</strong> model. The advantage is whenever I want to retrieve data from db, I only have to access one model, no need to use reference fields.</p>
<p>The disadvantage is, as I considered, bigger because I will need to store my playlists in each <em>Category_Detail</em> as an <em>array</em> which makes thing hard to update, and with each playlist I need another array for tracks, so 2 nested arrays are too complicated for a model like this.</p>
<p>Thus, I decide to use the second way to design my model â€” 3 seperated models as following <em>category</em>, <em>playlist</em> and <em>track</em>. Playlist will contains 1 reference field that refers to category, and track will contains 1 reference field refers to playlist that it belongs to.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb9-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> CategorySchema <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">new</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Schema</span>({</span>
<span id="cb9-2">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">cat_name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">String</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb9-3">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">cat_id</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">String</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb9-4">})<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb9-5"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> Category <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> mongoose<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">model</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Category'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> CategorySchema)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb9-6"></span>
<span id="cb9-7"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> PlaylistSchema <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">new</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Schema</span>({</span>
<span id="cb9-8">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">category</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">type</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> mongoose<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Schema</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Types</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ObjectId</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">ref</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Category'</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb9-9">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">playlist_name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">String</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb9-10">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">playlist_id</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">String</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb9-11">})<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb9-12"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> Playlist <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> mongoose<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">model</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Playlist'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> PlaylistSchema)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb9-13"></span>
<span id="cb9-14"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> TrackSchema <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">new</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Schema</span>({</span>
<span id="cb9-15">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">playlist</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">type</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> mongoose<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Schema</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Types</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ObjectId</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">ref</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Playlist'</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb9-16">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">track_name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">String</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb9-17">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">track_id</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">String</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb9-18">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">artists</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Array</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb9-19">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">images</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Array</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb9-20">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">playlist_name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">String</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// This field for convenient data analysis later</span></span>
<span id="cb9-21">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">playlist_id</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">String</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span>    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// This field for convenient data analysis later</span></span>
<span id="cb9-22">})<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb9-23"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> Track <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> mongoose<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">model</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Track'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> TrackSchema)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span></code></pre></div></div>
</section>
<section id="get-category" class="level2">
<h2 class="anchored" data-anchor-id="get-category">Get category</h2>
<p>Now, we can define a new route to get category:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb10-1">app<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'/get-category'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> (req<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> res) <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=&gt;</span> {</span>
<span id="cb10-2">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">var</span> options <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {</span>
<span id="cb10-3">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">url</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'https://api.spotify.com/v1/browse/categories'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb10-4">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">headers</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb10-5">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Authorization'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Bearer '</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> acc_token</span>
<span id="cb10-6">    }<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb10-7">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">qs</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb10-8">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'limit'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb10-9">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'country'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'VN'</span></span>
<span id="cb10-10">    }<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb10-11">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">json</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">true</span></span>
<span id="cb10-12">  }<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb10-13">  request<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get</span>(options<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> (error<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> response<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> body) <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=&gt;</span> {</span>
<span id="cb10-14">    res<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">send</span>({</span>
<span id="cb10-15">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'data'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> body</span>
<span id="cb10-16">    })</span>
<span id="cb10-17">  })<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb10-18">})</span></code></pre></div></div>
<p>Now go to <code>http://localhost:8888/get-category</code>, weâ€™ll get the response:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pakota159.github.io/img/spotify/spotify4.png" class="img-fluid figure-img"></p>
<figcaption>Category response</figcaption>
</figure>
</div>
<p>I only need <strong>category id</strong> to query playlists for each category. So we should change the code a bit:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb11-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Define a function that store category</span></span>
<span id="cb11-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">var</span> save_category_to_db <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(data){</span>
<span id="cb11-3">  Category<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>({<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">cat_id</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> data<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">id</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span> (err<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> count){</span>
<span id="cb11-4">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (count <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">===</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>){  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Only store category that's not existed in database yet</span></span>
<span id="cb11-5">      <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> cat <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">new</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Category</span>()<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb11-6">      cat<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cat_id</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> data<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">id</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb11-7">      cat<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cat_name</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> data<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb11-8">      cat<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">save</span>()</span>
<span id="cb11-9">    }</span>
<span id="cb11-10">  })<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb11-11">}</span>
<span id="cb11-12"></span>
<span id="cb11-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Define a route /get-category that call Api browse categories</span></span>
<span id="cb11-14">app<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'/get-category'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> (req<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> res) <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=&gt;</span> {</span>
<span id="cb11-15">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">var</span> options <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {</span>
<span id="cb11-16">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">url</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'https://api.spotify.com/v1/browse/categories'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb11-17">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">headers</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb11-18">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Authorization'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Bearer '</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> acc_token</span>
<span id="cb11-19">    }<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb11-20">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">qs</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb11-21">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'limit'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb11-22">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'country'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'VN'</span></span>
<span id="cb11-23">    }<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb11-24">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">json</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">true</span></span>
<span id="cb11-25">  }<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb11-26">  request<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get</span>(options<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span> (error<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> response<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> body) {</span>
<span id="cb11-27">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Store category to db</span></span>
<span id="cb11-28">    body<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">categories</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">items</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">forEach</span>((val) <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=&gt;</span> {</span>
<span id="cb11-29">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">save_category_to_db</span>(val)</span>
<span id="cb11-30">    })</span>
<span id="cb11-31">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Response</span></span>
<span id="cb11-32">    res<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">send</span>({</span>
<span id="cb11-33">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'data'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Success'</span></span>
<span id="cb11-34">    })</span>
<span id="cb11-35">  })<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb11-36">})</span></code></pre></div></div>
<p>And in db, we have our categories:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb12-1"><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb12-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span> </span>
<span id="cb12-3">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"_id"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"5d52b6f2de0da87f6ec98e7f"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span> </span>
<span id="cb12-4">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"cat_id"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"toplists"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span> </span>
<span id="cb12-5">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"cat_name"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Top Lists"</span></span>
<span id="cb12-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb12-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span> </span>
<span id="cb12-8">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"_id"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"5d52b6f2de0da87f6ec98e80"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span> </span>
<span id="cb12-9">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"cat_id"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pride"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span> </span>
<span id="cb12-10">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"cat_name"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Pride"</span></span>
<span id="cb12-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb12-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span> </span>
<span id="cb12-13">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"_id"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"5d52b6f2de0da87f6ec98e82"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span> </span>
<span id="cb12-14">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"cat_id"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"kpop"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span> </span>
<span id="cb12-15">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"cat_name"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"K-Pop"</span> </span>
<span id="cb12-16">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb12-17"><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">]</span></span></code></pre></div></div>
</section>
<section id="get-playlist" class="level2">
<h2 class="anchored" data-anchor-id="get-playlist">Get playlist</h2>
<p>For each category, I want to call Api once to get list of playlists I want. The problem is nodejs is <strong>asynchronous</strong>, and after we make a request to query <strong>toplists</strong> category, nodejs processes will continue make request to query <strong>kpop</strong> before previous request responses. To solve that problem, we need to make sure all the requests <em>must</em> response completely before we response to client.</p>
<p>The logic flow can be understood as below:</p>
<pre><code>Make request GET /https://api.spotify.com/v1/browse/categories/toplists/playlists
to get all playlists of toplists

Make request GET /https://api.spotify.com/v1/browse/categories/kpop/playlists
to get all playlists of kpop

...
After all requests above response successfully, save those playlists to db, then response to client</code></pre>
<p>To do all of these above, weâ€™ll use Promises or in this case <em>bluebird</em> package:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">npm</span> install bluebird</span>
<span id="cb14-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">npm</span> install request-promise</span></code></pre></div></div>
<p>Use <em>bluebird</em> and <em>request-promise</em>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb15-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">var</span> Bluebird <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">require</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'bluebird'</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb15-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">var</span> rp <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">require</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'request-promise'</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb15-3"></span>
<span id="cb15-4"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">var</span> save_playlist_to_db <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(data){</span>
<span id="cb15-5">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">var</span> cat_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> data<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">href</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">split</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'/'</span>)[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Extract cat id from href in response</span></span>
<span id="cb15-6">  Category<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">findOne</span>({<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">cat_id</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> cat_id}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(err<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> doc){</span>
<span id="cb15-7">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span>(doc){</span>
<span id="cb15-8">      data<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">items</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">forEach</span>(val <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=&gt;</span> {</span>
<span id="cb15-9">        Playlist<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>({<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">playlist_id</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> val<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">id</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span> (err<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> count){</span>
<span id="cb15-10">          <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (count <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">===</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>){</span>
<span id="cb15-11">            <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> playlist <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">new</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Playlist</span>()<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb15-12">            playlist<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">playlist_name</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> val<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb15-13">            playlist<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">playlist_id</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> val<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">id</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb15-14">            playlist<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">category</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> doc<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb15-15">            playlist<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">save</span>()</span>
<span id="cb15-16">          }</span>
<span id="cb15-17">        })<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb15-18">      })</span>
<span id="cb15-19">    }</span>
<span id="cb15-20">  })</span>
<span id="cb15-21">}</span>
<span id="cb15-22"></span>
<span id="cb15-23">app<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'/get-playlist'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> (req<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> res) <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=&gt;</span> {</span>
<span id="cb15-24">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Get all categories in db</span></span>
<span id="cb15-25">  Category<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">find</span>({}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(err<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> playlists){</span>
<span id="cb15-26">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">var</span> playlist_requests <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> playlists<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map</span>((val) <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=&gt;</span> {</span>
<span id="cb15-27">      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// For each category, make promise</span></span>
<span id="cb15-28">      <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rp</span>({</span>
<span id="cb15-29">        <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">url</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'https://api.spotify.com/v1/browse/categories/'</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> val<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cat_id</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'/playlists'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb15-30">        <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">headers</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb15-31">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Authorization'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Bearer '</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> acc_token</span>
<span id="cb15-32">        }<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb15-33">        <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">qs</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb15-34">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'limit'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb15-35">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'country'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'VN'</span></span>
<span id="cb15-36">        }<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb15-37">        <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">json</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">true</span></span>
<span id="cb15-38">      })</span>
<span id="cb15-39">    })</span>
<span id="cb15-40"></span>
<span id="cb15-41">    Bluebird<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">all</span>(playlist_requests)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">then</span>(response <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=&gt;</span> {</span>
<span id="cb15-42">      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// After response completed, store playlist in db</span></span>
<span id="cb15-43">      response<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map</span>((value) <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=&gt;</span> {</span>
<span id="cb15-44">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">save_playlist_to_db</span>(value<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">playlists</span>)</span>
<span id="cb15-45">      })</span>
<span id="cb15-46">      res<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">send</span>({</span>
<span id="cb15-47">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'data'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> response</span>
<span id="cb15-48">      })</span>
<span id="cb15-49">    })</span>
<span id="cb15-50">  })</span>
<span id="cb15-51">})</span></code></pre></div></div>
<p>And we get result like below, with <strong>name, id, category</strong> of all playlists:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb16-1"><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb16-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span> </span>
<span id="cb16-3">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"_id"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"5d52bf2aae62ab8263811977"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span> </span>
<span id="cb16-4">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"playlist_name"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Viral Hits"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span> </span>
<span id="cb16-5">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"playlist_id"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"37i9dQZF1DX44t7uCdkV1A"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span> </span>
<span id="cb16-6">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"category"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"5d52b6f2de0da87f6ec98e7f"</span></span>
<span id="cb16-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb16-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span> </span>
<span id="cb16-9">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"_id"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"5d52bf2aae62ab8263811978"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span> </span>
<span id="cb16-10">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"playlist_name"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Viral 50 Viá»‡t Nam"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span> </span>
<span id="cb16-11">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"playlist_id"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"37i9dQZEVXbL1G1MbPav3j"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span> </span>
<span id="cb16-12">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"category"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"5d52b6f2de0da87f6ec98e7f"</span> </span>
<span id="cb16-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb16-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span> </span>
<span id="cb16-15">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"_id"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"5d52bf2aae62ab826381197c"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb16-16">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"playlist_name"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"New Music Friday Malaysia"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span> </span>
<span id="cb16-17">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"playlist_id"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"37i9dQZF1DWZMWLrh2UzwC"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span> </span>
<span id="cb16-18">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"category"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"5d52b6f2de0da87f6ec98e7f"</span></span>
<span id="cb16-19">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb16-20"><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">]</span></span></code></pre></div></div>
</section>
<section id="get-all-tracks-in-each-playlist" class="level2">
<h2 class="anchored" data-anchor-id="get-all-tracks-in-each-playlist">Get all tracks in each playlist</h2>
<p>Now we have playlists:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb17-1"><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb17-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb17-3">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"id"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"37i9dQZF1DXcBWIGoYBM5M"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb17-4">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"name"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Today's Top Hits"</span></span>
<span id="cb17-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb17-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb17-7">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"id"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"37i9dQZF1DX44t7uCdkV1A"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb17-8">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"name"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Viral Hits"</span></span>
<span id="cb17-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb17-10"><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">]</span></span></code></pre></div></div>
<p>And if we make request like <code>GET https://api.spotify.com/v1/playlists/37i9dQZF1DX44t7uCdkV1A/tracks</code> we will be able to retrieve list of tracks in that playlist.</p>
<p>But once again, nodejs is asynchronous and there are too many playlists we need to get tracks, weâ€™ll get Apis <strong>limit rate error</strong>.</p>
<p>So we need to make seperated requests to avoid the error above. I make new route:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb18-1">app<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'/get-tracks'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> (req<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> res) <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=&gt;</span> {</span>
<span id="cb18-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get_tracks</span>(<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(response){</span>
<span id="cb18-3">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// get_tracks function will receive 1 callback to response to client</span></span>
<span id="cb18-4">    res<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">send</span>({</span>
<span id="cb18-5">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'data'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> response</span>
<span id="cb18-6">    })</span>
<span id="cb18-7">  })<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span> </span>
<span id="cb18-8">})</span></code></pre></div></div>
<p>The function <code>get_tracks</code> will do something for us:</p>
<ul>
<li>Query all category from database</li>
<li>From each category, take 2 or 3 playlists</li>
<li>From each playlist, call api GET tracks from playlist</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb19-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">var</span> get_tracks <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(cb){</span>
<span id="cb19-2">  Category<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">find</span>({}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(err<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> cats){</span>
<span id="cb19-3">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">var</span> promise_arr <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb19-4">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">var</span> query_promises <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb19-5">    cats<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">forEach</span>(cat <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=&gt;</span> {</span>
<span id="cb19-6">      query_promises<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">push</span>(</span>
<span id="cb19-7">        Playlist<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">find</span>({<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">category</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> cat<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">id</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">null</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">limit</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>})<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">exec</span>()</span>
<span id="cb19-8">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Only query 2 playlist for each category to avoid limit rate error</span></span>
<span id="cb19-9">      )</span>
<span id="cb19-10">    })</span>
<span id="cb19-11">    </span>
<span id="cb19-12">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// This promise is query promise to make sure we call api after completing all queries</span></span>
<span id="cb19-13">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Promise</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">all</span>(query_promises)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">then</span>(results <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=&gt;</span> {</span>
<span id="cb19-14">      results<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">forEach</span>(playlists <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=&gt;</span> {</span>
<span id="cb19-15">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// For each playlist, make promise</span></span>
<span id="cb19-16">        playlists<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">forEach</span>(val <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=&gt;</span> {</span>
<span id="cb19-17">          promise_arr<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">push</span>(</span>
<span id="cb19-18">            <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rp</span>({</span>
<span id="cb19-19">              <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">url</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'https://api.spotify.com/v1/playlists/'</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> val<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">playlist_id</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'/tracks'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb19-20">              <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">headers</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb19-21">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Authorization'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Bearer '</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> acc_token</span>
<span id="cb19-22">              }<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb19-23">              <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">qs</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb19-24">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'limit'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb19-25">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'country'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'VN'</span></span>
<span id="cb19-26">              }<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb19-27">              <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">json</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">true</span></span>
<span id="cb19-28">            })</span>
<span id="cb19-29">          )</span>
<span id="cb19-30">        })</span>
<span id="cb19-31">      })</span>
<span id="cb19-32"></span>
<span id="cb19-33">      Bluebird<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">all</span>(promise_arr)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">then</span>(response <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=&gt;</span> {</span>
<span id="cb19-34">        response<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">forEach</span>(val <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=&gt;</span> {</span>
<span id="cb19-35">          <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// After finishing calling API, save response data to database</span></span>
<span id="cb19-36">          <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">save_track_to_db</span>(val)</span>
<span id="cb19-37">        })</span>
<span id="cb19-38">      })<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">catch</span>(err <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=&gt;</span> {</span>
<span id="cb19-39">        <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">console</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">log</span>(err)</span>
<span id="cb19-40">      })</span>
<span id="cb19-41">      </span>
<span id="cb19-42">      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Because query and saving data took too much time, I response to client this msg</span></span>
<span id="cb19-43">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cb</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Processing'</span>)</span>
<span id="cb19-44">    })</span>
<span id="cb19-45">  })</span>
<span id="cb19-46">}</span></code></pre></div></div>
<p>After calling API completely, we save the response data to track database:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb20-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">var</span> save_track_to_db <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(data){</span>
<span id="cb20-2">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">var</span> playlist_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> data<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">href</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">split</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'/'</span>)[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>]</span>
<span id="cb20-3">  Playlist<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">findOne</span>({<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">playlist_id</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> playlist_id}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(err<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> pl){</span>
<span id="cb20-4">    data<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">items</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">forEach</span>(val <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=&gt;</span> {</span>
<span id="cb20-5">      <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span>(val <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;&amp;</span> val<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">track</span>){</span>
<span id="cb20-6">        Track<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>({<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">track_id</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> val<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">track</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">id</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">playlist</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> pl}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(err<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> count){</span>
<span id="cb20-7">          <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span>(count <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">===</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>){</span>
<span id="cb20-8">            <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> track <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">new</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Track</span>()<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb20-9">            track<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">track_id</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> val<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">track</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">id</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb20-10">            track<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">track_name</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> val<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">track</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb20-11">            track<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">playlist</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pl<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb20-12">            track<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">artists</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> val<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">track</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">artists</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb20-13">            track<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">images</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> val<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">track</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">album</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">images</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb20-14">            track<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">playlist_name</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pl<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">playlist_name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb20-15">            track<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">playlist_id</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pl<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">playlist_id</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb20-16">            track<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">save</span>()</span>
<span id="cb20-17">            <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">console</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">log</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Done save track '</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> val<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">track</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Log on terminal</span></span>
<span id="cb20-18">          }</span>
<span id="cb20-19">        })</span>
<span id="cb20-20">      }</span>
<span id="cb20-21">    })</span>
<span id="cb20-22">  })</span>
<span id="cb20-23">}</span></code></pre></div></div>
<p>While client receive a response like <strong>Processing</strong>, in the console terminal, we can see what the node server is doing:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pakota159.github.io/img/spotify/spotify7.png" class="img-fluid figure-img"></p>
<figcaption>Terminal log</figcaption>
</figure>
</div>
<p>As a result now we have track database like this:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb21-1"><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb21-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span> </span>
<span id="cb21-3">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"artists"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb21-4">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb21-5">        <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"name"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ximena SariÃ±ana"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span> </span>
<span id="cb21-6">        <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"type"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"artist"</span></span>
<span id="cb21-7">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb21-8">    <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">]</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span> </span>
<span id="cb21-9">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"track_id"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2vNDq5XAoF4Gl4hfY7aacS"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span> </span>
<span id="cb21-10">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"track_name"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Â¿QuÃ© Tiene?"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span> </span>
<span id="cb21-11">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"playlist_name"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Viral Hits"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span> </span>
<span id="cb21-12">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"playlist_id"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"37i9dQZF1DX44t7uCdkV1A"</span></span>
<span id="cb21-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb21-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span> </span>
<span id="cb21-15">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"artists"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb21-16">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb21-17">        <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"name"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Old Dominion"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span> </span>
<span id="cb21-18">        <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"type"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"artist"</span></span>
<span id="cb21-19">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb21-20">    <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">]</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span> </span>
<span id="cb21-21">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"track_id"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1kTugNMVMbaQep1srMua2q"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span> </span>
<span id="cb21-22">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"track_name"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bad At Love - Recorded at Sound Stage Studios Nashville"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span> </span>
<span id="cb21-23">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"playlist_name"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Viral Hits"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span> </span>
<span id="cb21-24">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"playlist_id"</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"37i9dQZF1DX44t7uCdkV1A"</span></span>
<span id="cb21-25">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb21-26"><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">]</span></span></code></pre></div></div>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>And weâ€™ve done. Iâ€™m now able to retrieve thounsand of songs and playlists from Spotify. I could make a small background tasks run periodically to query new songs, new playlists if I want. After that, when I have enough data, I can conduct some analysis over it to learn new insights about music.</p>
<p>Thank for reading, this is one of my first blogs so it should have many mistakes. Hope you guys enjoy it and give me some feedback!</p>


</section>

 ]]></description>
  <category>cs</category>
  <category>nodejs</category>
  <category>data</category>
  <category>spotify</category>
  <guid>https://pakota159.github.io/posts/using-spotify-api-to-retrieve-data/</guid>
  <pubDate>Wed, 07 Aug 2019 17:00:00 GMT</pubDate>
  <media:content url="https://pakota159.github.io/img/spotify/bg.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>How I use scrapy to collect the data I need</title>
  <dc:creator>Cuong Pham</dc:creator>
  <link>https://pakota159.github.io/posts/how-i-use-scrapy-to-collect-the-data-i-need/</link>
  <description><![CDATA[ 




<p>About 4 years ago, I encountered a huge struggle looking for a suitable room for rent. Information about renting house/room is vast and itâ€™s really hard to filter useful data.</p>
<p>I didnâ€™t want to hire an agent for that and didnâ€™t have time to search every websites for rent.</p>
<p>Thatâ€™s when I have the idea of collecting data automatically from every kind of websites.</p>
<p>But it took quite a long time to study programming well enough to make some tools like that. Few years later, now Iâ€™m able to make my wishes some true with the automation tools. I called it <strong><em>Stacy</em></strong> (in Gwen Stacy - A spider woman from Marvel)</p>
<p>There are normally 4 steps in defining and solving a data science problem:</p>
<ol type="1">
<li>Formulating a question or problem</li>
<li>Acquiring and cleaning data</li>
<li>Conducting exploratory data analysis</li>
<li>Using prediction and inference to draw conclusions</li>
</ol>
<p>For each step we need to answer some questions, so we go through these one by one.</p>
<section id="define-the-questionproblem-we-need-to-solve" class="level2">
<h2 class="anchored" data-anchor-id="define-the-questionproblem-we-need-to-solve">Define the question/problem we need to solve</h2>
<p><em>What do we want and what are our metrics of success or how to evaluate the result?</em></p>
<p>In my case, I want:</p>
<ul>
<li>To find all houses that are <strong>available at the time</strong> and <strong>satisfy my needs</strong>.</li>
</ul>
<p>Ex: I want a room with area around 20<img src="https://latex.codecogs.com/png.latex?m%5E2">, has windows, able to cook, inside Dong Da District and the price is around 2 million VND per month.</p>
<p>So to make sure the houses are <em>available at the time</em> and <em>satisfy my needs</em>, I need the tool to:</p>
<ul>
<li>Update in real-time or at least every 30 minutes which houses are available (<em>available at the time</em>)</li>
<li>Match all the criteria (<em>satisfy my needs</em>)</li>
</ul>
<p>I expect the data flow as below:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pakota159.github.io/img/scrape/scrape1.png" class="img-fluid figure-img"></p>
<figcaption>Data Flow Diagram</figcaption>
</figure>
</div>
</section>
<section id="acquiring-data" class="level2">
<h2 class="anchored" data-anchor-id="acquiring-data">Acquiring data</h2>
<p>Something I need to prepare:</p>
<ul>
<li><p><strong>Data Sources</strong>: facebook posts/groups, some websites as: <em>nha.chotot.com</em>, <em>phongtro123.com</em>, <em>mogi.vn</em>, <em>batdongsan.com.vn</em></p></li>
<li><p><strong>Framework/Tools</strong>: For scrape data using Python, I will use <strong>Scrapy</strong> and <strong>Splash</strong> for simulate a browser in cases some website requires javascript. Row data will be stored in <em>mongodb</em> with ORM will be <em>Pymongo</em>; I also want to schedule the crawler thus I will use <em>scrapy-do</em> for scheduly running background tasks.</p></li>
</ul>
<p>Letâ€™s code our â€œspiderâ€.</p>
<p>After creating folder for our project, setup <em>virtualenv</em> for python3, <em>pip install scrapy</em> to install scrapy, we run <code>startproject</code> command to create new project:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">$</span> scrapy startproject stacy</span></code></pre></div></div>
<p>The crawler includes few main parts:</p>
<ul>
<li>The spider itself: a class inherit <code>scrapy.Spider</code> class that create list of Requests that we send to get the webpage we need. Each <code>Request</code> has a callback that is the function which handle the response of the request.</li>
<li>In case we need authentication, we should care about <code>middleware</code>, I usually add cookies to middleware, so every requests the crawler makes will contains authentication information</li>
<li>Scrapy stores the data that retrive from <code>response</code> in <code>Items</code>. My item includes several fields but the most important is <code>post_content</code> that contains the raw text/content about housing.</li>
<li>Item pipeline is where we save the Item to database.</li>
<li>The parsing part is usually quite boring, you can use inspector in browser to look up for the <code>xpath</code> or <code>css</code> of the element in DOM, then parsing is simple thing</li>
</ul>
<p>I will show some interesting parts in my code here.</p>
<section id="using-splash-with-lua-script-to-login-to-a-page" class="level3">
<h3 class="anchored" data-anchor-id="using-splash-with-lua-script-to-login-to-a-page">Using splash with Lua script to login to a page</h3>
<p>Splash is a headless browser (a browser without GUI) that is integrated greatly with scrapy, the fun thing is Splash using Lua, so I need to learn a little about Lua to be able to write the automatically login script.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb2-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span> main<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">splash</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">args</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb2-2">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- Define a function that focus on an input</span></span>
<span id="cb2-3">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span> focus<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">sel</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb2-4">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">splash</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">sel</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">):</span>focus<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">()</span></span>
<span id="cb2-5">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">end</span></span>
<span id="cb2-6">    </span>
<span id="cb2-7">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- Go to the login site</span></span>
<span id="cb2-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">assert</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">splash</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>go<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb2-9">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">splash</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">args</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">url</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb2-10">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">headers</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">splash</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">args</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">headers</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb2-11">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">http_method</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">splash</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">args</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">http_method</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb2-12">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">body</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">splash</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">args</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">body</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb2-13">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">})</span></span>
<span id="cb2-14">    </span>
<span id="cb2-15">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- "Click" to email input</span></span>
<span id="cb2-16">    focus<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'input[name=email]'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb2-17">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- "Type" your email</span></span>
<span id="cb2-18">    <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">splash</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>send_text<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cuongtuanpham159@gmail.com"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb2-19">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- "Click" to password input</span></span>
<span id="cb2-20">    focus<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'input[name=pass]'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb2-21">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- "Type" your password</span></span>
<span id="cb2-22">    <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">splash</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>send_text<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"xtcc8JWyq2q/lxGX+4D9Sx92V80WttPhAJSBues"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb2-23">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- Wait a little bit to make sure inputs is filled</span></span>
<span id="cb2-24">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">assert</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">splash</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>wait<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">))</span></span>
<span id="cb2-25">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- "Click" to Login button</span></span>
<span id="cb2-26">    <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">splash</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'input[name=login]'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">):</span>mouse_click<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">()</span></span>
<span id="cb2-27">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- Done, wait the welcome window to display</span></span>
<span id="cb2-28">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">assert</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">splash</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>wait<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">))</span>                        </span>
<span id="cb2-29">                                                                </span>
<span id="cb2-30">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb2-31">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">url</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">splash</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>url<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(),</span></span>
<span id="cb2-32">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">cookies</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">splash</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>get_cookies<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(),</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- Get the cookies to store in database later</span></span>
<span id="cb2-33">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">html</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">splash</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>html<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(),</span></span>
<span id="cb2-34">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb2-35"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">end</span></span></code></pre></div></div>
<p>The code above is the most basic example when we want to login into some sites. Because in many cases, the website will require something like capcha, â€˜Iâ€™m not robotâ€™ thing and so on that make the login process more complicated. But normally I will successfully login to the website I want and get <code>cookies</code> that allows me to easily make requests later without having to login again.</p>
</section>
<section id="handle-middleware-with-cookies" class="level3">
<h3 class="anchored" data-anchor-id="handle-middleware-with-cookies">Handle middleware with cookies</h3>
<p>Iâ€™m not sure this is the good practice to add cookies to the requests, but I donâ€™t know any other ways.</p>
<p><code>middlewares.py</code></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">class</span> StacyDownloaderMiddleware(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">object</span>):</span>
<span id="cb3-2">    ...</span>
<span id="cb3-3">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> get_cookies(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>, spider):</span>
<span id="cb3-4">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Find cookies exists in db</span></span>
<span id="cb3-5">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> spider.collection.find_one({<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'spider_name'</span>: spider.cookie_collection})</span>
<span id="cb3-6">    </span>
<span id="cb3-7">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> process_request(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>, request, spider):</span>
<span id="cb3-8">        cookies <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.get_cookies(spider<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>spider)</span>
<span id="cb3-9">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># If cookies exists, add cookies to request</span></span>
<span id="cb3-10">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> cookies:</span>
<span id="cb3-11">            request.cookies <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> cookies.get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'cookies'</span>)</span>
<span id="cb3-12">        </span>
<span id="cb3-13">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span></span>
<span id="cb3-14">    </span>
<span id="cb3-15">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> process_response(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>, request, response, spider):</span>
<span id="cb3-16">        cookies <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.get_cookies(spider<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>spider)</span>
<span id="cb3-17">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># If in database has no coookies, insert to database, this applied when login</span></span>
<span id="cb3-18">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> cookies:</span>
<span id="cb3-19">            spider.collection.insert_one({</span>
<span id="cb3-20">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'spider_name'</span>: spider.cookie_collection,</span>
<span id="cb3-21">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'cookies'</span>: response.data.get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'cookies'</span>)</span>
<span id="cb3-22">            })</span>
<span id="cb3-23"></span>
<span id="cb3-24">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> response</span></code></pre></div></div>
<p>The code above still need to be improved like add more validator when I check the cookies in the database, at least add the <code>try except</code>. But for small, simple project I do not focus on this yet.</p>
</section>
<section id="remove-all-emoji-or-non-alphabet-non-vietnamese-characters" class="level3">
<h3 class="anchored" data-anchor-id="remove-all-emoji-or-non-alphabet-non-vietnamese-characters">Remove all emoji or non-alphabet, non-vietnamese characters</h3>
<p>After we retrieve <code>post_content</code> from response html, we need briefly â€œcleanâ€ that data.</p>
<p>Example I have retrieved a text:</p>
<p><code>ğŸ ğŸ ğŸ  Cho thuÃª phÃ²ng táº§ng 2 thoÃ¡ng mÃ¡t ,sáº¡ch sáº½ . CÃ³ chá»— Ä‘un náº¥u vÃ  sÃ¢n phÆ¡i Ä‘á»“ thoÃ¡ng táº§ng 4 . Chung chá»§ nÃªn an ninh tá»‘t . 1,8 Tr/thÃ¡ng, cá»c 1 thÃ¡ng . NgÃµ :255 Nguyá»…n Khang-Cáº§u Giáº¥y . Báº¡n nÃ o qua tÃ¢m ib hoáº·c LH:0972413480</code></p>
<p>There are some things I noticed:</p>
<ul>
<li>Emoji and special characters in the text</li>
<li>Uppercase and lowercase characters</li>
<li>Extra whitespace</li>
</ul>
<p>So how to <code>normalize</code> the text above?</p>
<p>Using regex seems to be the fastest way to remove Emoji and unwanted characters.</p>
<p>The idea is replace all non-alphabet/vietnamese with empty string <code>re.sub(r"[^\w\s]+", "", text)</code> then replace double whitespace <code>\s\s+</code> with single white space.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> clean_text(text):</span>
<span id="cb4-2">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> re.sub(<span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">r"</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">\s\s</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" "</span>, re.sub(<span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">r"</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">[^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">\w\s</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>, text))</span></code></pre></div></div>
<p>When run the code above with the text above, result will be:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"Cho thuÃª phÃ²ng táº§ng 2 thoÃ¡ng mÃ¡t sáº¡ch sáº½ CÃ³ chá»— Ä‘un náº¥u vÃ  sÃ¢n phÆ¡i Ä‘á»“ </span></span>
<span id="cb5-2"><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">thoÃ¡ng táº§ng 4 Chung chá»§ nÃªn an ninh tá»‘t 18 TrthÃ¡ng cá»c 1 thÃ¡ng NgÃµ 255 </span></span>
<span id="cb5-3">Nguyá»…n KhangCáº§u Giáº¥y Báº¡n nÃ o qua tÃ¢m ib hoáº·c LH0972413480<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span></code></pre></div></div>
<p>Look pretty â€¦ wrong. Itâ€™s will be hard for us to detect the price <code>18 TrthÃ¡ng</code> that actually is <code>1,8 Tr/thÃ¡ng</code>.</p>
<p>Because there are few punctuations that should be remained in the text like <code>,</code>, <code>.</code>, <code>/</code>, therefore we need to define which ones ought to be kept.</p>
<p>The list of unicode characters could be found <a href="https://unicode-table.com/en/#control-character">here</a>. And thanks for that, I can define which punctuations I should remain in the text and rewrite my code:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> clean_text(text):</span>
<span id="cb6-2">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> re.sub(</span>
<span id="cb6-3">            <span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">r"</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">\s\s</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>,</span>
<span id="cb6-4">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" "</span>,</span>
<span id="cb6-5">            re.sub(</span>
<span id="cb6-6">                <span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">r"</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">[^</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\u002C</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">-</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\u002F\u0028</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">-</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\u0029\u003A</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">-</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\u003F</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">\w\s</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>, text</span>
<span id="cb6-7">            )</span>
<span id="cb6-8">        )</span></code></pre></div></div>
<p>And the result is pretty good now:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"Cho thuÃª phÃ²ng táº§ng 2 thoÃ¡ng mÃ¡t ,sáº¡ch sáº½ . </span></span>
<span id="cb7-2"><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">CÃ³ chá»— Ä‘un náº¥u vÃ  sÃ¢n phÆ¡i Ä‘á»“ thoÃ¡ng táº§ng 4 . </span></span>
<span id="cb7-3">Chung chá»§ nÃªn an ninh tá»‘t . <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span> Tr<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>thÃ¡ng, cá»c <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> thÃ¡ng . </span>
<span id="cb7-4">NgÃµ :<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">255</span> Nguyá»…n Khang<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>Cáº§u Giáº¥y . Báº¡n nÃ o qua tÃ¢m ib hoáº·c LH:<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">972413480</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span></code></pre></div></div>
<p>We can do more to remove redundant semicolons but I feel ok with this text and ready to save it to the data base.</p>
<p><strong><em>Updatingâ€¦</em></strong></p>


</section>
</section>

 ]]></description>
  <category>cs</category>
  <category>scrapy</category>
  <category>splash</category>
  <category>python</category>
  <category>data</category>
  <guid>https://pakota159.github.io/posts/how-i-use-scrapy-to-collect-the-data-i-need/</guid>
  <pubDate>Sun, 07 Jul 2019 17:00:00 GMT</pubDate>
  <media:content url="https://pakota159.github.io/img/scrape/bg.jpg" medium="image" type="image/jpeg"/>
</item>
</channel>
</rss>
